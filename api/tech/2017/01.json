{"posts":[{"id":"2017/01/09/PyQt.md","slug":"2017/01/09/pyqt","body":"\nå‰ç«¯åšå¾—ä¹…äº†ï¼Œæˆ‘çš„å·¥ç¨‹æ ¹ç›®å½•ä¸‹é¢å°±ä¼šå¤šä¸€ä¸ªbashè„šæœ¬ï¼ŒæŠŠæ¯ä¸€ä¸ªé¡¹ç›®çš„å¯åŠ¨è„šæœ¬æ”¾åœ¨é‡Œé¢ç„¶åæ³¨é‡Šæ‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¦‚æœè¦å¯åŠ¨ä¸€ä¸ªé¡¹ç›®çš„æ—¶å€™åªéœ€è¦è¿è¡Œè„šæœ¬å°±å¥½äº†ã€‚\n\nå¯æ˜¯é—®é¢˜éšä¹‹å‡ºç°äº†ï¼Œé¡¹ç›®è¶Šæ¥è¶Šå¤šï¼Œç„¶åé‚£ä¸ªè„šæœ¬å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ã€‚\n\n![è„šæœ¬åº“](http://ww4.sinaimg.cn/mw690/89d0a2e1gw1fbkbh1idg9j20gi046q4s.jpg)\n\nå› ä¸ºç”¨çš„éƒ½æ˜¯fekitï¼Œæ‰€ä»¥å„ä¸ªå·¥ç¨‹å°±mockæ•°æ®ä¸ä¸€æ ·ã€‚ä¸ä¹…æˆ‘å‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå·¥ä½œä¸€å¤©ï¼Œè€çœ¼æ˜èŠ±ä¹‹åï¼Œè¦æƒ³åœ¨é¡¹ç›®ä¹‹é—´åˆ‡æ¢ï¼Œå°±æ˜¯æ¯æ¬¡è¦æ•°å‡ºç¬¬å‡ è¡Œï¼ŒæŠŠå®ƒè§£æ³¨é‡Šï¼Œé‚£ç®€ç›´æ˜¯ä»¶ææ€–çš„äº‹æƒ…ã€‚\n\näºæ˜¯æˆ‘ä¾¿å¸Œæœ›æœ‰ä¸€ä¸ªå›¾å½¢åŒ–çš„ç•Œé¢ï¼Œèƒ½å®æ—¶æ˜¾ç¤ºæˆ‘ç›®å‰å¤„äºä»€ä¹ˆç¯å¢ƒï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ‡ç¯å¢ƒï¼ˆå› ä¸ºæ˜¯è§¦æ‘¸å±ï¼Œæ‰€ä»¥å›¾å½¢åŒ–ç•Œé¢æ•ˆç‡å¾ˆé«˜ğŸ˜,åŒæ—¶å› ä¸ºæˆ‘ç»å¸¸åœ¨archLinuxå’ŒMacä¸‹é¢åˆ‡æ¢ï¼Œæ‰€ä»¥æˆ‘å¯¹è·¨å¹³å°è¦æ±‚å¾ˆé«˜ï¼‰ã€‚\n\n# éœ€æ±‚\n\n1. å›¾å½¢åŒ–çš„ç•Œé¢ï¼Œèƒ½å¤Ÿæ˜¾ç¤ºç°åœ¨mockçš„æ˜¯å“ªä¸ªé¡¹ç›®ã€‚\n2. å…¼å®¹ArchLinux(Gnome)å’ŒOSXã€‚\n3. å¼€å‘æ—¶é—´è¶ŠçŸ­è¶Šå¥½ï¼ˆæ ¹æœ¬æ²¡æ—¶é—´åœ¨å·¥å…·ä¸Šä¸‹åŠŸå¤«ğŸ˜¢ï¼‰ã€‚\n4. ä¸è¦å½±å“åˆ°æˆ‘ç°æœ‰çš„å¼€å‘ä¹ æƒ¯ï¼ˆç”Ÿæˆçš„shellè„šæœ¬æ ¼å¼ä¸èƒ½å˜ï¼‰ã€‚\n\n# åˆ†æ\n\né¢ï¼Œå¥½å§ï¼Œå…¶å®electronä¹Ÿè¡Œï¼Œå¯æ˜¯å®å®å°±æ˜¯è§‰å¾—pyQtå¥½ä¹…ä¸ç”¨äº†ï¼Œå°±æ˜¯æƒ³ç”¨ç”¨ã€‚\n\n# ç¼–å†™\n\næ–‡ä»¶è¯»å†™\n\n```python\nimport sys\nimport os\nimport re\n\nQMB_FILE_PATH = os.path.split(os.path.realpath(__file__))[0] + '/qmbrun.sh'# æˆ‘é‚£ä¸ªshellè„šæœ¬å«qmbrun.sh\nRUN_BASH_PREFIX = '#!/bin/bash\\n'\nFEKIT_SERVER = 'fekit server'\nHASH_CHAR = '#'\nPRD_REG = r'.*-m\\s(.*)/.*'\n\ndef readFile():\n    commands = {}\n    file = open(QMB_FILE_PATH)\n    line = file.readline()\n    while line:\n        if line.find(FEKIT_SERVER) > -1:\n            command = line.replace(HASH_CHAR,'')\n            match = re.match(PRD_REG, command)\n            if match: \n                product = match.groups()[0]\n            if product:\n                commands[product] = {\n                    'selected': line.find(HASH_CHAR) < 0,\n                    'command': command\n                }\n        line = file.readline()\n    file.close()\n    return commands\n\ndef writeFile(str):\n    file = open(QMB_FILE_PATH,'w')\n    file.write(RUN_BASH_PREFIX + str)\n    file.close()\n```\n\nå¯¹è¯æ¡†\n\n```python\nfrom PyQt5.QtWidgets import *\n\nclass QMBedit(QDialog):\n    def __init__(self, parent = None):\n        super(QMBedit, self).__init__(parent)\n\n        self.btns = []\n        self.commands = readFile()\n        \n        self.setWindowTitle('QMBedit')\n        layout = QVBoxLayout()\n\n        for cmd in self.commands.keys():\n            btn = QRadioButton(cmd)\n            btn.setChecked(self.commands[cmd]['selected'])\n            btn.clicked.connect(self.btn_clicked)\n            self.btns.append(btn)\n            layout.addWidget(btn)\n\n        self.setLayout(layout)\n    \n    def btn_clicked(self): \n        for btn in self.btns:\n            self.commands[btn.text()]['selected'] = btn.isChecked()\n        self.map2str()\n    \n    def map2str(self):\n        str = ''\n        for cmd in self.commands.keys():\n            if self.commands[cmd]['selected']:\n                str += self.commands[cmd]['command']\n            else:\n                str += HASH_CHAR + self.commands[cmd]['command']\n        writeFile(str)\n```\n\n# è¿è¡Œ\n\n![è¿è¡Œç»“æœ](http://ww1.sinaimg.cn/mw690/89d0a2e1gw1fbkbh2aju0j205s04xwex.jpg)\n\nOKï¼Œç”¨èµ·æ¥ä¸é”™ï¼Œæ‹¯æ•‘äº†è€çœ¼æ˜èŠ±çš„æˆ‘ã€‚è¯è¯´æœ¬æ–‡æ˜¯æœ¬å¹´åº¦ç¬¬ä¸€æ–‡å•Šï¼å…¶å®æˆ‘æŒºç”¨å¿ƒçš„ï¼Œå†™æ–‡ç« çš„æ—¶é—´è¿œè¿œè¶…è¿‡äº†å†™è¿™æ®µä»£ç çš„æ—¶é—´ã€‚ã€‚ã€‚çœŸçš„ğŸ˜‚ã€‚\n\nPSï¼šè¯è¯´emojipediaçœŸçš„å¾ˆå¥½ç”¨ï¼Œå¯ä»¥è€ƒè™‘ç»™vcodeå¼€å‘ä¸ªæ’ä»¶ğŸ¤”ã€‚","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2017/01/17/VScode-Python-python3.6.md","slug":"2017/01/17/vscode-python-python36","body":"\næœ¬æ¥æƒ³å†™ä¸€ç¯‡pyqt+qmlçš„æ–‡ç« ï¼Œç»“æœä»Šå¤©æ‰“å¼€VScodeå‘ç°Pythonä¸è¯­æ³•æç¤ºäº†ã€‚æ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼Œå‘ç°ä¸€ç›´åœ¨æŠ¥é”™ï¼Œgramar3.6 not foundã€‚\n\næ‰“å¼€```~/.vscode/extensions/donjayamanne.python-0.5.5/pythonFiles/preview/jedi/parser```æ‰¾åˆ°é‡Œé¢çš„```grammar3.5.txt```å¤åˆ¶ä¸º```grammar3.6.txt```\n\né‡å¯VScodeå°±å¥½äº†ã€‚","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2017/01/18/PyQt-QML.md","slug":"2017/01/18/pyqt-qml","body":"\n> ç¿»äº†ç¿»ä»¥å‰ä¿å­˜çš„ä¹¦ç­¾ï¼Œå‘ç°äº†ä¸€ä¸ªpyQtå’ŒQMLçš„å¼€å‘æ€»ç»“ï¼Œä»£ç è·‘èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹é”™è¯¯ï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”å®˜ç½‘çš„tutorialæ›´ç®€å•ç›´è§‚ä¸€ç‚¹ã€‚è¿˜èƒ½ä»é‡Œé¢æ‰¾ä¸€ç‚¹hybridå¼€å‘çš„ideaï¼ˆå› ä¸ºQMLå…¶å®ä¹Ÿæ˜¯ä¸€ç§ECMAScriptå¼•æ“å®ç°ï¼‰ã€‚\n\n# åœ¨QMLä¸Šä¸‹æ–‡æ’å…¥å˜é‡\n\nåœ¨```view.setSource```ä¹‹å‰å°†å˜é‡æ’å…¥ä¸Šä¸‹æ–‡ä¹‹ä¸­ã€‚\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\n\nrootCtx = view.rootContext()\nrootCtx.setContextProperty(\"textData\", \"hi\")\n\nview.setSource(QUrl('ctxProp.qml'))\nview.show()\n\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    id: test\n\n    width: 1000; height: 300\n\n    Text {\n        \n        anchors.fill: parent;\n        text: textData\n    }\n}\n```\n\n# PyQtä¿®æ”¹QMLä¸­å˜é‡\n\nè¿™æ ·å¯ä»¥å…ˆåŠ è½½qmlå†ä¿®æ”¹å†…éƒ¨çš„å€¼ï¼Œæ³¨æ„```property```åé¢æ˜¯æœ‰ç±»å‹çš„ã€‚\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\nview.setSource(QUrl('./ownProp.qml'))\n\nrootObj = view.rootObject()\nrootObj.setProperty(\"textData\", 'hi')\n\nview.show()\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    width: 1000\n    height: 300\n    id: test\n    \n    property string textData;\n\n    Text {\n        \n        anchors.fill: parent;\n        text: textData;\n    }\n    \n}\n```\n\n# æ¶ˆæ¯ä¼ é€’\n\nQTæœ€ä¸»è¦çš„å°±æ˜¯å®ƒçš„ä¿¡å·æ§½æœºåˆ¶ï¼Œå¯¹æˆ‘çš„å½±å“ä¹Ÿå¾ˆå¾ˆå¤§ï¼Œä»¥è‡³äºæˆ‘ç°åœ¨çš„ç»„ä»¶å¼€å‘ä¹Ÿåœ¨ç”¨è¿™ä¸€å¥—æ€ç»´ã€‚é‚£ä¹ˆQTæ€ä¹ˆå’ŒQMLå†…éƒ¨è¿›è¡Œæ¶ˆæ¯ä¼ é€’å‘¢ï¼Ÿ\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\nview.setSource(QUrl('./signal.qml'))\n\ndef on_click():\n    print(\"hi\")\n\nrootQbj = view.rootObject()\nrootQbj.mclicked.connect(on_click)\nrootQbj.setProperty('name','hello')\nview.show()\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    width: 1000\n    height: 300\n    id: test;\n    signal mclicked;\n    property string name;\n    \n\n    Text {\n        anchors.fill: parent;\n        text: name\n    }\n\n    MouseArea {        \n        anchors.fill: parent\n\n        onClicked: {\n            mclicked();\n        }\n    }\n    \n}\n\n```\n\n# è°ƒç”¨QMLå†…éƒ¨å‡½æ•°\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\nview.setSource(QUrl('./interface.qml'))\n\ndef on_click():\n    rootObject.set_text('Clicked')\n\nrootObject = view.rootObject()\nrootObject.mclicked.connect(on_click)\n\nview.show()\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    width: 1000\n    height: 300\n    color: \"transparent\"\n    id: test\n    signal mclicked\n    Text {\n        id: testText\n        \n        anchors.fill: parent\n        \n        text: \"Click Me\"\n    }\n    MouseArea {\n        anchors.fill: parent\n        onClicked: {\n            mclicked();\n        }\n    }\n    function set_text(text) {\n        testText.text = text\n    }   \n}\n```\n\nå°±é…±ï¼Œåé¢å†å†™ä¸€ç¯‡QMLè°ƒç”¨jsçš„æ–‡ç« å§ğŸ¤”ã€‚","collection":"blog","data":{"type":"post","category":"tech"}}]}