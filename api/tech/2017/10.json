{"posts":[{"id":"2017/10/17/linux-swap.md","slug":"2017/10/17/linux-swap","body":"# 给 linux 增加 swap 文件\n\n> 上周末，自己写的公司的服务挂了，心疼自己几分钟。。。\n\n事发之后看了眼服务器，好多配置被当白鼠了，比如机器都没有 SWAP，\n以前都是装机器的时候习惯性分配 SWAP，还没有现挂载的经验，在此记录一下。\n\n1. 创建分页文件（3GB）\n\n        dd if=/dev/zero of=/opt/swapfile bs=1M count=3000\n\n2. 格式化为 SWAP 分区\n\n        mkswap /opt/swapfile \n\n3. 挂载分区\n\n        swapon /opt/swapfile\n\n4. 保证以后重启后自动挂载（在 /etc/fstab 增加信息）\n\n         /opt/swapfile    swap   swap defaults 0 0\n\n5. 重新挂载\n\n        mount -a\n\n> 关于执行 free -m 的提示\n\n内存中的 buffered 和 cached 分别表示可以用来 写入/写出 磁盘的内存","collection":"blog","data":{"type":"post","category":"tech"}}]}