{"posts":[{"id":"2018/01/03/typescript-AST.md","slug":"2018/01/03/typescript-ast","body":"# TypeScript编译抽象语法树\n\n[代码地址](http://gongbushang.com:3000/gongbushang/typescript_compiler)\n\n两年前我曾写了一个篇\n[Esprima静态分析js代码](http://gongbaodd.github.io/fe/2015/12/25/esprima%E9%9D%99%E6%80%81%E5%88%86%E6%9E%90js%E4%BB%A3%E7%A0%81.html),\n当时的目的是为了检查一个js文件对某些函数的调用数计数来确定这个函数是不是可删的.\n\n自从用了typescript,\n这种方法自然就不需要使用了,\n但是如果我想获取 typescript 的 AST 怎么办?\n\n很简单, 因为 Ts 本身就是开源项目, 官方已经有解决方案.\n\n假设我想看一下 \"const a:number = 11;\" 的 AST 树, 代码如下.\n\n```typescript\nimport ts = require(\"typescript\");\nconst source = \"const a:number = 11;\";\n\nfunction printChildren(node: ts.Node, depth = 0) {\n    console.log(new Array(depth + 1).join(\"---\"), ts.SyntaxKind[node.kind], node.pos, node.end);\n    depth++;\n    node.getChildren().forEach(c => printChildren(c, depth));\n}\n\nconst sourceFile = ts.createSourceFile(\"a.ts\", source, ts.ScriptTarget.ES2016, true);\nprintChildren(sourceFile);\n```\n\n结果\n\n```shell\n SourceFile 0 20\n--- SyntaxList 0 20\n------ VariableStatement 0 20\n--------- VariableDeclarationList 0 19\n------------ ConstKeyword 0 5\n------------ SyntaxList 5 19\n--------------- VariableDeclaration 5 19\n------------------ Identifier 5 7\n------------------ ColonToken 7 8\n------------------ NumberKeyword 8 14\n------------------ FirstAssignment 14 16\n------------------ FirstLiteralToken 16 19\n--------- SemicolonToken 19 20\n--- EndOfFileToken 20 20\n```\n\n一个空对象的抽象语法树.\n\n```typescript\nclass a {}\n```\n\n```shell\n SourceFile 0 10\n--- SyntaxList 0 10\n------ ClassDeclaration 0 10\n--------- ClassKeyword 0 5\n--------- Identifier 5 7\n--------- FirstPunctuation 7 9\n--------- SyntaxList 9 9\n--------- CloseBraceToken 9 10\n--- EndOfFileToken 10 10\n```\n\n那么复杂点的对象\n\n```typescript\nclass a {\n    public num: number = 11;\n    public getNumber() {\n        return this.num;\n    }\n}\n```\n\n```shell\n SourceFile 0 96\n--- SyntaxList 0 96\n------ ClassDeclaration 0 96\n--------- ClassKeyword 0 5\n--------- Identifier 5 7\n--------- FirstPunctuation 7 9\n--------- SyntaxList 9 94\n------------ PropertyDeclaration 9 38\n--------------- SyntaxList 9 20\n------------------ PublicKeyword 9 20\n--------------- Identifier 20 24\n--------------- ColonToken 24 25\n--------------- NumberKeyword 25 32\n--------------- FirstAssignment 32 34\n--------------- FirstLiteralToken 34 37\n--------------- SemicolonToken 37 38\n------------ MethodDeclaration 38 94\n--------------- SyntaxList 38 49\n------------------ PublicKeyword 38 49\n--------------- Identifier 49 59\n--------------- OpenParenToken 59 60\n--------------- SyntaxList 60 60\n--------------- CloseParenToken 60 61\n--------------- Block 61 94\n------------------ FirstPunctuation 61 63\n------------------ SyntaxList 63 88\n--------------------- ReturnStatement 63 88\n------------------------ ReturnKeyword 63 78\n------------------------ PropertyAccessExpression 78 87\n--------------------------- ThisKeyword 78 83\n--------------------------- DotToken 83 84\n--------------------------- Identifier 84 87\n------------------------ SemicolonToken 87 88\n------------------ CloseBraceToken 88 94\n--------- CloseBraceToken 94 96\n--- EndOfFileToken 96 96\n```\n\n那么看看应用, 之前我写过 [plantUML的使用](http://gongbaodd.github.io/fe/2017/12/20/plantUML.html),\n正好可以试一下看看能不能自动生成类图.\n\n```typescript\nimport { readFileSync } from \"fs\";\nimport * as ts from \"typescript\";\n\nexport function uml(src: ts.SourceFile) {\n    const classMap = {};\n    analyseNode(src);\n    console.log(draw());\n\n    function analyseNode(node: ts.Node) {\n        if (node.kind === ts.SyntaxKind.ClassDeclaration) {\n            const cls = {};\n            node.forEachChild(n => {\n                if (n.kind === ts.SyntaxKind.Identifier) {\n                    classMap[n.getText()] = cls;\n                }\n                if (n.kind === ts.SyntaxKind.PropertyDeclaration) {\n                    n.forEachChild(i => {\n                        if (i.kind === ts.SyntaxKind.Identifier) {\n                            cls[i.getText()] = \"var\";\n                        }\n                    });\n                }\n                if (n.kind === ts.SyntaxKind.MethodDeclaration) {\n                    n.forEachChild(i => {\n                        if (i.kind === ts.SyntaxKind.Identifier) {\n                            cls[i.getText()] = \"function\";\n                        }\n                    })\n                }\n            });\n        }\n        node.forEachChild(analyseNode);\n    }\n\n    function draw() {\n        const tpl = `\n@startuml\n#\n@enduml\n        `.trim();\n        let str = \"\";\n\n        Object.keys(classMap).forEach(className => {\n            const classItems = classMap[className];\n            str += `class ${className} {\\n`;\n            Object.keys(classItems).forEach(i => {\n                str += `${classItems[i]} ${i}\\n`;\n            });\n            str += \"}\\n\";\n        });\n\n        return tpl.replace(\"#\", str);\n    }\n}\n\n\nconst file = process.argv.slice(2);\nfile.forEach(f => {\n    const src = ts.createSourceFile(f, readFileSync(f).toString(), ts.ScriptTarget.ES2016, true);\n    uml(src);\n})\n\n```\n\n\n```plantuml\n@startuml\nclass A {\nvar num\nfunction getNumber\n}\n\n@enduml\n```","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/01/04/win10.md","slug":"2018/01/04/win10","body":"\n# win10 家庭版打开组策略\n\n无非是把 pro 版的组策略安装进来就好了\n\n```batch\npushd \"%~dp0\"\ndir /b C:\\Windows\\servicing\\Packages\\Microsoft-Windows-GroupPolicy-ClientExtensions-Package~3*.mum >List.txt\ndir /b C:\\Windows\\servicing\\Packages\\Microsoft-Windows-GroupPolicy-ClientTools-Package~3*.mum >>List.txt\nfor /f %%i in ('findstr /i . List.txt 2^>nul') do dism /online /norestart /add-package:\"C:\\Windows\\servicing\\Packages\\%%i\"\n\n作者：知乎用户\n链接：https://www.zhihu.com/question/53834660/answer/158108562\n来源：知乎\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n```\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/01/11/anko.md","slug":"2018/01/11/anko","body":"\n# 使用 anko 布局安卓应用\n\n## build.gradle 配置\n\n如[wiki](https://github.com/Kotlin/anko)修改两处\n\n```groovy\n// app(Module)\ndependencies {\n    implementation \"org.jetbrains.anko:anko:$anko_version\"\n    implementation \"org.jetbrains.anko:anko:$anko_version\"\n    implementation \"org.jetbrains.anko:anko-commons:$anko_version\"\n    implementation \"org.jetbrains.anko:anko-appcompat-v7:$anko_version\"\n    implementation \"org.jetbrains.anko:anko-recyclerview-v7:${anko_version}\"\n\n}\n```\n\n```groovy\n// app(Project)\nbuildscript {\n    ext.kotlin_version = '1.2.10'\n}\n```\n\n## 使用 ConstraintLayout\n\n修改 build\n\nhttps://github.com/AckeeCZ/anko-constraint-layout\n\n```groovy\ndependencies {\n    implementation 'com.android.support.constraint:constraint-layout:1.1.0-beta4'\n    implementation 'cz.ackee:anko-constraint-layout:0.6.5'\n}\n```\n\n## 如何使用\n\n```kotlin\nclass MainActivity: AppCompatActivity() {\n    override fun onCreate(savedInstanceState bundle?) {\n        super.onCreate(bundle)\n\n        verticalLayout {\n            val name = editText()\n            button(\"sayHello\") {\n                onClick { ctx.toast(\"Hello, ${name.text}\") }\n            }\n        }\n    }\n}\n```\n\n## 缺点\n\nanko 里面除了简单的布局有 DSL 其它的需要去找(毕竟不是官方的)用起来还真不是特别方便\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/01/24/30-kotlin.md","slug":"2018/01/24/30-kotlin","body":"# 完成了30个kotlin安卓挑战\n\n去年逛IT邦看到了关于Kotlin的铁人赛，30个安卓demo．毕竟不是我的原创，这里贴上原地址\n\nhttps://ithelp.ithome.com.tw/users/20107329/ironman/1286\n\n再贴上我的代码地址\n\nhttp://gongbushang.com:3000/gongbushang/kotlinPlayground\n\n## 我的测试机\n\n说来我的测试机，可是我当年拿实习工资买的魅蓝，后来跑步摔碎了，现在打开更新下居然还能用，也是奇迹了．\n\n![](https://wx2.sinaimg.cn/mw690/89d0a2e1ly1fnt8xpefslj20qo0zkwin.jpg)\n\n## 01TapCounter\n\n最简单的计数器\n\nKotlin 的 lamda 表达式的使用,\n使用 kotlin 的一个好处，\n获取 button 或者 textEdit 之类的组件不需要使用 findViewById 了\n\n```kotlin\nthis.tapButton.setOnClickListener {\n    currentNumber += 1\n    numberTextView.text = currentNumber.toString()\n}\n```\n\n## 02seekBarPercentage\n\nprogressBar 的使用\n\n## 03ImgePicker\n\n获取相机\n\n```kotlin\nval intent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)\n\nstartActivityForResult(intent, ACTION_CAMERA_REQUEST_CODE)\n```\n\n获取相册\n\n```kotlin\nval intent = Intent(Intent.ACTION_PICK)\nintent.type = \"image/*\"\nstartActivityForResult(intent, ACTION_ALBUM_REQUEST_CODE)\n```\n\n## 04ScalableImageView\n\n自定义一个 ImageView\n\n## 05WebSearch\n\nwebView\n\n```kotlin\nwebview.webViewClient = webViewClient\nwebview.loadUrl(\"https://www.bing.com\")\n```\n\n## 06ImageList\n\nfragment 的高度要固定\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<android.support.constraint.ConstraintLayout\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"260dp\">\n</android.support.constraint.ConstraintLayout>\n```\n\n## 07MyLocation\n\n没法用谷歌地图, 改用高德地图, 主要还是要很多权限\n\n```xml\n\n    <!--允许程序打开网络套接字-->\n    <uses-permission android:name=\"android.permission.INTERNET\" />\n    <!--允许程序设置内置sd卡的写权限-->\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\n    <!--允许程序获取网络状态-->\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\n    <!--允许程序访问WiFi网络信息-->\n    <uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" />\n    <!--允许程序读写手机状态和身份-->\n    <uses-permission android:name=\"android.permission.READ_PHONE_STATE\" />\n    <!--允许程序访问CellID或WiFi热点来获取粗略的位置-->\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\"/>\n```\n\n## 08BottomNavigation\n\n没啥意思就是底部导航栏\n\n## 09ImageSlider\n\nImageSlider的使用\n\n## 10ProgressControl\n\n控制 progressBar\n\n## 11ActivitySchedule\n\n日期弹框\n\n```kotlin\n  DatePickerDialog(\n                    this,\n                    DatePickerDialog.OnDateSetListener { _, year, month, date ->\n                        cal.set(Calendar.YEAR, year)\n                        cal.set(Calendar.MONTH, month)\n                        cal.set(Calendar.DATE, date)\n\n                        val time = SimpleDateFormat(\"yyyy-MM-dd\", Locale.CHINA)\n                        dateTextView.text = time.format(cal.time)\n                    },\n                    cal.get(Calendar.YEAR),\n                    cal.get(Calendar.MONTH),\n                    cal.get(Calendar.DATE)\n            ).show()\n```\n\n时间弹框\n\n```kotlin\nTimePickerDialog(\n                    this,\n                    TimePickerDialog.OnTimeSetListener { _, hour, minute ->\n                        cal.set(Calendar.HOUR_OF_DAY, hour)\n                        cal.set(Calendar.MINUTE, minute)\n\n                        val time = SimpleDateFormat(\"HH:mm\", Locale.CHINA)\n                        timeTextView.text = time.format(cal.time)\n                    },\n                    cal.get(Calendar.HOUR_OF_DAY),\n                    cal.get(Calendar.MINUTE),\n                    true\n            ).show()\n```\n\n## 12GitHubStars\n\nOkHttpClient\n\n```kotlin\nval client = OkHttpClient()\n            val request = Request.Builder()\n                    .url(\"https://api.github.com/users/$username/starred\")\n                    .build()\n\n            client.newCall(request).enqueue(object: Callback {\n                override fun onFailure(call: Call?, e: IOException?) {\n                    Toast.makeText(this@MainActivity, \"get data failed\", Toast.LENGTH_SHORT).show()\n                }\n\n                override fun onResponse(call: Call?, response: Response?) {}\n            })\n```\n\n## 13LocalStorage\n\n存\n\n```kotlin\nval preference = PreferenceManager.getDefaultSharedPreferences(this)\n            val editor = preference.edit()\n            editor.putString(\"login_name\", name)\n            editor.apply()\n\n```\n\n取\n\n```kotlin\nval preference = PreferenceManager.getDefaultSharedPreferences(this)\n            val name = preference.getString(\"login_name\", \"\")\n            if (name.isEmpty()) {\n                Toast.makeText(this, \"name is empty\", Toast.LENGTH_SHORT).show()\n            }\n            nameTextView.text = name\n```\n\n## 14Ball\n\n```kotlin\nanimator = ObjectAnimator.ofFloat(imageView4, \"translationX\", 0f, 600f, 0f)\nanimator.duration = 1500\nanimator.interpolator = AccelerateInterpolator()\nanimator.start()\n```\n\n## 15Notification\n\n其实大部分API魅族都给砍了,所以加title啥的就没有必要了\n\n```kotlin\nval notify = NotificationCompat.Builder(this, \"channel id test\")\n                    .setSmallIcon(R.drawable.img)\n                    .setLargeIcon(BitmapFactory.decodeResource(resources, R.drawable.img))\n                    .setContentTitle(\"Notification\")\n                    .setContentText(\"It's time\")\n                    .setVibrate(longArrayOf(300, 600, 300, 600))\n                    .setLights(Color.RED, 1000, 1000)\n                    .build()\n            val noticeManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager\n            noticeManager.notify(1, notify)\n```\n\n## 16PushMessaging\n\n```kotlin\nval intent = Intent(\"gongMsg\")\nintent.putExtra(\"message\", text)\nbroadcast.sendBroadcast(intent)\n```\n\n## 17PullToRequest\n\nfragment记得加高度\n\n## 18SideMenu\n\n安卓常见的左滑目录\n\n## 19Sound\n\n音乐播放器,还是用默认的style吧,换一个卡得不行\n\n## 20ActivityTransition\n\nActivity转场动画\n\n## 21LayoutSwitcher\n\nGrid布局变化\n\n## 22LocalDatabase\n\n本地的SQL\n\n## 23speech\n\nTTS, 魅族居然不支持\n\n## 24Painter\n\nCanvas\n\n## 25Face\n\n人脸检测, 但是并没检测出来我\n\n## 26ActionRecieve - ActionSend\n\n```kotlin\nval intent = Intent()\nintent.action = Intent.ACTION_SEND\nintent.putExtra(Intent.EXTRA_TEXT, textEdit.text.toString())\nintent.type = \"text/plain\"\nstartActivity(intent)\n```\n\n接受的时候 intentfilter 需要加入\n\n```kotlin\n<action android:name=\"android.intent.action.SEND\" />\n<category android:name=\"android.intent.category.DEFAULT\" />\n<data android:mimeType=\"text/plain\" />\n```\n\n## 27ShakeIt\n\n摇一摇\n\n## 28Tabs\n\n顶部 tab\n\n## 29Floats\n\n自定义悬浮框 和 右下角悬浮按键\n\n## 30Video\n\n和播放器其实类似\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/01/28/18-1.md","slug":"2018/01/28/18-1","body":"# 2018年１月总结\n\n一月结束了, 这个月完成了用 kotlin 写 30 个 APP, 小有成就.\n\n健身方面, 力推 Shaun T 的 Max 30, 第二月的课程简直是疯狂地流汗.\n\n二月就春节了, 小目标是做一套雅思的卷子, 背完雅思词汇, 结束 PixiJS 和 THREE.JS 项目.\n\n重新收拾一下主页, 新年新气象嘛\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/02/03/webpack-nestjs.md","slug":"2018/02/03/webpack-nestjs","body":"# Webpack + NestJS 全栈自动刷新\n\n> 本来想写热启动, 算了, 其实就是刷新了, 实事求是点好.\n\n去年我单位所有项目进入前后端同构的状态, 主要的工具是 NestJS 和 React,\n但还没有做过热启动, 反正开始重写主页了, 顺带着做一下.\n\n## NestJS 自动刷新\n\nNestJS 本身就利用 Nodemon 实现了文件修改后自动重启.\n\n```javascript\n{\n    \"watch\": [\n        \"src\"\n    ],\n    \"ext\": \"ts\",\n    \"ignore\": [\n        \"src/**/*.spec.ts\"\n    ],\n    \"exec\": \"node ./dev/index\"\n}\n```\n\n利用 ts-node 开发速度也比编译后再开发快很多\n\n## NestJS 无缝使用 Express\n\nNestJS 虽然基于 Express, 但是语法和 Express 区别很大, 好在可以直接把 Express 的实例作为子类使用\n\n```typescript\nasync function bootstrap() {\n    const instance = express();\n    instance.use(morgan(\"short\")); // 一个日志中间件\n    const app = await NestFactory.create(\n        ApplicationModule,\n        instance,\n    );\n    await app.listen(8080);\n}\n```\n\n## Webpack 自动刷新\n\nwebpack 自动更新, 简单地说就是用 webpackDevMiddleware 代替 express.static.\n\n先给js里面加上webpack-hot-middleware/client, 这里偷下懒, 每次 index.tsx 更新后页面都会重启.\n\n```javascript\n// webpack.config.js\nmodule.exports = {\n    entry: [\n        \"./src/public/index.tsx\",\n        \"./node_modules/webpack-hot-middleware/client.js?reload=true\"\n    ],\n    output: {\n        path: path.resolve(__dirname, \"./dist/public/\"),\n        filename: \"index.js\",\n        publicPath: \"/public\"\n    },\n}\n```\n\nserver 部分, 要把 express.static 注释掉\n\n```typescript\nconst webpackConfig: webpack.Configuration = webpackRawConfig as any;\nconst webpackCompiler = webpack(webpackConfig);\nconst webpackDevConfig: webpackDevMiddleware.Options = {\n    publicPath: webpackConfig.output.publicPath,\n};\n\ninstance.use(webpackDevMiddleware(webpackCompiler, webpackDevConfig));\ninstance.use(webpackHotMiddleware(webpackCompiler));\n```\n\n***nodemon 别加 tsx, 编译起来真的很慢***","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/06/TexturePacker.md","slug":"2018/02/06/texturepacker","body":"# 用 TexturePacker 做雪碧图\n\n在 setting 里面选择格式, 如 PixiJS, 然后点击 Publish Sprite Sheet 会生成对应的 png 和 json","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/07/Webpack.md","slug":"2018/02/07/webpack","body":"# webpack 前端热更新\n\nWebpack仅仅实现前端热更新要比前后端同构简单得多, sourceMap 是必须加的, 用来判断哪些文件更新.\n\n```typescript\n// webpack.config.ts\nimport * as webpack from \"webpack\";\nimport * as path from \"path\";\n\nconst config: webpack.Configuration = {\n    entry: [\n        \"./src/index.tsx\",\n    ],\n    output: {\n        path: path.resolve(__dirname, \"./public\"),\n        filename: \"index.js\",\n        publicPath: \"/public/\",\n    },\n    module: {\n        loaders: [\n            {\n                test: /\\.tsx?$/,\n                loader: \"ts-loader\",\n                exclude: /node_modules/\n            }\n        ]\n    },\n    devtool: \"source-map\",\n    devServer: {\n        hot: true,\n    },\n    plugins: [\n        new webpack.NamedModulesPlugin(),\n        new webpack.HotModuleReplacementPlugin(),\n    ]\n}\n\nexport default config;\n```","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/08/PreactCSSTransation.md","slug":"2018/02/08/preactcsstransation","body":"# PreactCSSTransation 的使用\n\n项目地址 http://gongbushang.com:3000/gongbushang/animateCSSplayground\n\n## 结合 animate.css\n\n## 结合 preact-router\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/09/About-innovation.md","slug":"2018/02/09/about-innovation","body":"# 关于创新\n\n创新真的很难，踏花归来马蹄急，王希孟能在马蹄上画飞蝶，换做别人指不定要熏香了。\n\n前一阵子，我看到了一个html5实现印章的视频，猜想是forcetouch还是什么新的API，比如能获取到受力面的功能，翻了MDN并没找到什么新API，结果这个例子是拿多点触控实现的。好主意啊，哪怕是只有两点就可以对应到无数个图章了，何况现有设备真的不止两点触控。\n我又想到了任天堂新出的labo，谁也不知道它会拿一堆破纸壳对付别家的精密仪器。\n\n其实，并不是说研发新的设备或者方法，“革”老习惯的命就不是创新了，可是如果能利用现有资源做的创新可比那些革命者灵气多了","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/02/10/FontAwesome-5.md","slug":"2018/02/10/fontawesome-5","body":"# FontAwesome出5啦\n\nQunar的很多图片都是用iconfont实现的,\n我们有一套类似于fontawesome网站的[yicon](https://yicon.ymfe.org),\n\n然而当初构建的时候,对于使用iconfont还是svg是很受争议的.\n其结果自然iconfont胜出,而那时我见识到了svg对于制作模块化图标,\n甚至是动画图标的潜力(SMIL,很遗憾后来为了CSS3,这一功能基本上无人问津了)\n,这些对于svg唯一的缺点就是兼容性了.\n\n看到FontAwesome的第5个版本推荐使用svg, 马上拿过来试试.\n\n[参考代码](http://gongbushang.com:3000/gongbushang/fontAweSome5Playground)\n\n## 官方的React组件\n\n当然也有Vue的, 安装 @fortawesome/fontawesome @fortawesome/fontawesome-free-solid @fortawesome/react-fontawesome \n(0.1.0-3以上有d.ts说明)\n\n利用 create-react-app 快速建立工程\n\n```shell\nnpx create-react-app awesome --scripts-version=react-scripts-ts\n```\n\n```JSX\n<FontAwesomeIcon icon={faCoffee}/>\n```\n\n直接使用,非常简单\n\n## 新功能:变形\n\n比如放大(grow)或者缩小(shrink),\n后面的数字的单位是 1/16em.\n\n```JSX\n<FontAwesomeIcon\n    {...{\n        icon: faCoffee,\n        border: true,\n        fixedWidth: true,\n        transform: \"shrink-8\",\n    }}\n/>\n```\n\n上(up) 下(down) 左(left) 右(right)\n垂直翻转(flip-v) 水平翻转(flip-h) \n旋转(rotate) \n\n## 新功能:遮罩\n\n```JSX\n<Font\n    {...{\n        icon: faCoffee,\n        border: true,\n        fixedWidth: true,\n        transform: \"shrink-8\",\n        mask: faSquare,\n    }}\n/>\n```\n\n## 新功能:图层\n\n两个图标层叠\n\n```JSX\n        <span className=\"fa-layers fa-fw fa-border\">\n          <Font\n            {...{\n              icon: faCircle,\n            }}\n          />\n          <Font\n            {...{\n              icon: faCoffee,\n              transform: \"shrink-7\",\n              style: {\n                color: \"#fff\"\n              }\n            }}\n          />\n        </span>\n```\n\n图标添加数字角标,默认右上(指定位置: fa-layers-${bottom|top}-${left|right}).\n\n```JSX\n        <span className=\"fa-layers fa-fw\">\n          <Font\n            {...{\n              icon: faAlignJustify,\n            }}\n          />\n          <span className=\"fa-layers-counter\">1111</span>\n        </span>\n```\n\n叠加文字\n\n```JSX\n        <span className=\"fa-layers fa-fw\">\n          <Font\n            {...{\n              icon: faSquare,\n            }}\n          />\n          <span\n            {...{\n              className: \"fa-layers-text\",\n              style: {\n                color: \"#fff\"\n              }\n            }}\n          >\n          e\n          </span>\n        </span>\n```\n\n## 总结\n\nFontAwesome 总的来看,不考虑兼容性的话的确可以使用,\n而且随着emoji的推广, Material Design等各种设计模式的诞生,\n彩色的可模块化的图标方案会逐渐替代现有的单色图标.\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/14/Valentine's-Day-for-you-some-color-to-see.md","slug":"2018/02/14/valentines-day-for-you-some-color-to-see","body":"# 情人节给你点颜色看看\n\n![示例代码](http://gongbushang.com:3000/gongbushang/pixijsPlayground/src/master/src/12-hsl_hsv.ts)\n\nCMYK用于打印, RGB用于显示屏, 然而二者都不能直观的展示颜色, 于是有了 HSL 和 HSV 坐标系.\n\n## 简介\n\n今天看看HSL和HSV转化RGB, [维基地址](https://zh.wikipedia.org/wiki/HSL%E5%92%8CHSV%E8%89%B2%E5%BD%A9%E7%A9%BA%E9%97%B4).\n\n![HSL与HSV](https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/HSL_HSV_cylinder_color_solid_comparison.png/800px-HSL_HSV_cylinder_color_solid_comparison.png)\n\n* H 指的是 hue 色相 [0-360]\n* S 指的是 saturation 饱和度 [0-1]\n* V 指的是 value 明度 [0-1]\n* L 指的是 light 亮度 [0-1]\n\n## HSV转换RGB\n\nHSL转换RGB有点烦(我认为是这样的), 维基里面有详细的解释, HSV到比较简单\n\n```typescript\n/**\n * hsv2rgb\n * @param {number} h hue 色相 [0, 360]\n * @param {number} s saturation 饱和度 [0, 1]\n * @param {number} v value 明度 [0, 1]\n * @returns [r, g, b] 分别取值 [0, 255]\n */\nfunction hsv2rgb(\n    h: number,\n    s: number,\n    v: number,\n) {\n    // 色相\n    while(h < 0) {\n        h += 360;\n    }\n    h = h % 360;\n    // 饱和度\n    s = s < 0? 0: s > 1? 1: s;\n    // 明度\n    v = (v < 0? 0: v > 1? 1: v)*255;\n\n    let hi = (h/60|0)%6;\n    let f = h/60 - hi;\n    let p = v*(1-s) | 0;\n    let q = v*(1-f*s) | 0;\n    let t = v*(1-(1-f)*s) | 0;\n    v |= 0;\n    switch (hi) {\n        case 0: return [v, t, p];\n        case 1: return [q, v, p];\n        case 2: return [p, v, t];\n        case 3: return [p, q, v];\n        case 4: return [t, p, v];\n        case 5: return [v, p, q];\n    }\n}\n```\n\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/17/Two-forbidden-books.md","slug":"2018/02/17/two-forbidden-books","body":"# 两本禁书\n\n这两个月看了两本政治幻想的书，＜建丰二年＞＜黄祸＞．\n去年我就看了本＜巨婴国＞，感觉是为了赢噱头才自称是禁书的．\n这两本则不同，第一本假想解放战争失败，另一本假想六四平反．\n\n## 建丰二年\n\n感觉出名就在这本书的设定上了，不论是情节还是文采，真心一般．\n而且读了一半就感觉作者无法驾驭得了这个设定．弃～\n\n## 黄祸\n\n这本可比前者好看得多，作者的文采和情节确实吸引人．\n作为一个后人重看作者９０年代的寓言，就好像看推背图一样．\n感觉作者过分着重六四了，虽然带入感很强，\n可我总觉得那个平行宇宙也不会总拿一件事来回讲（毕竟作者序里面没说这是部给六四平反的小说）．\n\n## 总结\n\n所以禁书被禁不管是处于啥原因，这年头想出来本＜石头记＞，太难了．\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/02/19/PixiJS.md","slug":"2018/02/19/pixijs","body":"# 春节的PixiJS试炼\n\n[代码地址](http://gongbushang.com:3000/gongbushang/pixijsPlayground)\n\n1. 展示雪碧图\n\n2. 容器 Container\n\n3. 图形 Graphics\n\n4. 遮罩 Mask\n\n5. 动画 Ticker\n\n6. 文字\n\n7. 动态图\n\n8. 交互\n\n9. 自适应\n\n10. datGUI\n\n11. 上色\n\n12. HSV、HSL色彩空间\n\n13. 混合模式 blend\n\n14. 材质 texture\n\n15. 滤镜 filter\n\n16. 骨骼 snake\n\n17. 骨骼 goblin\n\n18. 粒子 particles\n\n19. 实例一 滚动的圆\n\n20. 实例二 万花筒\n\n另外还想做两个 [万花尺](https://ithelp.ithome.com.tw/articles/10195023)、[印章](https://ithelp.ithome.com.tw/articles/10195375) ，\n感觉和试炼关系不大以后补充。","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/02/25/About.md","slug":"2018/02/25/about","body":"# 关于姥姥\n\n按理说，作为被春节剥夺了一天的周末，我希望这一天能平平静静地度过。\n然而，这一天的信息量远远超过了一个普通的周末。\n别提刷爆朋友圈的取消任期制的政事了，今天我收到了姥姥去世的消息。\n\n---\n\n我出生以来，家里的老人只有一个人，就是姥姥。小的时候，爸妈工作晚，我都是住在姥姥家，每天和表哥表姐一起玩，等到晚上妈妈会接我回家。\n\n我可能并不是姥姥最宠的，至少我曾这么想过。\n印象最深的往事，是一天夜里我拽着我妈往家走，\n边走边喊着要把姥姥家的大锅砸穿。\n我不记得是因为什么，我只记得哥儿仨最皮的肯定不是我，\n但挨打的总有我。\n这件事之所以难忘，还是因为这件事成了每年春节饭桌上大家必提的项目。\n\n跟姥姥有关的记忆基本上和吃有关，\n除了大锅，还有地窖。老时候大连家住一楼的都有个地窖，\n小时候的我进一次地窖的感觉简直鬼吹灯一样的惊险刺激。\n后来地窖被扒了，上面种了无花果树，\n这树被她形容的简直是包治百病，不过这树还真治好了我腿上的瘊子。\n\n姥姥六十大寿的时候，我隐约听到有人说她属虎，难怪了，那么凶，\n谁见了她都敬她三分。\n那时候，姥姥家就像丛林之王的家一样，人丁兴旺，\n有吃不完的饼干和煎饼。\n\n---\n\n后来我上学了，因为在学校附近，中午我会跑去姥姥家蹭饭，\n姥姥家的碗跟脸一样大，就现在来看我真不知道我是怎么吃完那么多饭的。\n\n我的胳膊骨折过一次，挂着绷带的我还得值日，\n那天中午我因为值日回去的晚了些，她察觉到了，\n竟然跑到学校里跟我抢拖布，吓得我的同学都叫她大老虎。\n\n姥姥的关心随着我的日渐疏远而加重，\n每次见到姥姥，她常说的话是“宫健喜欢画画，\n我去银行换了很多一块钱给你坐车上课用”。\n\n后来，随着大姨和大舅一一地去了，\n姥姥家也没有了往日的热闹，\n我听妈妈说姥姥曾哭着给大夫下跪。\n我还从没见过大老虎哭过呢。\n\n---\n\n姥姥和小舅搬到很远的地方了，要一个小时车程，我也再也没有往那些矮矮的赫鲁晓夫楼那里去了，那些童年里融化了的雪人，吹散了的冰花，冻炸的暖气管子，炸飞的可乐瓶子都随着他们搬去了远方。\n\n再见到姥姥的日子，屈指可数，姥姥不跟我们在一个桌子吃饭了，\n可能是觉得桌子小吧。她总是开着电视坐着，坐着坐着就睡着了，\n你要是关了电视她还总能醒过来。\n\n有一年我拿来我到全国各地旅游的照片，我想告诉她，虽然我不能带她去各种地方玩，但我可以把各种地方带给她看，可似乎她并不感兴趣，她关心的和很多中国老人一样，我什么时候搞对象。\n\n前年过年我去姥姥家探望，貌似已经没了年的感觉，中午只是煮了两碗挂面，她带我去看家里的相册，告诉我以前的老邻居谁又去了，基本上和往年一样，她会指着大舅的照片说我和他有多像。话中带有些许哽咽，时而会抬起头静静地盯着没人的方向，一句话也不说。\n\n一代人的芳华，面目全非，即使照片里面笑容依旧，却更显得岁月的无情。\n\n---\n\n每个节日我都会给姥姥打电话，她的嗓音一如丛林之王般洪亮，\n丝毫没有病态。去年中旬，我时常会梦到老房子，有几次我梦到姥姥带着煎饼和饼干来到我北京的房子，说想来见我。我以为是工作压力太大不以为然。\n\n到了去年十一，爸妈才跟我说，姥姥已经是癌症晚期，家人瞒了她很久，爸妈叮嘱我不要急忙回来，怕姥姥会往坏的地方想。\n\n今年元旦，姥姥用老爸的手机第一次和我视频，依然是老虎一般的嗓音，像个小女生照镜子一样端详着小窗里的自己，脸色也比我爸妈形容的好很多。我心想，人活八十了怎么不会遇点坎，况且大老虎发威了，鬼见到也要发抖的啊。\n\n今年春节，很多时间是在姥姥家过的。姥姥瘫坐在床上，像一只病了的老虎。爸爸告诉我她已经不认人了，可我并不这么认为，因当我跟她说我明年就带对象过来的时候，她脸上不屑的表情兼职和往年如出一辙。\n\n刚和爸妈通完话，姥姥初八去世了，明天就火化。\n我不知如何解释我的心情，相比于悲伤，更像是解脱。\n解脱了这一年的猜忌、误会甚至是争吵，\n就像当年带走我的童年一样，这一切都随着她而离去了。\n\n![唯一的一次视频](http://ww1.sinaimg.cn/small/89d0a2e1ly1fot70eiqgoj20u01hct9u.jpg)\n\n---\n\n借CoCo的一段影评。\n\n> 死亡不是永别，忘记才是。有人记得你，你心里也仍有牵挂，这便是生活莫大的幸福和意义。\n\n斯人已去，此情长存。\n\n![斯人已去，此情长存](http://ww1.sinaimg.cn/large/89d0a2e1ly1fot4xsuvysj20u00u0gn4.jpg)\n\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/02/27/Git.md","slug":"2018/02/27/git","body":"# Git保存账户\n\n用 Git 保存账户名和密码\n\n```shell\ngit config credential.help store\n```\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/03/04/18.md","slug":"2018/03/04/18","body":"\n# 18 年二月总结\n\n不知不觉二月结束了，20%已经结束了！！！\n\n## 读书\n\n这个月完成了《雅思词汇》红宝书，只能说词汇联想法脑洞太大，三月必须做模拟卷了，不然就晚了。\n\n## 健身\n\n天气暖和了，可以出去跑步了。\n\n## 技术\n\n完成了 PixiJS 的试炼，三月准备开始 BabylonJS 试炼，代替 ThreeJS 试炼。\n\n## 神器\n\ntoggl.com 是一个时间管理工具，每做一件事，只要点一下开始，做完了点一下结束。\n最后可以统计出来每件事占用的时长。这个应用全平台支持，非常符合我的需求。\n\n## 小结\n\n二月信息量很大，我被迫改了合同，春节送走了姥姥，任期制要被删掉，老同学来了，我打算走了。\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/03/20/I-am-bored.md","slug":"2018/03/20/i-am-bored","body":"# 好无聊\n\n最近工作很忙、还要雅思考试、还感冒了，真是心力俱疲。\n\n![lena](http://ww1.sinaimg.cn/large/89d0a2e1ly1fpjg5b5wc7j20e80e812x.jpg)\n\n但是这些都是打不到我的！！！！\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/04/01/March-summary.md","slug":"2018/04/01/march-summary","body":"\n# 三月总结\n\n## 雅思考试\n\n算是个模拟吧，总之从头至尾很尴尬，估计分数不高，反正有机会今年还会再考。\n\n## 纹身\n\n最后选择了黑色孤儿 Cosima 的鹦鹉螺纹，纹了 1 个小时，800 就这么交代了。。。\n\n## 读书\n\n因为大部分时间在准备雅思（其实就是为雅思忐忑），这个月也就考完试看了点书，《黑客与画家》英文版正在啃。\n\n## 音乐\n\n练了 Ukulele 的　 Riptide 和　 what's up，　口琴这两个谱子不是特别好听，考虑学一下千与千寻的主题曲\n\n## 四月\n\n人生四月天啊，打算这个月换手机，阔别了一年的游遍中国计划重新开启，这个月我会开始学习 aframeJS，同时偶尔复习下 pixiJS。这个月我会打算做一个简单的绑卡实践，公司的进度实在太慢了～。\n\n## 最后\n\n愚人节快乐～\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/04/09/GraphQL.md","slug":"2018/04/09/graphql","body":"# GraphQL的使用\n\n> you can find the code in http://gongbushang.com:3000/gongbushang/graphql_starter","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/04/10/Archlinux-VScode.md","slug":"2018/04/10/archlinux-vscode","body":"# ArchLinux 修改 VScode 可监视文件大小\n\nhttps://github.com/guard/listen/wiki/Increasing-the-amount-of-inotify-watchers\n\n```shell\necho fs.inotify.max_user_watches=524288 | sudo tee /etc/sysctl.d/40-max-user-watches.conf && sudo sysctl --system\n```\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/04/15/Finally-pulling-the-preserved-egg-lean-meat-ravioli.md","slug":"2018/04/15/finally-pulling-the-preserved-egg-lean-meat-ravioli","body":"# 终于拔草了皮蛋瘦肉馄饨\n\n在安定门的满香馄饨，18块一碗。尝起来蛮像鲅鱼馄饨的，尤其是有蛋黄的那些，不算推荐，挺值得体验一下的。\n\n![](https://wx1.sinaimg.cn/mw1024/89d0a2e1ly1fqdfu611i2j20zk0qoq7k.jpg)\n\n![](https://wx2.sinaimg.cn/mw1024/89d0a2e1ly1fqdfu8i7c7j20qo0zkn17.jpg)\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/04/16/lego.md","slug":"2018/04/16/lego","body":"# lego系统一岁啦\n\n![logo](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqer3a0s0pj20sg0bk0wr.jpg)\n\n大概看了下去年的博客，我大概在五月初，对lego的第一次上线做了总结，那么现在大概就是lego的一周岁生日了。\n\n## lego 的定义\n\n![lego云图](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqemomvxyqj20sg0lcdo4.jpg)\n\n支付lego平台是一个支持多维度线上配置的web组件化前后端同构渲染平台，覆盖从服务端到web前端再到数据监控的整体解决方案，目前服务于去哪儿网会员的【我的钱包】【我的银行卡】【绑卡服务】【实名认证】等服务。\n\n## lego 搭建背景\n\n![ykit](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqem7mt787j20jc0fit9k.jpg)\n\n* 公司内部正在要求使用 ykit 代替 fekit 打包前端代码，对 fe/member-mobile 来说这种改动相当于全项目重构。\n\n```shell\nbusiTypeId=WLHotelHD&\ncouponAmount=300& bannerLink=http%3A%2F%2Fwww.qunar.com%2F& HMAC=362b0da8eb2f95cb33608cf4584c7700&\nagreement=&\ndid=865630020132708&\npid=10010&\nextraJson=&\ncardType=ALL& \nversion=20140808& title=%E7%BB%91%E5%8D%A1%E9%A2%86%E7%BA%A2%E5%8C%85&\nisObtainCoupon=1& \ncouponSource=pay_test& \nuserId=1444548113& \nsuccessURL=http%3A%2F%2Ftcbeta2.qunar.com%2Factivity%2Fspringgift%3Ftpl%3Dredirect%26couponId%3Dundefined& \ngid=8438932D-5548-D769-1AF7-22274CDE88E4&\nbindCardRule=%5B%22%E9%A6%96%E6%AC%A1%E7%BB%91%E5%8D%A1%E6%88%90%E5%8A%9F%EF%BC%8C%E4%B8%94%E8%AF%A5%E9%93%B6%E8%A1%8C%E5%8D%A1%E6%9C%AA%E5%9C%A8%E5%8E%BB%E5%93%AA%E5%84%BF%E7%BD%91%E7%BB%91%E5%AE%9A%E8%BF%87%E7%9A%84%E7%94%A8%E6%88%B7%EF%BC%8C%E5%8D%B3%E5%8F%AF%E8%8E%B7%E5%BE%97%E4%BC%9A%E5%91%98%E7%BA%A2%E5%8C%85%E3%80%82%22%2C%22%E6%AF%8F%E4%B8%AA%E7%94%A8%E6%88%B7%E5%8F%AA%E5%8F%AF%E7%BB%91%E5%8D%A1%E9%A2%86%E5%8F%96%E4%B8%80%E6%AC%A1%E4%BC%9A%E5%91%98%E7%BA%A2%E5%8C%85%E3%80%82%22%2C%22%E6%B4%BB%E5%8A%A8%E4%B8%AD%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%87%BA%E7%8E%B0%E4%BD%9C%E5%BC%8A%E8%A1%8C%E4%B8%BA%EF%BC%88%E5%A6%82%E6%89%B9%E9%87%8F%E6%B3%A8%E5%86%8C%E3%80%81%E6%81%B6%E6%84%8F%E8%B4%AD%E4%B9%B0%E3%80%81%E8%99%9A%E5%81%87%E4%BA%A4%E6%98%93%E7%AD%89%EF%BC%89%EF%BC%8C%E5%8E%BB%E5%93%AA%E5%84%BF%E7%BD%91%E5%B0%86%E8%87%AA%E5%8A%A8%E5%8F%96%E6%B6%88%E6%82%A8%E6%9C%AC%E6%AC%A1%E6%B4%BB%E5%8A%A8%E8%AE%A2%E5%8D%95%EF%BC%8C%E5%B9%B6%E6%9C%89%E6%9D%83%E5%86%BB%E7%BB%93%E8%B4%A6%E5%8F%B7%E5%B9%B6%E5%8F%96%E6%B6%88%E6%82%A8%E5%90%8E%E7%BB%AD%E5%8F%82%E4%B8%8E%E5%8E%BB%E5%93%AA%E5%84%BF%E7%BD%91%E4%BB%BB%E6%84%8F%E6%B4%BB%E5%8A%A8%E7%9A%84%E6%9D%83%E5%88%A9%EF%BC%8C%E5%BF%85%E8%A6%81%E6%97%B6%E8%BF%BD%E7%A9%B6%E6%B3%95%E5%BE%8B%E8%B4%A3%E4%BB%BB%E3%80%82%22%5D& \nvid=60001092&\nmerchantCode=WLHotelHDJK001&\nreturnURL=https%3A%2F%2Fmembermobilebetak.qunar.com%2Fm%2Fmember%2Fasset%2Fcoupon%2Fdetail.html& bindCardSource=coupon_bind& banner=https%3A%2F%2Fsource.qunarzz.com%2Fsite%2Fimages%2Fzhuanti%2Fhuodong%2Fflight_free_banner.jpg\n```\n\n* member-mobile 内部已经有根据传递参数配置页面展示的方法，但是很多参数相对于来源是静态的，同时如果需要增加新参数或者新来源的时候需要前后端介入开发，大概会需要 2~3pd。\n\n![使用的工具](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqeqvbrmjvj20sg0lc77v.jpg)\n\n* 前端以及node的一系列框架工具逐渐成熟，足以制作类似于lego的渲染系统。\n\n* 公司的 QConfig 支持 JSON 类型的配置文件，并且已经可以在 node 端使用。\n\n## 编程语言的选择\n\n![Typescript](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqeowo5o6jj20gx0gxwf6.jpg)\n\nmember-mobile 为了保证浏览器兼容性用的是 ES5，然而更多的代码库使用的是 ES6 编写，使用的时候再编译成 ES5。但是，无论 ES5 还是 ES6 都是动态类型 JS，无法对代码进行类型检查。\n\n至于关于 typescript 的好处，我不在此多余阐述，可以参考我过去的记次分享 \n\n[typescript干货](http://gongbaodd.github.io/fe/2017/05/04/1TypeScript%E5%B9%B2%E8%B4%A7.html) \n\n[Typescript sucks but long live the types\n](http://gongbaodd.github.io/fe/2017/09/18/Typescript-sucks-but-long-live-the-types.html) 。\n\n[TypeScript编译抽象语法树](http://gongbaodd.github.io/fe/2018/01/03/typescript%E7%BC%96%E8%AF%91AST%E8%AE%AD%E7%BB%83.html)\n\n## 架构设计\n\n![架构设计](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqeqvsivq4j20sg0lcaee.jpg)\n\nlego 参考了公司内普遍使用的增加一层 node 层作为渲染层的方案，然而工程上利用 webpack 可以分别打包以及 js 可以在双端运行的特性，实现了前后端同构方案，这样再开放上无需在 node 层增加开发人员，具体的实现请参考[【erʌpt】一个前后端同构的设计思想](http://gongbaodd.github.io/fe/2017/08/15/Er%CA%8Cpt-%E4%B8%80%E4%B8%AA%E5%89%8D%E5%90%8E%E7%AB%AF%E5%90%8C%E6%9E%84%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3.html)。\n\n### Qxf 作为 node 服务框架\n\nQxf 是 Qunar 的 node 服务框架，基于 Express，Express 也是目前被最广泛使用的框架。\n\n* q-version QZZ版本管理\n* q-logger 日志系统\n* q-exception 异常捕获\n* q-monitor 监控系统\n* q-healthcheck 响应Ngix请求\n\nQxf 包含的模块使得 lego 在搭建初期不需要重建轮子，节省了很多时间。同时因为其基于 Express,　更有利于搭建　restfull 接口。\n\n### Preact 作为同构渲染框架\n\n![Preact logo](https://opencollective-production.s3-us-west-1.amazonaws.com/3fd44c50-b42b-11e6-8e7e-5955bbcb143d.png)\n\nlego 使用 preact 作为前后端的渲染框架，preact 的包大小是 react 的 1/20，同时 preact 对 typescript 的支持是目前除 angular 外最好的框架。\n\n### 统一路由地址\n\nlego 在 node 端使用　preact-router 渲染路由路径，而在客户端结合　HashHistory 使得客户端无需刷新页面更新路由。\n\n```shell\n# node\n\n/bindCard/default/index\n\n# client\n\n/bindCard/defaut/index#/index/auth\n```\n\n### HTTP 连接\n\n起初 lego 使用的是 fetch 作为前后端接口交互框架，然而实际使用后我们全部改用了 Axios，主要原因有下。\n\n* Axios 双端完全兼容，只有部分参数不同。\n* Axios 支持超时，超时后可以 abort 不多于占用 socket。\n* Axios 可以配置中间件用来处理登录情况。\n\n## QConfig 配置\n\n在 QConfig 中，每一个项目都有自己的配置文件（JSON类型）\n\n![QConfig配置](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqer9g1ivej20lg0y0gnu.jpg)\n\n每个 JSON 文件都有一个 solutions 字段，里面是按照来源存放的配置文件，每次使用的时候配置文件会和 default 混合一次确保配置的完整性。\n\n![JSON](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqerbb3zwqj20ia0d6dgr.jpg)\n\n## Hybrid 桥\n\n用于 Qunar 端的 HYSDK 并没有完全适配公司的客户端，我们开发了 PayDevice 来补足短板\n\n```typescript\nclass PayDevice {\n    static readonly NAME_IOS_FIX: string;\n    static readonly NAME_IPX_FIX: string;\n    static readonly QUNAR_IPHONE: string;\n    static readonly QUNAR_APHONE: string;\n    static readonly GONGLUE: string;\n    static readonly FIX_NAV_IOS_HEIGHT: number;\n    static readonly FIX_NAV_IPX_HEIGHT: number;\n    static readonly FIX_STATUS_IOS_HEIGHT: number;\n    static readonly FIX_STATUS_IPX_HEIGHT: number;\n    static readonly FIX_BOTTOM_IPX_PAD: number;\n    private static readonly regularExp;\n    private static getLowerUA;\n    private static getMatchArray;\n    static getAppProtocol: typeof getAppProtocol;\n    static sniff: typeof sniff;\n    static isIPad: typeof isIPad;\n    static isIPod: typeof isIPod;\n    static isIPhone: typeof isIPhone;\n    static isCtripApp: typeof isCtripApp;\n    static isApp: typeof isApp;\n    static isAppIPhoneX: typeof isAppIPhoneX;\n    static isCtripAppIPhoneX: typeof isCtripAppIPhoneX;\n    static trim: typeof trim;\n    static getCookie: typeof getCookie;\n    static getQN270: typeof getQN270;\n    static getBodyFixClass: typeof getBodyFixClass;\n    static sniffmiddleware: typeof sniffmiddleware;\n}\n```\n\n## 监控系统\n\n我们修改了 Qxf 的 logger 和 monitor 以适配支付中心的鹰眼系统，更新　member-mobile 的 payGa 以接收前端埋点。\n\n## 支付组件库\n\n### PayUI\n\n我们经过和 UE 协调，利用 Yo 制作了一套 PayUI.css，可以直接作为支付中心样式使用。\n\n![PayUI](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqesxkdjt7j20c80a074u.jpg)\n\n### TS PAY COMS\n\n利用 payUI 制作的组件库，使用 rollup commonJS 打包，提供工厂方法构建。\n\n![TS PAY COMS](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqet3rrs2yj217c0uwwjt.jpg)\n\n```javascript\nexport const FormID = Factory.input(\n    Component, h, { CheckUtil, PayInput, PayList, MemICO },\n);\n\nexport const FormIDTlist = Factory.list(\n    Component, h, { FormID, CheckItem, PayPopup, PayList },\n);\n```\n\n## 打包系统优化\n\n![打包系统](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqes6t5852j21k60uy1kx.jpg)\n\n### typescript编译优化\n\n使用 HappyPack 分别使用３个线程处理前后端编译，利用 ForkTsCheckerWebpackPlugin 使用一个线程做类型检查，使用 cache-loder 缓存已编译的内容，减少重复编译时间。\n\n经过优化，ts 的编译时间减少到原来的 1/2。\n\n### CSS的优化\n\n#### 使用 PostCSS 逐步代替 Yo\n\nYo 的缺点\n\n* 使用 SASS 逐文件单线程编译，效率慢\n\n* 使用的是 SASS 语法，不是原生 CSS 语法，并只会对使用 Yo 语法的地方做浏览器兼容处理,没有编辑器支持\n\n```CSS\n/*** Yo 源代码 ***/\n.foo {\n    @include yoflex();\n}\n\n.bar {\n    display: flex;\n}\n```\n\n```CSS\n/*** 生成代码 ***/\n.foo {\n    display: -moz-flex;\n    display: -webkit-flex;\n    display: flex;\n}\n\n.bar {\n    display: flex;\n}\n```\n\n#### 使用 CSS-modules 避免全局类名覆盖\n\nCSS 一直存在很严重的类名覆盖问题，由于 CSS 的类名都存在于一个全局域中，当两个组件中存在重名类名，其中一个会被覆盖。\n\n```CSS\n/**a-button.css**/\n.button {\n    background: red;\n    background: blue;\n}\n/**b-button.css**/\n.button {\n    background: blue;\n}\n```\n\n使用 CSS-modules 后，编译好的 CSS 文件会处理掉重名类名。\n\n```CSS\n.button-a {\n    background: red;\n}\n.button-b {\n    background: blue;\n}\n```\n\n### 发布使用 node_cache_share 缓存 node_modules\n\n### 异步处理生成文件\n\n使用了以上优化，我们最终将编译速度由初期的五分钟优化到现在的26秒。\n\n## 过去一年遇到的问题\n\n* 大部分开发人员的水平仍然停留在13年左右，知道的优化方案相对过时，对于“枚举”、“泛型”、“私有成员”等定义都比较模糊。\n* 公司内部前端解决方案不统一，平台部门的解决方案往往在重复造轮子，到我们这里必须要修改后才能使用。\n* 很多人抵触学习新技术，往往是需要用的时候再去学习，当然对应的前端发展速度也前所未有的快。\n* 因为lego放弃了最初微服务的方案，杂糅很多业务逻辑后，现在功能比较臃肿，新功能的推广只能循序渐进。\n* 每次修改需要等待编译，开发起来比较慢。\n* restful API只是一个思想，还没有所谓的最佳实践，推广至开发人员后，一个接口的定义会跟开发人员的能力而显得参差不齐。\n\n## 解决方案\n\n* 【开发能力】增加技术分享，补足技术瓶颈\n* 【重复造轮子】我们建立了qtalk群，互相分享各部门的使用经验\n* 【强制代码规范】修改编译配置项阻止不规范的代码上线\n* 【减少冗余业务】和产品讨论，把没必要的业务逻辑删除\n* 【加快编译速度】打开多线程、缓存，使用 webpack-server 和 nodemon 处理本地开发环境\n* 【考虑新的传输协议】考虑使用 object-validator 或者 apollo + graphQL 实现。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/04/17/DevTools-Node.md","slug":"2018/04/17/devtools-node","body":"# DevTools 调试 Node 项目\n\n## 使用 DevTools\n\n```shell\nnode --inspect-brk index.js\n```\n\n要求 node 版本 8 以上，打开 chrome://inspect 之后可以点开 debugger 了， 默认断点是点开的（因为指定了brk）\n\n## 使用 0x 生成火焰图\n\n```shell\n0x index.js\n```\n\n生成的火焰图\n\ny轴表示调用栈位置，在上面表示正在执行，x表示抽样数，大致可以理解为时间。\n\n## 参考\n\n[How do I debug Node.js applications?](https://stackoverflow.com/questions/1911015/how-do-i-debug-node-js-applications/16512303#16512303)\n\n[如何读懂火焰图？](http://www.ruanyifeng.com/blog/2017/09/flame-graph.html)\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/04/18/Talk-about-unpopular,-human-puncture.md","slug":"2018/04/18/talk-about-unpopular-human-puncture","body":"# 讲讲冷门的，穿刺\n\n我身上有三处穿刺，两处乳丁，一个PA环。\n\n## 乳环\n\n期初是我的右侧乳头内陷，觉得裸起来不好看就穿了一个，遗憾的是并不好穿，所以拿左面做了下试验才穿的右面，但是穿的薄了，想扩到3mm的时候感觉就要断了，所以一直保持着1.8mm的钉。\n\n约的时候，我会换上2mm环，这样会撑得敏感点，不管是女孩还是男孩都会因为好奇舔这里，碰到舌技好的简直爽到不行。\n\n## PA环\n\n主要还是因为包皮有点长，平时龟头包着，做的时候龟头很敏感。我试了各种阻复环都不好使（二哥太能屈伸了），网上没有PA环怎么穿的指导，原因大家都懂，我买了1.6mm的工具自己研究了下大概的穿法。\n\n先把导管剪到需要的长度，穿进马眼，然后针从导管进入。\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqkbr9usptj218g0xc75c.jpg)\n\n我第一次穿失败了，又把针拔出来了，真的很疼，所以大家一定要注意。还有，龟头和包皮连着的地方叫系带，有人为了好看会把那部分割了，但是我没有，我从一边把针伸出来的，其实整体上看也没有歪（反正蛋蛋也不是对称长的）。\n\n穿的痛感真的很爽，我把根部绑住的，等穿完解开，精液直接就流出来了（羞羞）。\n\n出血很严重的，我的情况是直接从针管里喷。我是17号穿的，写到这儿21号，第一天一定会出血的，第二天勃起会出血，第三天就不会了，所以第二天出门不要看漂亮的小姐姐和小哥哥，血干了粘内裤上揭下来也很疼的。目前还不敢完全勃起，所以感觉好像比以前短了（哭）。不过包皮再也没卷回去过。\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/04/19/CSS-3D.md","slug":"2018/04/19/css-3d","body":"# 用CSS制作3D动画\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqi1sjijteg20np0dce82.gif)\n\n直到前几天，我需要做一个简单的3D动画时候，我才意识到其实我还没有用CSS做过3D动画。\n\n很多人其实认为只要写下\n\n```CSS\n.3d-Object {\n    transform: rotateY(180deg);\n}\n```\n\n但最终效果并不是三维的旋转，原因是它的父元素必须是一个有深度的盒子。\n\n```CSS\n.box {\n    perspective: 800px;\n}\n\n.box .3d-Object {\n    transform: rotateY(180deg);\n}\n```\n\n如果是希望旋转180度后不展示背面可以添加 backface-visibility。\n\n```CSS\n.box .3d-Object {\n    transform: rotateY(180deg);\n    backface-visibility: hidden;\n}\n```\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/04/20/laveienrose.md","slug":"2018/04/20/laveienrose","body":"# la vei en rose\n\n5 5 -4 4 -3 4 -4 5\n\n\nDes yeux qui font baisser les miens\n\n\n5 -5 5 -4 4 -4 5 -5\n\n\nUn rire qui se perd sur sa bouche\n\n\n-5 6 -5 5 -4 5 -5 6\n\n\nVoila le portrait sans retouches\n\n\n6 6 6 6 5 -5 6\n\n\nDe l'homme auquel j'appartiens\n\n\n \n\n\n7 -7 -6 6 5 7 -7\n\n\nQuand il me prend dans ses bras\n\n\n-6 6 5 4 -7 -6\n\n\nIl me parle l'a tout bas\n\n\n6 6 5 4 -7 -6 6\n\n\nJe vois la vie en rose\n\n\n7 -7 -6 6 5 7 -7\n\n\nIl me dit des mots d'amour\n\n\n-6 6 5 4 -7 -6\n\n\nDes mots de tous les jours\n\n\n6 6 5 4 -7 -6 6\n\n\nEt ça m' fait quelque chose\n\n\n7 -7 -6 6 5 7 -7\n\n\nIl est entré dans mon coeur\n\n\n-6 6 5 4 -7 -6\n\n\nUne part de bonheur\n\n\n6 6 5 4 4 4 7 7\n\n\nDont je connais la cause\n\n\n-8 -8 7 -8 -8 7 -8 -8 7 6\n\n\nC'est lui pour moi ...Moi pour lui dans la vie\n\n\n-8 -8 7 -8    -8 7    -8  7\n8\n\n\nIl me l'a dit, l'a jure pour la vie\n\n\n-8\n\n\nEt,\n\n\n7 -7 -6 6 5 7 -7\n\n\ndes que je l'aperçois\n\n\n-6 6 5 4 -7 7\n\n\nAlors je sens en moi\n\n\n6 6 -6 -7 7\n\n\nMon coeur qui bat\n\n\n \n\n\n(repeating from here)","collection":"blog","data":{"type":"post","category":"music"}},{"id":"2018/04/21/Summarize-yesterday's-promotion-and-defense.md","slug":"2018/04/21/summarize-yesterdays-promotion-and-defense","body":"# 总结一下昨天的晋级答辩\n\n> 得不到的永远在骚动，被偏爱的都有恃无恐。\n\n生活真是有趣，去年是我最高产的一年，因为从四月到十二月都有传言要晋升，然而一年了，没有任何动静。今年我已经准备好离职了，就差一个老天的指示（算是迷信吧，我做任何大点的决策都会找件低概率的事情看看效果，这次是抢小米MIX2s，真心是低概率了）。所以准备的内容一是心不在焉，二是太多了丧失了核心和事件背景（内容被限制在半小时内）。\n\n要求我11点到达现场，然而我吃了闭门羹，一直等到12点才让我进去，我是10点四十多到的，已经到了饭点，我没直接要求吃完饭在开始，导致【评委】们基本上没心思听我在讲什么。\n\n在演讲的开始阶段，大概5分钟左右，两名【评委】竟然站着讨论别的事情，我通过暂停演讲让他们安静下来的，但回想一下，我应该及时制止他们，或者参照上一段，大家都很累了，莫不如现休息。\n\n在分享的过程中，我的内容有一部分在讲”前后端异构的路由“，准备的时候虽然觉得这里作为亮点可以多添加墨水，但是确实是心不在焉没有真的做到。答辩过程中，我口述过”前端的路由会是后端的超集，因为前端的历史栈还要存放模态对话框之类组件“，这里遭到了很多人反对，源于很多人认为当用户遇到模态对话框点击后退的时候，开发人员应该关闭整个页面，而不是仅仅关闭对话框。我在这点上存疑，简单说我确实没见过这种交互，这种概念对于我来说相当于”1+1=2“的存在，当然，反思下来如果我文档的清晰这里也不会无辜浪费两分钟。\n\n关于 restful 的幂等性，哎，真的是重大失误了。当我提到 restful API 的时候，我希望表达的是不论是 API 还是页面都能够从表现上类似于资源访问，这的确是幂等性。但因为以上的很多事件，导致我主观认为评委没跟我走在一个思路里，所以当被提问到 restful 的特性的时候我以为是要问合理使用 HTTP 状态，因为毕竟 lego 里面基本上只有 GET 请求。\n\n最后，还是赌气了，答辩时间不足35分钟（要求至少40分钟，为保证不超时，我开着手表的计时器），就被进来的 hr 和我的老大进来叫停了，他们以为我答了两个小时，哎，反正我也饿了。\n\n当然昨天还有件好事，我抢到了MIX2s，真心戏剧化了。作为一个自以为有很高亲和力的人，我甚至能在雅思口试的时候逗笑老外，可以说这次就以演讲的角度上说，真是失败了。作为一个三年的结尾，这可真是不够光彩。毕竟它的开头可以算势如破竹了，我和在座的评委都打过交道，当然也出现过分歧和争吵，虽然公司合并了，我真心希望”大声说话“和”对事不对人“的公司文化能够延续，当然我更希望”客户第一“也能保持下来，毕竟离开后，我和公司的关系就只剩客户了。\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/04/22/From-Guiyuan-Tianju-to-the-Renaissance.md","slug":"2018/04/22/from-guiyuan-tianju-to-the-renaissance","body":"# 从归园田居到文艺复兴\n\n## 玉泉山下\n\n先介绍一个北京世外桃源一样的地方，在玉泉山东，颐和园南面有很多景色诱人的公园，最重要的地方在于它们免费啊！\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjptc373j21sn173wtg.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjq21y87j23s22ipnnr.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjq2vpeej23s22ipb0z.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsk8drsf4j23s22ip7wh.jpg)\n\n## 文艺复兴\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpxu2rdj23s22iph3j.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpu6avgj23s22ip18a.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpyzefzj23s22iph1m.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpyika8j23s22ipqmb.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjq0n759j23s22ip1kx.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpz7pruj23s22ipauz.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpv36smj23s22iph1f.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpu1g7xj23s22ip160.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpvpv91j22ip3s2k8n.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjq1bla9j23s22ipnhl.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpyypfxj23s22ipww8.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpxfozdj23s22ip1ad.jpg)\n\n## 大触时间\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpshrlcj23s22iph09.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjptpky6j23s22ipaot.jpg)\n\n![](http://ww1.sinaimg.cn/large/89d0a2e1ly1fqsjpta46lj23s22ipk4s.jpg)\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/04/29/Division-Daily-on-the-first-day.md","slug":"2018/04/29/division-daily-on-the-first-day","body":"# 划水日报第一天\n\n> 今天貌似有点感冒，吃了点药。\n\n开始打算去拉萨了，先一步一步得来。第一站，本打算是郑州，可惜没票，于是折中一下，去邯郸。考虑到明天是周一（博物馆闭馆），干脆明晚去，这样赶上周二一大早。去邯郸没有卧铺，委屈下自己坐软卧了，100块，然后邯郸到郑州的高铁也是100。\n\n9点启程去玉泉路迪卡侬买行装，快到夏天了不需要准备太多，什么驱蚊水啊，登山裤备一些就好了，到了拉萨可能会冷，但是可以到那里再买也来得及。简单几件东西，花了500呀！！！人生艰难啊。\n\n中午回请初中班长吃了顿日料，以前去东大的时候借她学生卡蹭饭来着，一喜日料牡丹园店，挺不好找的，但是味道不错，牛肉很好吃，人很多，一点半去还有人在排队，人均125，所以两个人。。。\n\n出来去了798，做的847路到陈各庄下车，到了京密路那个堵啊，看到奇虎360的牌子后就可以买饮料了，798里面也可以买，要排队的。。。进去就是各种拍照，看中国熊崽子diss外国熊崽子，然后一下午时光就这么度过了。\n\n回来嗓子已经哑了，但是感冒貌似轻了些，我到巴沟有个放小猪佩奇的店（不好意思每次都记不住店名），点了份大果粒（18块不是很亏，里面又是芒果又是西瓜的）。\n\n一天结束了，今晚没啥读书学习的计划，先把电器充好电，明天可以收拾收拾东西准备出发了。","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/05/25/Travel-summary.md","slug":"2018/05/25/travel-summary","body":"\n# 旅行总结\n\n北京 - 邯郸 - 郑州 - 武汉 - 宜昌 - 重庆 - 成都 - 西宁 - 拉萨\n\n离职\n\nhttp://onetake.dafork.com/static/photos/vrkjjpq.html?from=timeline\n\n邯郸\n\nhttp://onetake.dafork.com/static/photos/lo9o5pm.html?from=timeline\n\n武汉\n\nhttp://onetake.dafork.com/static/photos/b36wqe5.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/vr4p4b4.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/ojmkkm8.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/0ova86z.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/jxbwvkw.html?from=timeline\n\n宜昌\n\nhttp://onetake.dafork.com/static/photos/4jzqrkg.html?from=timeline\n\n重庆\n\nhttp://onetake.dafork.com/static/photos/7v5777l.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/7v5777l.html?from=timeline\n\n成都\n\nhttp://onetake.dafork.com/static/photos/rmxaa6v.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/rmx7bwb.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/jxgm305.html?from=timeline\n\n西宁\n\nhttp://onetake.dafork.com/static/photos/lomljbm.html?from=timeline\n\n青藏线\n\nhttp://onetake.dafork.com/static/photos/8rkz38j.html?from=timeline\n\n拉萨\n\nhttp://onetake.dafork.com/static/photos/k6ome4j.html?from=timeline\n\nhttp://onetake.dafork.com/static/photos/pj8g5jg.html?utm_source=wechat_timeline&from=timeline\n\nhttp://onetake.dafork.com/static/photos/4jvqap8.html?from=groupmessage\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/05/26/blender.md","slug":"2018/05/26/blender","body":"# Blender 复习之快捷键\n\nlinux下面使用blender必须搭配鼠标，因为拖动需要鼠标中键，模拟的快捷键是alt+鼠标左键，笔记本上必须要关掉alt快捷键（臣妾不想做）。\n\n移动元素是鼠标右键，另外需要打开模拟小键盘（file-preference-input）才能快速切换试图。\n\n## 菜单\n\nshift-a\n\n## 学习视频\n\nhttps://www.blenderguru.com/tutorials/blender-beginner-tutorial-series\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/05/28/inkscape.md","slug":"2018/05/28/inkscape","body":"# Inkscape 简单使用\n\n## 改变画布为横版\n\nFile - Document Properties - LandScape\n\n## 旋转对象\n\n慢速度点击两次\n\n## 多选\n\n使用 shift 和 鼠标左键\n\n## 小试牛刀\n\n![](http://ww1.sinaimg.cn/mw690/89d0a2e1ly1frr2us5d6kj21uw1dyaft.jpg)","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/06/01/Summary-in-May-18th.md","slug":"2018/06/01/summary-in-may-18th","body":"# 一八年五月总结\n\n这一个月大部分是旅行，然后用了一周左右的时间处理离职和社保代缴的事情，最后找到了人人保交了三个月的社保，最后一周复习了一下blender，大概这个月就结束了。\n\n## 六月目标\n\n用 blender 建模一个人物形象，有简单的肢体动作，表情，最好对衣服做简单的布料处理。目标是能够将这个 3D 人物应用于网站和软件中。\n\n背完《雅思写作360句》，雅思写作分数太低了，必须要入手提高这一点了。\n\n每天跑步10km，争取控制到1h里面。\n\nGraphql 和 nestjs 重新建设我的个人网站，因为现在的网站已经挂了。\n\n写一个微信小程序，可惜目前还没想好写啥。。。\n\n了解 ReactNative 的底层实现，并实现使用 kotlin 调用之。\n\n学习谷歌 tensorflow 教程。\n\nradioactive 口琴 + ukulele 联系熟练\n\n新标日完成上册","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/06/03/linuxMint.md","slug":"2018/06/03/linuxmint","body":"# LinuxMint 修改移动窗口快捷键\n\nAlt 在 blender 中很重要，所以要修改 LinuxMint 的 keyBinding\n\n打开 DConfig，点击 org > cinnamon > desktop > wm > preferences， 修改  mouse-button-modifier 中 <Alt> 为 <Super>","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/06/14/jupyter.md","slug":"2018/06/14/jupyter","body":"\n# Jupyter 的使用\n\n## 配置 Docker\n\n安装很容易，记住每次使用 docker 的时候要启动 deamon 服务，其实不建议默认打开，因为 docker 会常驻 8888 端口，这样 charles 就不好抓包了。\n\n还需要把本地用户加到 docker 组里\n\n```shell\ngpasswd -a $USER docker\n```\n\n加速服务可以用阿里云的，相关帮助已经很清楚了。\n\n## 安装并运行 jupyter\n\n```shell\n\n    docker pull jupyter/base-notebook\n\n    docker run -P jupyter/base-notebook\n\n```\n\n运行 Docker run 之后会有一大堆 http://xxxx:8888/?token=xxxx 的日志。\n\n执行`docker ps`查看哪个端口被映射了，替换地址为 localhost:【端口】即可。\n\n## 使用 jupyter\n\n直接新建 python3 文件，可以直接运行代码了，使用`Ctrl+Enter`组合执行代码。\n\n- `a`插入行\n- `b`在行后插入\n- `x`删除行\n\n## 安装 tensorflow\n\n哈哈官方版本有[tensorflow-notebook](https://hub.docker.com/r/jupyter/tensorflow-notebook/)\n\n这样就可以直接学习 tensorFlow 啦\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/06/22/Meteor-ToDoAPP.md","slug":"2018/06/22/meteor-todoapp","body":"# 使用 Meteor 快速搭建TODO APP\n\n代码在 https://github.com/gongbaodd/MeteorTodoAPP 这里做一下简单记录。\n\n## 把冰箱门打开\n\n```shell\nmeteor create app\n```\n\n打开 app 文件夹，可以看到 meteor 项目了，官网有各个文件夹的说明， 在此不赘述。\n\n```shell\nmeteor\n```\n\n可以在 localhost:3000 看到初始项目了。\n\n到```.meteor/package```下删除autopublish 和 insecure，添加 apollo 和 accounts-passwd\n\n## 把大象放进去\n\n下面记录一下踩到的坑。\n\n### CSS\n\ncss很尴尬，我想用postcss，但貌似meteor的postcss包并不是很给力。自带的css的打包功能貌似不能用（起码我没整出来）。好在 ecmascript 包可以引用 css。\n\n项目直接使用了bulmaCSS， 很方便。\n\n### Apollo增加用户token\n\n要用到Apollolink，在请求头里面添加meteor-login-token，在后面的 resolver 里面的 context 对象里面就有 userId 这个值了。\n\n```JavaScript\nconst apolloLink = new ApolloLink(\n    (operation, forward) => {\n        const token = Accounts._storedLoginToken();\n        operation.setContext(\n            _ => ({\n                headers: {\n                    'meteor-login-token': token,\n                }\n            })\n        );\n        return forward(operation);\n    }\n);\n```\n\n### Graphql\n\ngraphql文件修改了并不能触发重启，而且有的时候甚至一直读缓存而不在乎文件有修改，要把 makeExecutableSchema 参数做修改之后才能正常运行。\n\n## 总结\n\n用 Meteor 做项目的确是目前我知道的最快速了，主要是不用考虑数据库的种种，要知道，即使是黑盒，对于前端工程师来说，数据库还是很少触碰的。\n\nGraphql，最大的优势就是给接口做了个强制定义，以后不必去维护什么v1、v2的接口了。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/06/24/redbird.md","slug":"2018/06/24/redbird","body":"\n# 用 [redbird](https://github.com/OptimalBits/redbird) 代替 nginx \n\n我的网站都是拿 nginx 做反向代理，但是 ng 反向代理很麻烦， 而 redbird 是个不错的替代，里面的人哥哥牛逼，语法又好听，非常推荐。","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/06/28/The-current-cloud-service-available.md","slug":"2018/06/28/the-current-cloud-service-available","body":"# 目前可用的云服务\n\n今天收到邮件，原因是我的域名没备案。。。\n\n汗，不是故意不备案的，主要还是懒（囧）。既然国内不备案不能用那么就试试看有什么云服务（其实照以前第一反应就该是云服务，可惜现在有钱买机器了，反倒迟钝了）。\n\n## Heroku\n\n之前听说被墙了，没想到还能用，安装heroku-cli就能用了很方便。\n\n## Leancloud\n\n国内的heroku，文档都是中文的，基本上还能当firebase使唤。","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/07/05/6.md","slug":"2018/07/05/6","body":"\n# 补一下六月总结\n\n## 完成情况\n\nblender 已经完全熟练了， 甚至包括如何使用 threeJS 来调用，好欣慰啊（哈哈）。\n\n《雅思写作》还没背完， 日语也是， 读书也是， 看来计划上还是有些不完美。\n\n1h 跑完 10km 已经不是问题了，现在基本上刷滑板都溜得一逼，现在每天 100+的引体向上，感觉我能上天。（看着目前镜子中的我自己都馋的流口水）。\n\ngraphql 建站已经进入二期了， 目前使用 nest + nuxt 来制作。\n\nRN 的项目还没进展，可能全部精力都放到建站了。\n\n口琴和 uk 已经算是熟练了，起码已经不扰民了（吧）。\n\n微信小程序，也在构建中。\n\n2018 已经结束一半了，其实我对于 6 月的完成情况是满意的。因为期初就建立了一个高的标准嘛，能够完成一部分本身已经很开心了。\n\n## 七月\n\n七月要开始南下了，至于是不是找工作，因为当时交的三个月的社保，所以还可以等等，我会在这个月边旅行边工作，尝试体验一下自己远程的能力。\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/07/07/GulpV4-Task.md","slug":"2018/07/07/gulpv4-task","body":"\n# Gulp v4 之后 task 必须传函数\n\nhttps://fettblog.eu/gulp-4-parallel-and-series/\n\n如链接所说，为实现并行操作，原来的\n\n```javascript\ngulp.task(\"default\", [\"css\", \"html\", \"js\"]);\n```\n\n已经改为\n\n```javascript\ngulp.task(\"default\", gulp.parallel([\"css\", \"html\", \"js\"]));\n```\n\n而如果想串行执行的话可以用`gulp.series`\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/07/10/Apollo-Meteor.md","slug":"2018/07/10/apollo-meteor","body":"\n# 没有手动配置过 Apollo 都不知道 Meteor 帮你做了多少事\n\n## Server 端\n\n```ts\nexport class AppModule implements NestModule {\n  graphiql(customer: MiddlewareConsumer) {\n    if (!isDev) return;\n    customer\n      .apply(graphiqlExpress({ endpointURL: graphql }))\n      .forRoutes(graphiql);\n  }\n  graphql(customer: MiddlewareConsumer) {\n    customer\n      .apply(graphqlExpress(req => ({ schema, rootValue: req })))\n      .forRoutes(graphql);\n  }\n  configure(customer: MiddlewareConsumer) {\n    this.graphiql(customer);\n    this.graphql(customer);\n  }\n}\n```\n\n## client\n\n```typescript\n@Component({\n  components: {\n    MeCard,\n    Links\n  },\n  apollo: {\n    hello: {\n      query: gql`\n        {\n          hi\n        }\n      `,\n      update(data) {\n        return data.hi;\n      }\n    }\n  }\n})\nexport default class IndexPage extends Vue {\n  data() {\n    return {\n      hello: \"\"\n    };\n  }\n}\n```\n\n同时要在 nuxt 配置中增加 apollo 的配置项\n\n```typescript\n[\n  \"@nuxtjs/apollo\",\n  {\n    clientConfigs: {\n      default: {\n        httpEndpoint:\n          process.env.HTTP_ENDPOINT || \"http://localhost:3000/graphql\"\n      }\n    }\n  }\n];\n```\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/07/14/Can-be-regarded-as-visiting-Tianjin.md","slug":"2018/07/14/can-be-regarded-as-visiting-tianjin","body":"\n# 可算把天津逛了\n\n![天津游（一）天津博物馆、海河散步、天津之眼](https://i0.hdslb.com/bfs/archive/740dbf72d993d70b466740bc8cfb97fd2852c629.jpg@320w_200h_100Q_1c.webp)\n\n[天津游（一）天津博物馆、海河散步、天津之眼](https://www.bilibili.com/video/av26856271)\n\n![天津第二天，世纪钟，名流茶社，耐尚青旅](https://i1.hdslb.com/bfs/archive/466d7fb7d57cffb0bf870cc2e5f21dd91ef11153.jpg@320w_200h_100Q_1c.webp)\n\n[天津第二天，世纪钟，名流茶社，耐尚青旅](https://www.bilibili.com/video/av27109307)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/16/Buddha-statue-of-Longxing-Temple-in-Qingzhou.md","slug":"2018/07/16/buddha-statue-of-longxing-temple-in-qingzhou","body":"\n# 青州龙兴寺佛像\n\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqixp1j20s00s075c.jpg)\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqlalej20s00s0q4t.jpg)\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqnaclj20s00s0n0c.jpg)\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqlgxqj20s00s0q4z.jpg)\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqkpsmj20s00s0jsu.jpg)\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqjtz4j20qv0qvq3s.jpg)\n![](https://ws1.sinaimg.cn/large/89d0a2e1ly1ftwvvqo052j20s00s0dhq.jpg)\n\n[青州龙兴寺佛像](https://www.bilibili.com/video/av27132963)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/18/Rizhao-rushed-to-the-sea-briefly.md","slug":"2018/07/18/rizhao-rushed-to-the-sea-briefly","body":"\n# 日照短暂地赶海\n\n![我在日照的沙滩看沙雕](https://i0.hdslb.com/bfs/archive/3cdf519fbe344f2f43d5ebde674e848c12607847.jpg@320w_200h_100Q_1c.webp)\n\n[我在日照的沙滩看沙雕](https://www.bilibili.com/video/av27427761)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/20/On-the-first-day-Nanjing-was-hot-and-died.md","slug":"2018/07/20/on-the-first-day-nanjing-was-hot-and-died","body":"\n# 入伏第一天南京热死了\n\n![入伏第一天南京热死了](https://i2.hdslb.com/bfs/archive/d8e0089d21137d07aabb5a6589b7e29352f8b35b.jpg@320w_200h_100Q_1c.webp)\n\n[入伏第一天南京热死了](https://www.bilibili.com/video/av27895422)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/22/Shanghai-Lujiazui-to-see-the-Guoguo-big-guy.md","slug":"2018/07/22/shanghai-lujiazui-to-see-the-guoguo-big-guy","body":"\n# 上海陆家嘴看看果果大佬\n\n![](https://i1.hdslb.com/bfs/archive/ffcba918c289f92d565f24e20becfdf6bda0eccf.jpg@320w_200h_100Q_1c.webp)\n\n[北方小渔民第一次到浦东的感觉](https://www.bilibili.com/video/av27938927)\n\n![](https://i2.hdslb.com/bfs/archive/a342117d33337ce4c6b696e370d7d05f4fd28039.jpg@320w_200h_100Q_1c.webp)\n\n[外滩一夜，探访即刻 APP 总部，外滩美术馆割韭菜](https://www.bilibili.com/video/av27923307)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/23/Quanzhou-is-Little-Southeast-Asia.md","slug":"2018/07/23/quanzhou-is-little-southeast-asia","body":"\n# 泉州就是小东南亚\n\n![](https://i2.hdslb.com/bfs/archive/b374dbf4f0da2222817a93a0364091a3d14c1388.jpg@320w_200h_100Q_1c.webp)\n\n[泉州简直就是小东南亚啊！](https://www.bilibili.com/video/av27970422)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/24/I-eat-fat-in-Fuzhou.md","slug":"2018/07/24/i-eat-fat-in-fuzhou","body":"\n# 我在福州吃胖啦\n\n![](https://i2.hdslb.com/bfs/archive/f30c5f5c3d82318a529b5a023693adcbe1027215.jpg@320w_200h_100Q_1c.webp)\n\n[福州沙县比佛跳墙好吃，我果然是穷命](https://www.bilibili.com/video/av27970218)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/25/I-eat-Chaoshan-beef-in-Shantou.md","slug":"2018/07/25/i-eat-chaoshan-beef-in-shantou","body":"\n# 我在汕头吃潮汕牛肉\n\n![](https://i0.hdslb.com/bfs/archive/536f81faa7db4ef642ac97633a5d37ee20205fba.jpg@320w_200h_100Q_1c.webp)\n\n[汕头吃潮汕牛肉好便宜啊](https://www.bilibili.com/video/av27970617)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/07/27/pixiJS-L.md","slug":"2018/07/27/pixijs-l","body":"# pixiJS 的 l-system 实现\n\n![](https://i0.hdslb.com/bfs/archive/a0a9d5e73809d1a5b41a45cb848575b9af54c865.jpg@320w_200h_100Q_1c.webp)\n\n[pixiJS 的 l-system 实现](https://www.bilibili.com/video/av28166320)","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/04/7.md","slug":"2018/08/04/7","body":"\n# 7 月总结\n\n## 回顾下上个月的计划\n\n- 小程序：这个月，提交了小程序，然而审核没通过（提交类型写的是旅游...应该写办公就好了。）\n\n- ReactNative: 不打算做了，反正也写过，没啥新鲜感，这个月听了 flutter 的分享，考虑看一下，环境已经部署好了。\n\n- 主站：成功上线了，国内需要备案哭，表示连实体家都没有的人现在连线上的都不好搞了，好在国外的服务器不需要备案，然而我的服务器内存有限，跑 node 没几页就占用 170MB 内存，同比 GOGS 只占用了 70MB 内存。\n\n- 英语、日语：这个月算是完全没跟啊，除了英语偶尔听听 podcast。\n\n- 远程工作能力：这个月我尝试边旅行边编程，在天津完成了【用 PIXI.js 实现烟火特效】、潍坊完成了【Canvas 绘制 bernsley fern(蕨叶)】、上海[【L 系统生成树】](https://www.bilibili.com/video/av28166320)、深圳【Lorenz Attractor】，其实体验还不错，中途遇到了录制屏幕困难，买了个小米的手机支架，但其实是可以使用 VLC 来录屏。\n\n## 8 月计划\n\n工作中心要从北京迁移到深圳，最好在深圳本地找到工作。\n\n对新工作的期望：\n\n1. 最好是 base 香港或者 base 国外，期待工作环境语言能使用英语。\n\n2. 如果条件 1 无法实现，考虑新工作内容是与之前的工作方向不同（表单处理），可以考虑的工作方向 node 全栈、数据可视化、web 游戏、硬件。（条件 2 之下可以适当降低薪资）\n\n月度计划。\n\n1. 每周录制一个教学视频。\n\n2. 搭建 flutter 环境。\n\n3. 在 CodeWars 学习 rust。\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/08/05/CSS Grid Layout.md","slug":"2018/08/05/css-grid-layout","body":"# CSS Grid Layout 使用总结\n\n最近被猎头催的实在不行了（真的，感觉他们更担心我找不到工作），于是我写了份简历给他们。当然了，既然最后要的是PDF，这种机会不试试新的CSS布局还真说不过去。\n\n##　实现圣杯布局\n\n提到CSS布局，自然想到了圣杯，一行header，中间是sidebar和content，底下是footer。\n\n```css\n.grid {\n    display: grid;\n    grid-template-area: \"header header  header\"\n                        \"left   content right\"\n                        \"footer footer  footer\";\n}\n\n.item1 {\n    grid-area: header;\n}\n\n.item2 {\n    grid-area: left;\n}\n\n.item3 {\n    grid-area: content;\n}\n\n.item4 {\n    grid-area: right;\n}\n\n.item5 {\n    grid-area: footer;\n}\n```\n\n很简单，使用 Grid Layout 的最大好处是页面布局由CSS全部接管，意味着想把```.item5```改成header只需要修改```grid-area```即可，```grid-template-area```结合 media query　可以实现适配不同设备，如打印机布局相比于屏幕来说界面比较窄。\n\n```CSS\n@media print {\n    .grid {\n        grid-template-area: \"header\"\n                            \"left\"\n                            \"content\"\n                            \"right\"\n                            \"footer\";\n    }\n}\n```\n\n## 实现无大小限制瀑布流\n\n前端瀑布流在网格布局之下，结合``` grid-auto-flow: row dense;```可以实现大小不一的网格元素按照最合理的形式行填充。\n\n```css\n.grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, 100px);\n    grid-template-rows: 100px;\n}\n\n.size-1 {\n    grid-column: span 1;\n    grid-row: span 1;\n}\n\n.size-2 {\n    grid-column: span 2;\n    grid-row: span 2;\n}\n\n.size-3 {\n    grid-column: span 3;\n    grid-row: span 3;\n}\n\n```\n\n## 兼容性\n\n并没有测试IE11，从caniuse可以看到，主流浏览器除了IE11都是不需要家前缀的，IE11需要加-ms前缀（道听途说autoprefixer不会补grid，所以最好手改）。\n\n国产浏览器兼容性就不理想了，除了UC，百度、QQ浏览器都不支持，汗啊，看来浏览器这行业真的是不挣钱了，所以如果要支持这些浏览器还需要再等等。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/07/React16.md","slug":"2018/08/07/react16","body":"# React16 模拟输入框输入事件\n\n照往常，我会新建一个input事件然后dispatch一下，今天在instagram上面试验失败了。原因是React16 内部定义了descriptor拦截了value.\n\n```javascript\nlet input = $0;\nlet value = 'new value';\n\nlet event = new Event('input', { bubble: true });\nevent.simulated = true;\n\nlet tracker = input._valueTracker;\ntracker && tracker.setValue(value);\n\ninput.value = value;\ninput.dispatchEvent(event);\n```\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/14/AframeJS.md","slug":"2018/08/14/aframejs","body":"# AframeJS 学习笔记\n\n## 创建项目\n\n使用 [npm/angle](https://www.npmjs.com/package/angle)\n\n## ECS(Entity-Component-System)\n\n不懂百度。\n\n## 组件库\n\nhttps://aframe.io/aframe-registry/\n\n## 博客\n\nhttps://aframe.io/blog/\n\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/17/GitHub-1Password.md","slug":"2018/08/17/github-1password","body":"# GitHub 打开二次 1Password 认证\n\n这个安卓没有这功能，但是 mac 和 windows 都可以。\n\n* 在 Github 的 Security 选项，打开 2 Factor authentication\n\n* 保存下一步的还原码\n\n* 点开 1Password 的 Github 项目，点击编辑，找到 label，点击右面的三个点，选择 \"one-time password\"\n\n* 用三个点旁边的二维码扫描器扫描 Github 页面上的二维码。\n\n然后你就发现你的代码不能再 commandline push 了。。。\n\n* 参照 https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/ 新建一个 token， 以后用这个token作为密码即可。\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/08/22/mock-fs-io.md","slug":"2018/08/22/mock-fs-io","body":"# 单元测试时使用mock-fs模拟IO返回值\n\n最近换工作到了一家对测试要求比较高的公司，相比以前仅仅完成Appnium完全匹配不同，这里要求使用jest自动化测试覆盖率达到80%+，[此处应有jest cheat sheet](https://devhints.io/jest)。\n\n工作过程中有很多需要读配置文件的地方，做法是在本地对应位置放上文件，然后配置ignore掉这个文件进行测试，然而这并不是个很优雅的方式（尤其是当代码中有判断此配置是否存在时，需要手动移动文件），此时即可利用mock-fs。\n\n## 简单使用\n\n```javascript\nconst mock = require('mock-fs');\n\nmock({\n  'path/to/fake/dir': {\n    'some-file.txt': 'file content here',\n    'empty-dir': {/** empty directory */}\n  },\n  'path/to/some.png': Buffer.from([8, 6, 7, 5, 3, 0, 9]),\n  'some/other/path': {/** another empty directory */}\n});\n```\n\n指定的文件夹地址是默认相对于process.cwd()的，当然也可以配置其它地址。执行mock之后，所有有关IO的部分就都被修改了。\n\n## 需要注意的地方\n\n* 因为强制修改了IO，你会发现require也不好用了所以一般放在require之后\n* 记得要在每个用例执行之后回收mock状态\n\n```javascript\ndecribe('# test', () => {\n    const mockfs = require('mock-fs');\n    beforeEach(() => jest.resetModule());\n    afterEach(() => mockfs.restore());\n    it('should do ...', () => {\n        const foo = require('foo.js');\n        mockfs({...});\n        expect(foo)...\n    });\n})\n```","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/23/prettier-eslint.md","slug":"2018/08/23/prettier-eslint","body":"# 如果prettier和eslint冲突了怎么办\n\n最近工作发现小伙伴都不喜欢用prettier，原因是格式化后的代码其实和之前约定的eslint有出入。\n\n其实安装prettier-eslint之后，你的prettier就不会将代码改成违反eslint规则的样子，在vscode配置中，打开prettier.eslintIntegration。这样自动保存也会避开eslint。\n\n另外prettier文档中也有如何解决二者冲突的方法 https://prettier.io/docs/en/integrating-with-linters.html。","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/24/eslint-plugin-typelint-jsdoc-linting.md","slug":"2018/08/24/eslint-plugin-typelint-jsdoc-linting","body":"# eslint-plugin-typelint借助jsdoc实现无编译linting级别的类型检查工具","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/26/Shenzhen-Museum.md","slug":"2018/08/26/shenzhen-museum","body":"\n# 深圳博物馆\n\n在市民中心，坐 11 号线、1 号线或者 4 号线都能到，福田站及其大，在地下找好久出来能找到博物馆。\n\n怎么说呢，中规中矩吧，毕竟深圳也没啥历史，改革开放的内容比较值得看，毕竟都是我童年的东西。\n\n深圳的民俗文化有一个鱼灯，没有看过，博物馆里都是很老的照片了，很想看看呀。\n\n另外两个借展，玛雅文化展（收获各种表情包），辽阳白塔展，哈哈家乡的味道，真香。\n\n[vlog](https://www.bilibili.com/video/av30833711)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/08/28/Functional Reactive Programming-baconjs.md","slug":"2018/08/28/functional-reactive-programming-baconjs","body":"# Functional Reactive Programming 框架 baconjs","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/29/OpenAPI-swagger.md","slug":"2018/08/29/openapi-swagger","body":"","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/08/31/MagicaVoxel.md","slug":"2018/08/31/magicavoxel","body":"# MagicaVoxel 使用笔记\n\n没时间写了，上链接好了\n\nhttps://zhuanlan.zhihu.com/p/29884021\n\nhttps://zhuanlan.zhihu.com/p/23164903","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/09/01/Reform-and-opening-up-museum.md","slug":"2018/09/01/reform-and-opening-up-museum","body":"\n# 改革开放博物馆\n\n位置在蛇口海上世界附近，楼下是《博物志》里面经常提到的设计互联。\n\n里面基本上很红很专啦，再就是看起来像招商公司的广告囧，算了，反正也是他们建的。推荐后面的一个袁庚展，反正如果提袁庚，基本没人知道，就展览来说，这个人在改革开放的实践过程中举足轻重。整个展览以袁庚的角度描述改革开放，真的很值得一看。\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/09/02/August-Summary.md","slug":"2018/09/02/august-summary","body":"\n# 八月总结\n\n这个月进入了新的工作环境，从事于 Node 开发，工作环境确实是英文。\n\n说说不太适应的地方，这里对文档要求真是严格，往往逐字逐句细究，我已经入职了两周了，除了上传了一个 lambda 方法，大部分时间是处理文档（惨）。\n\n感觉工作流程可以更新，比如从 google drive 到 swagger 的工作完全手动，然后从 swagger 引入到 ReadMeIO 又是手动。。。其实可以考虑将 google drive 的数据转换成 JSON，然后 swagger 到 ReadMeIO 本身就可以直接导入。\n\n新工作环境里面使用 AWS 和 GCP，这些之前我都是没接触过的，还需要学习。同时生活上，又要准备各种厨具、家具用品。汗啊，导致本月也没做到每周的技术分享和 Rust 的学习。\n\n但是新东西还是有的：\n\n1. 深圳博物馆，了解了下深圳民俗\n2. 蛇口改革开放馆，了解改革开放\n3. 学习了 MagicaVoxel，正考虑把【宫不上】小人像素化\n4. 听了函数编程的技术分享，大有收获。\n\n下个月的计划\n\n1. 像素化【宫不上】小人\n2. 找个健身房\n3. 恢复口琴和 uk 的学习\n4. 考虑考虑修改下 semantic-swagger\n5. 写一个表情输入工具\n6. 写一个 VSCode 自动生成 schema 工具\n7. 写一个 VScode，sidebar 修改工具\n8. 写一个 VScode 手动关闭 prettier 工具\n9. 我还是放不下 rust 啊啊啊\n\n这个月中旬，如果过得满意，可以考虑买个马里奥赛车犒赏自己\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/09/08/You-don't-know-the-clinic.md","slug":"2018/09/08/you-dont-know-the-clinic","body":"# 知乎：你不知道诊所\n\n[vlog只支持移动端看](https://m.okjike.com/originalPosts/5b93edda99b4740011dca903?username=a03ab857-dd35-44d3-8373-97e7a855db39&utm_source=wechat_timeline&from=timeline)","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/09/16/Pixel-villain-that-is-not-up-to-the-palace.md","slug":"2018/09/16/pixel-villain-that-is-not-up-to-the-palace","body":"# GongBuVoxel\n\n![](https://cdn.ruguoapp.com/FkMd64m4X-YUtF7iZy9nGqQxDQNb.png)\n\n![](https://cdn.ruguoapp.com/FomEZcD5NhrNHZ_adjAyltdmpUFK.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n\n![](https://cdn.ruguoapp.com/Fr4u9mEdRn-UeWOSMz0OqAomfWFX.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n\n![](https://cdn.ruguoapp.com/Fu5x6KtfX87HQVvqO7OL9TiHcq0L.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/09/22/Nanshan-Museum-and-Nanshan-Library.md","slug":"2018/09/22/nanshan-museum-and-nanshan-library","body":"\n# 南山博物馆 & 南山图书馆\n\n## 南山博物馆\n\n南山博物馆看起来很新啊，里面介绍些南山的历史（呵呵，有啥历史）。\n\n另外馆内很暗，真的很暗，我去过这么多博物馆，南山博物馆是最暗的，基本只有展品那里有灯光，其它都是漆黑一片。\n\n比较有意思的展览是《耀世遗珍·阿富汗馆藏》的借展，各种阿富汗的金饰，要知道自打我听了《壁下观》之后，我对大夏朝和大月氏的好奇心就开始了。\n\n## 南山图书馆\n\n看起来就是 90 年代的那种小图书馆，应该是 6 层，有点记不清了，貌似顶楼是计算机类图书，和电子类放在一起，楼里面很挤，都是在学习的。可能是因为房子老吧，里面有一些潮味。\n\n南山图书馆出来是南山活动中心，各种表演什么的，看到《三体》话剧的信息了，可惜 180 的票早就售空了。\n\n话说出了南山图书馆的门，门口是婚介所。。。是以书会友然后共入洞房的节奏啊。\n\n## 欢乐颂\n\n去了传说中的欢乐颂了，很一般啊，莫不是我搞错了？\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/09/23/ibus.md","slug":"2018/09/23/ibus","body":"# 记一个关于 iBus 的教训\n\n大概今年开始，chrome在linux里面就没办法正常看输入框，到了8月更惨，vscode和atom都完蛋了，完全看不到输入法的面板（也许我得考虑英文输入了）。\n\n其实是个hidpi的问题，chromium对输入光标的位置处理和linux处理不同，导致输入法都跪了，没错，不只是fcitx。这次我就以为这是fcitx的bug，换了ibus，结果ibus其实也很多坑。\n\n## 安装和配置ibus\n\nlinux 的profile其实比较混乱， 有.bashrc/.bash_profile/.profile/.xprofile/.environments等等，而且这些点文件在/etc中都有全局备份，所以要检查GTK_IM_CONFIG就要挨个文件找。\n\n记得安装ibus-table，现在gnome和ibus的整合比fcitx好，装好之后可以在setting里面切换输入法。\n\n但是！注意，装了ibus就没有搜狗拼音了，而且并不能解决hidpi问题。无奈我又把fcitx装回来了。\n\n## 不过并不是没有好消息\n\n在KDE环境下面跑的vscode还是能显示的，开心\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/09/24/Commemorate-the-first-Month-Cake-Festival-in-Shenzhen.md","slug":"2018/09/24/commemorate-the-first-month-cake-festival-in-shenzhen","body":"# 纪念一下在深圳的第一个月饼节\n\n没想到中秋三天假就这么结束了，总结一下：\n\n1. 第一天，去了南山博物馆，南山图书馆（书有点少，byTheWay）。看到了《三体》的舞台剧海报，无奈180块的座位卖光了，380块的话，我也没那么爱大刘的作品嘛～\n\n2. 第二天。\n\n    1. 跑了10k。\n    2. 然后去公司蹭工作环境。\n    3. 更新vscode之后，在gnome环境下，fcitx没有面板了，哭。\n    4. 然后发现atom也不行了。\n    5. 换了ibus，依然不行。\n    6. 问题可能源于chromium在gtk下面hidpi的鼠标定位不正确。\n    7. 无奈换回kde，改了下主题。\n    8. 创建了一个repo，打算翻译spanner文档\n\n3. 第三天\n\n    1. 下雨了，睡到中午\n    2. 去南山书城，找到了几本想看的书\n        + 上一堂最好玩的日本学\n        + 深入浅出RxJS\n        + 计算机程序设计艺术 排序与查找\n        + 程序员面试笔试宝典（well）\n        + Web前端测试与集成\n        + 以太坊技术详解与实战\n        + D3 API详解\n        + 图说D3 数据可视化利器从入门到进阶\n    3. 少了些OpenGL的书，但上面的够看一阵子了\n    4. 下午睡了一会儿，晚睡毁一天啊\n    5. 去人才公园跑步，全是赏月的人，囧。","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/09/24/Nanshan-Book-City.md","slug":"2018/09/24/nanshan-book-city","body":"\n# 南山书城\n\n话说我住的离书城不远，当初找房子就找的后海和书城之间，可惜那屋子没抢到。\n\n南山书城很挤，估计是开学，孩子蜂拥而至。我逛书城很简单，看看最近有啥畅销书，记下书名然后找电子版，实在不行，估摸着看看有没有纸质版再卖二手。\n\n好了，这是接下来几个月的书单。\n\n- 上一堂最好玩的日本学\n- 深入浅出 RxJS\n- 计算机程序设计艺术 排序与查找\n- 程序员面试笔试宝典（well）\n- Web 前端测试与集成\n- 以太坊技术详解与实战\n- D3 API 详解\n- 图说 D3 数据可视化利器从入门到进阶\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/10/01/Summary-of-September.md","slug":"2018/10/01/summary-of-september","body":"\n# 九月总结\n\n## 计划完成情况\n\n1. 用 magicaVoxel 做的头像已经投入使用啦，至于博客头像的话，看心情\n2. 打算做的 vscode 插件，现在来看并不是很着急，有时间再做咯\n3. 公司里面已经有一个项目是从 google-drive 取数据到项目里面了，但还需要改进。\n4. 还没有开始练口琴和 uk\n\n## 去过的地方\n\n- 设计互联以及海上世界周边\n\n没怎么用心去发掘，但貌似好吃的很多\n\n- 万象天地\n\n万象天地太美好了，感觉就是年轻人圣地，我都想搬去大冲了。\n\n- 人才公园\n\n虽然很晒，但是我很喜欢跑完步拿着 kindle 在海边看书的感觉。\n\n## 新事物\n\n- 极光单词\n\n先交钱，然后每天背 10 分钟就返一块钱。关键每个单词都配三段美剧的剪辑。\n\n## 十月计划\n\n- 继续背极光单词\n- 看完深入浅出 RxJS\n- 翻译 spanner 文档\n- 在深圳交几个朋友吧～\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/10/02/Shenzhen-Central-Book-City.md","slug":"2018/10/02/shenzhen-central-book-city","body":"\n# 深圳中心书城\n\n人太多。。。不是说十一深圳成空城了么，这么个空法？\n\n位置在市民中心，就是上次去博物馆附近，坐地铁到少年宫站下最近了，里面真是人挤人，不知道为什么那么多人还能用心看下去。。。\n\n书城西面是深圳音乐厅，东面是城市规划馆（整个十一没去成，试运行中，能碰到一次正常开馆真难）。\n\n书城里面，第一个区域西面有一个计算机类的书摊，其实就比南山书城的大些，里面，还是图灵丛书比较多点，所以想看技术书还是逛网站吧。\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/10/04/Bai-Caotang-drink-sugar-water.md","slug":"2018/10/04/bai-caotang-drink-sugar-water","body":"# 百草堂喝糖水\n\n在蛇口，海上世界到育才学校那里，有一家巨破巨破的凉茶铺子，但是人居多，点了份杨枝甘露，太好喝了","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/10/05/anker.md","slug":"2018/10/05/anker","body":"\n# 安利一下 anker 的随身投影\n\n其实是个音响，外带投影的功能，投影是 1080p 的，那就比市面上很多投影好得多，噪音低，音效好，重点是它小啊，真的，就可乐罐难么大，而且是 anker 的，质量肯定不错。\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/10/06/Industrial-Exhibition-Hall-&-Huaqiangbei-&-Overseas-Chinese-Town-Creative-Park.md","slug":"2018/10/06/industrial-exhibition-hall--huaqiangbei--overseas-chinese-town-creative-park","body":"\n# 工业展览馆、华强北和华侨城创意园\n\n上次去中心书城的时候，本来想看看灯光秀，可是人太多了，回去的路上看二次元舞蹈排练的时候看到了工业展览馆。\n\n## 工业展览馆\n\n工业展览馆在市民中心楼上，里面基本也是歌颂改革开放了。但是那个电梯！完美了\n\n![电梯](https://cdn.ruguoapp.com/lhu7_Fp6SPJpWTZQVTgnP5VYqojV.gif)\n\n## 华强北\n\n华强北感觉上是个大型电子市场，现在基本上跑楼上了，一楼和地下都是比较大的商场。逛吃逛吃就好了（即使店面都写着第二份半价，但是网上的优惠更值一些）。\n\n![异形](https://cdn.ruguoapp.com/FitvEUF4kVJh-IrgNVRDXf3yqP8c.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n\n## 华侨城\n\n深圳的 798。终于找到了一个很符合我个性的地方呀，不知道周围有没有小妹妹呀，好想给她拍照呀！！！\n\n![](https://cdn.ruguoapp.com/FrVu0CunN8x513UBqUOngO7IzzBH.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n\n![](https://cdn.ruguoapp.com/FtWlO_PQxbb_VUrBYusYoHHCRSXc.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n\n![](https://cdn.ruguoapp.com/FvZdjd2iyj-BNwKEny9DVGHqPQZG.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/10/07/Park-of-Talent-Park.md","slug":"2018/10/07/park-of-talent-park","body":"\n# 终于赶上了人才公园的日出\n\n一直想去看看，可就是起不来，分明从家到这里就 10 分钟\n\n![](https://cdn.ruguoapp.com/Fq7ifDg8OFckTtwRM8N2ztZPL9l5.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n\n![](https://cdn.ruguoapp.com/Fj7j-kKkrxKdxPfe7FzZeZ8xCBsA.jpg?imageMogr2/auto-orient/thumbnail/2500x9999%3E)\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/10/07/RxJS.md","slug":"2018/10/07/rxjs","body":"# RxJS深入浅出\n\nRxJS，早有耳闻，尤其是如果你使用过Angular，RxJS是会接触到的。\n\n我要推荐《RxJS深入浅出》在于它真的很仔细，尤其是说明schedule的部分，作者甚至仔细解释了microTask和macroTask的区别。\n\n同时，单元测试部分，用RxJS的TestSchedule处理异步看起来真的比写n个mockImplementOnce要好得多。\n\n多说无益，我在思考写个usecase看看它是不是真的很好用。\n","collection":"blog","data":{"type":"post","category":"book"}},{"id":"2018/10/13/node.md","slug":"2018/10/13/node","body":"# 阿里深圳node地下铁\n\n## 渲染服务化，egg.js北斗\n\n最早同机部署，利用热更新，减少node发布频率。\n\n使用node做页面渲染，渲染好的html给java层，最终分发还是给java。\n\n资源争抢，linux [cgroup](https://wiki.archlinux.org/index.php/Cgroups)，但是没实现。\n\n静态资源分发系统，使用推送的方式（其实我没听懂那面拉取说的是啥。。。），基于阿里的[DragonFly](https://alibaba.github.io/Dragonfly)。\n\n## node devops\n\n[sandbox](https://github.com/midwayjs/sandbox)\n\n代码治理，哎呀就是linting啊typechecking啊。\n\n包治理，到底是大厂，包有问题还能查出来。居然还知道那些应用用过哪些包。\n\n数据治理，错误日志分析。\n\n链路分析\n\n远程调试，可以在办公区调试服务机器。\n\n故障演练，内部平台不给人看啊。[QCon](http://www.infoq.com/cn/presentations/ali-electricity-supplier-fault-management-and-fault-drills-practice) 找到了视频，有机会看下。\n\n另外可以看下[pandora.js](https://github.com/midwayjs/pandora)\n\n## Node-FFI\n\n牛逼你深圳，上哪儿听js的分享能谈到IoT啊。\n\n应用背景是想要用JS去调用C的动态链接库。毕竟JS写起来容易些。\n\n原来多语言交互，通过共享内存、RPC调用或者外部函数调用（FFI）。\n\n[mJS](https://github.com/cesanta/mjs)比较感兴趣，是[mongoose os](https://mongoose-os.com/)的js运行语言。\n\n## Tarsjs\n\n[tars](http://tars.tencent.com/base/tars_index/en/index.html)听起来巨牛逼，没听懂。。。\n\n话说阿里的投屏系统是什么，还带录屏功能，貌似我在mac上没用过投屏系统啊。\n\ntarjs提供了一套高性能的RPC协议，可以用 @tar/stream 获取。\n\n太多了，听不懂啊。\n\n进程管理，进程重启，无损重启，数据监控。\n\n### node监控指标：\n\nmemUsage、 cpuUsage、 eventLoopLag：队列延迟， libuv\n\n### LongStackTrace组件的实现\n\n[问题背景](https://www.ctolib.com/topics-134009.html)\n\n[具体代码](https://github.com/medns/longstack)\n\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/10/16/Get.md","slug":"2018/10/16/get","body":"# 世纪话题Get参数传数组\n\n哎呀，这个话题，其实挺简单的，但是仔细想起来，URL的请求参数如下，如果要写数组怎么办？\n\n```\na=1&b=2&c=3\n```\n\n其实无非是解析这个字符串，但是由于没有标准方案，所以大家的处理方法五花八门。我遇到过的方式如下\n\n## 数组标识\n\n```\na[1]=1&a[2]=2\n```\n\n或者\n\n```\na[]=1&a[]=2\n```\n\n这种做法，jquery时代很多，可以很简单分辨出数组，但是取到数据的时候要单独处理key，因为直接取到的值是`a[]`\n\n## 序列化\n\n```\na=%5B1%2C2%5D\n```\n\n少说废话，直接stringify，然后发现URL里面要转义的东西太多了，然后后端取到值还要parse下，因为传来个字符串\n\n## 分隔符分割\n\n```\na=1%2C2\n```\n\n莫不如加个`,`处理下？缺点，找错分隔符的话还是要处理转义，后端还是要单独split下\n\n## 其实有标准的\n\n根据[URLSearchParam](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams)\n\n```\na=1&a=2\n```\n\n如此生成的URLSearchParam对象（类似于Map对象），直接调用```get('a')```方法只会取到一个值，但是执行```getAll('a')```可以获取到数组\n\n既然是标准，koa的koa-qs也是这么处理数组的。\n\n另外URLSearchParam还有一定容错能力，所以即使url被浏览器截断（其实不太会，因为此时报错414）也不会有太大问题。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/10/18/Algolia.md","slug":"2018/10/18/algolia","body":"# 关于调用Algolia","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2018/10/21/Moon-and-Six-Shi-Shi.md","slug":"2018/10/21/moon-and-six-shi-shi","body":"\n# 月亮与六便士\n\n我仿佛看见一艘双桅大帆船，这个年轻人正在船上干活，他浑身赤裸，只在腰间围着一块粗蓝布；天黑了，船儿被清风吹动着，轻快地在海面上滑行，水手们都聚集在上层甲板上，船长和一个管货的人员坐在帆布椅上自由自在地抽着烟斗。斯特里克兰德的孩子同另一个小伙子跳起舞来，在暗哑的手风琴声中，他们疯狂的跳着。头顶是一片碧空，群星熠熠，太平洋烟波渺茫，浩瀚无垠。","collection":"blog","data":{"type":"post","category":"book"}},{"id":"2018/10/22/moment.md","slug":"2018/10/22/moment","body":"\n# moment 获取跨越一段时间的月和周\n\n这个实现是同步实现，其实最好改成异步实现。\n\n另外关于```time.startOf('month')```竟然传递的是引用，简单说```time```改变之后这个值还会变，所以要```clone```一下。\n\n```javascript\n/**\n * @param {moment.Moment} _startTime\n * @param {moment.Moment} _endTime\n * @returns {moment.Moment[]}\n */\nfunction getMonths(_startTime, _endTime) {\n\tconst startTime = _startTime.clone();\n\tconst endTime = _endTime.clone();\n\tconst times = [];\n\twhile (\n\t\tendTime > startTime ||\n\t\tstartTime.format('YYYYMM') === endTime.format('YYYYMM')\n\t) {\n\t\tconst month = startTime.startOf('month').clone();\n\t\ttimes.push(month);\n\t\tstartTime.add(1, 'month');\n\t}\n\treturn times;\n}\n\n/**\n * @param {moment.Moment} _startTime\n * @param {moment.Moment} _endTime\n * @returns {moment.Moment[]}\n */\nfunction getDays(_startTime, _endTime) {\n\tconst startTime = _startTime.clone();\n\tconst endTime = _endTime.clone();\n\tconst times = [];\n\twhile (\n\t\tendTime > startTime ||\n\t\tstartTime.format('YYYYMMDD') === endTime.format('YYYYMMDD')\n\t) {\n\t\tconst day = startTime.startOf('day').clone();\n\t\ttimes.push(day);\n\t\tstartTime.add(1, 'day');\n\t}\n\treturn times;\n}\n\n/**\n * @param {moment.Moment} startTime\n * @param {moment.Moment} endTime\n * @returns {moment.Moment[]}\n */\nfunction getWeeks(_startTime, _endTime) {\n\tconst startTime = _startTime.clone();\n\tconst endTime = _endTime.clone();\n\tconst times = [];\n\twhile (\n\t\tendTime > startTime ||\n\t\tstartTime.endOf('week').format('YYYYMMDD') ===\n\t\t\tendTime.endOf('week').format('YYYYMMDD')\n\t) {\n\t\tconst week = startTime.startOf('week').clone();\n\t\ttimes.push(week);\n\t\tstartTime.add(1, 'week');\n\t}\n\n\treturn times;\n}\n```\n\n另外， 用```moment```获取到的```unix```时间戳是秒级别的，而默认js处理```Date.now()```取到的是毫秒级别的，需要单独处理。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/11/04/Hurry-October-Summary.md","slug":"2018/11/04/hurry-october-summary","body":"\n# 匆忙的十月总结\n\n不知不觉，已经来深圳两个月了，今天爬南山的时候，还在感叹上个月的山竹台风，殊不知已经是大上个月的事情了。\n\n## 工作上\n\n工作上算是有点不舒心了，临时被调去前端那里辅助几个接口，因为不太了解项目，再加上前端那里也都是新人，最后竟变成了我熟悉项目完后指挥他们工作，出力不讨好啊。\n\n但是，还是总结了经验。\n\n1. 出问题马上提出来，如果答复慢的话，一定要记录，并且升级，不断重复跟进。\n\n2. 一定要通知全员跟进问题，小公司的迭代是以产品的进程计算的，任何部门的拖延都是自己的拖延。\n\n3. 不要考虑几个问题一起做，很有可能后面的问题做着做着就没了。\n\n4. 接口定义一定开会定，并反复确定接入方已经了解，这事情真是，手把手教接入方都能弄错的。\n\n另外，公司也不是没有问题，8012 年了，前后端分离还没做到，起码前端连简单的 mock 都不会做也是醉了，不过也反映了一个问题，我们天天嚷嚷前后端分离，真的做到分离的有几个呢？\n\n## 读书\n\n看完了《月亮和六便士》、《RxJS 深入浅出》，十一月买了一堆二手书，有的看了。\n\n## 英语\n\n完成了单词赌局，十一月继续每天早晨十分钟。\n\n## 新装备\n\n买了台酷比魔方 MixPlus，主要是原来 iwork8 实在到了退役年龄了，虽说 8 英寸很趁手，但 x86 真的带不动了，本来想买 surface 的，最后还是没舍得花钱，二手苏菲 3 貌似体验很差，这台是电磁屏，体验了下做笔记不错。\n\n## 口琴\n\n寻思买本口琴谱了，可惜谱子都放光盘的，不知道有没有电子版。\n\n## 生活\n\n十月玩得多了，整个十一，深圳是没少逛，南山区和福田区中心都去了，可惜没去成城市规划馆，来深圳前久仰大名啊，可是每次去都是闭馆。\n\n总算认识了三位室友，一位做投资，一位腾讯设计师，一位喵。\n\n## 十一月计划\n\n十一月做什么呢？真不好说，现在就想把代码先敲了，过几天补上，安～\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/11/16/A-magical-printing-character.md","slug":"2018/11/16/a-magical-printing-character","body":"# 神奇的打印字符\n\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/11/18/Shenzhen-Oil-Painting-Village.md","slug":"2018/11/18/shenzhen-oil-painting-village","body":"\n# 深圳油画村\n\n本来打算本周去广州的，结果周六中午起来的，算了，洗了衣服收拾下一天就结束了（天呐(＞﹏＜)）\n\n周六下雨换来了个晴朗的周日，干脆坐 3 号线去大芬村看看油画，反正小的时候就看过 NHK 的纪录片了。\n\n![大芬村车站](https://cdn.ruguoapp.com/FkVDtlzbYAH4UhMOaHsuLOzzjIDv.jpeg?imageMogr2/auto-orient/thumbnail/2000000@)\n\n别误会，大芬村确实是城中村，但是此村门口就有沃尔玛。。。这在俺们东北还是罕见的，毕竟东北还没多少实际上的城中村。\n\n![城中村一览](https://cdn.ruguoapp.com/Fp2p6VnaocSACFrttmiBA45Zl2cj.jpeg?imageMogr2/auto-orient/thumbnail/2000000@)\n\n其实深圳的城中村大部分不是如此，像这样的平房也就是艺术家能搞得出，真正的城中村真心压抑，楼与楼挨得很近，基本上都是 6,7 层的样子。\n\n![向日葵](https://cdn.ruguoapp.com/FgcZLXG-TLRb75li19mm7_SgwLuU.jpeg?imageMogr2/auto-orient/thumbnail/1999000@)\n\n![价格](https://ws1.sinaimg.cn/mw690/89d0a2e1gy1fxcmn8xgn4j23401k0npg.jpg)\n\n另外大芬村有一个油画馆是免费参观的\n\n![留言墙，据说明天就换了](https://cdn.ruguoapp.com/FoHC1z1XD8qt1aVdeOvcVy2BGUe6.jpeg?imageMogr2/auto-orient/thumbnail/2000000@)\n\n![装置](https://ws1.sinaimg.cn/mw690/89d0a2e1gy1fxcmmbsyxvg20gk09bx6q.gif)\n\n![](https://ws1.sinaimg.cn/mw690/89d0a2e1gy1fxcmnsxn3nj23401k0hdv.jpg)\n\n![](https://ws1.sinaimg.cn/mw690/89d0a2e1gy1fxcmo9gohaj21k03407wj.jpg)\n\n之后想去高交会，可惜到了已经快闭幕了，既然今年没 Intel 只有华为中兴国人自己玩，那就算了吧（只是安慰。。。）\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/11/24/The-group-building-in-Dapeng-Bay.md","slug":"2018/11/24/the-group-building-in-dapeng-bay","body":"\n# 大鹏湾里的团建\n\n## 到达\n\n没想到在车上就接到机器报警了，子和一下车就接上网修系统，辛苦了～\n\n## 航海捕鱼\n\n看起来很酷，其实我们大部分时间就是。。。额，坐着（自动化的时代啊）。\n\n## 返程的夕阳\n\n返程夕阳好美，不就我们捕到的海鲜就上桌了（话说应该不是我们捕上来的，毕竟我们捕的那么少）\n\n## 回到住所\n\n我们住在深圳鼓浪屿，回去之后有的人去打牌，有的人去烧烤，大中约我去跑步，我就应了，跑了大概 1KM 吧，找到个拍照圣地，反正人也少，我俩就拍起照来了。\n\nGet 到了新游戏，大富翁卡牌，强烈安利。\n\n## 卡丁车\n\nTeddy 的车技真不是盖的，全程最稳，车速，漂移一样不落。回车的时候别人告诉我，Teddy 是学开飞机的 666.\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/11/25/The-ancient-city-of-Nantou-and-Zhongshan-Park-in-the-rain.md","slug":"2018/11/25/the-ancient-city-of-nantou-and-zhongshan-park-in-the-rain","body":"\n# 雨中的南头古城和中山公园\n\n本来计划周末去南头古城的，可是下雨了，犹豫半天还是去了。\n\n南头古城是深圳里面的一个古城，虽然深圳城很新，难得挖出来个古城，一定很珍惜，所以又是城墙又是博物馆，里面还有个县衙门。可是别指望它能和平遥古城相媲美，就我看其实和蔚县古堡相比都差了点土味，毕竟都被翻了重建了。\n\n南头博物馆，免费取票，里面有介绍南头的历史，墙面很有趣，用蚝壳铺的墙。\n\n南头古城里面有个简阅书吧，文艺清新，又红又正。\n\n南头古城北面是个游乐场，空空的游乐场莫名的恐怖，再往北走就是中山公园了，别说，深圳这么拥挤的地方能给块地建这么个公园真心不易。\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2018/12/01/18.md","slug":"2018/12/01/18","body":"\n# 18 年最后一个总结和展望\n\n## 说说过去这个月吧\n\n我换平板了，跟了我 3 年的 iwork 8 终于被我宣判退休，没办法啊 x86 的系统，2GB 内存，32GB 的硬盘，实在不能支持现在的工作啊。\n\n新平板还是酷比魔方的，mix plus 虽说做工不怎么样，可是价格真香。128GB 硬盘，4GB 内存，电磁屏幕，重要的就是这个屏幕，1024 级压感，画画不在话下。\n\n除了平板，还要推荐一个网站，[all IT Ebooks](http://allitebooks.com/)，里面都是 manning 的书，一直更新到 2018 年。\n\n再安利一个软件，欧路词典，小伙伴拿它工作的，那个单词本不错，正好我可以按照看的书来分配单词本了。\n\n这个月去了大鹏湾团建，逛完了南头古城和油画村，读完了《上一堂好玩的日本学》。\n\n交了北北杳这个朋友～\n\n## 12 月\n\n18 年还有一个月了，这一年真的是充实，年中对下半年的计划基本是泡汤了。。。\n\n那么最后这个月做啥呢？ 既然下载了那么多 manning 的书，不如一本一本看起来，就从 syntax.fm 推荐的《react in action》开始吧。\n\n嚷嚷了那么久逛逛广东，这个月也该开始了，年中计划虽然没有达成，好歹年初的除了玩都差不多了（看来日语是真废了）。\n","collection":"blog","data":{"type":"post","category":"plan"}},{"id":"2018/12/02/The-Guangzhou-trip-without-a-guide.md","slug":"2018/12/02/the-guangzhou-trip-without-a-guide","body":"# 没做攻略的广州行\n\n## 广东省博物馆\n\n适逢很多馆维护，基本上也没看啥\n\n## 北京路\n\n老房子 + 人多\n\n## 地铁\n\n人多\n\n## 珠江新城\n\n碰巧灯光秀，人山人海，各种封路\n\n## 大沙头码头\n\n和柚子找来找去，终于找到个清闲地儿，从东湖大沙头码头坐船游珠江。\n\n## 上下九步行街\n\n大清早都不开门，等到十点才逐渐有人，吃了利航欧巴推荐的陈添记鱼皮（惊为天人地好吃～）\n\n## 城际返程\n\n和来一样79的城际高铁，将近两个小时就回南山啦。","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/12/04/Remember-the-lesson-of-a-cold.md","slug":"2018/12/04/remember-the-lesson-of-a-cold","body":"# 记一次感冒的教训\n\n以后每天要喝牛奶，任何能量饮料都比不上的牛奶啊！","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/12/16/postman-prescript.md","slug":"2018/12/16/postman-prescript","body":"# postman的prescript对异步代码支持不足\n\n用过postman做集成测试的话，有个prescript功能很不错，就是在执行发送请求之前要执行的脚本。\n\n我曾经以为这个prescript是直接运行的一个js脚本，执行完之后发送请求。但是貌似postman里面处理异步逻辑与v8有所不同。如果你想先发送一个POST请求，然后执行postman的PATCH请求，中间在加一个大概1s的delay，如下代码竟然能实现！\n\n```javascript\n// prescript\npm.sendRequest({...});\nsetTimeout(() => {}, 1000);\n```\n\n这个prescript其实是会对异步代码进行超时处理。无论是多层callback还是promise还是async，但唯独对setTimeout无效。\n\n```javascript\n// callbacks\npm.sendRequest({}, () => {\n    pm.sendRequest({}, () => { ... }); // 这一步回调可能会超时中断\n})；\n```\n\n```javascript\n// promise\nconst req = () => new Promise(res => {\n    pm.sendRequest({}, () => res());\n});\n\nPromise.resolve()\n    .then(req({ ... }))\n    .then(req({ ... }));// 这一步可能会超时中断\n```\n\n```javascript\n// async - await\nconst req = () => new Promise(res => {\n    pm.sendRequest({}, () => res());\n});\n~ async function() {\n    await req({ ... });\n    await req({ ... });// 这一步可能会超时中断\n} ();\n```\n\n因为只要setTimeout的timer不释放prescript就不会被超时中断，可以借助这一点防止prescript超时。\n\n```javascript\nconst TIME_OUT = 200;\nfunction stop() {\n    if (stop.done) {\n        return clearTimeout(stop.timer);\n    }\n    stop.timer = setTimeout(arguments.callee, TIME_OUT);\n}\nstop.done = false;\nstop.timer = setTimeout(stop, TIME_OUT);\n```\n\n想要停止代码的话，只需把stop.done设置为true就可以了。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2018/12/24/18.md","slug":"2018/12/24/18","body":"# 这可能是18年的最后一次出游了，香港，我来了！\n\n![去bilibili看吧](https://www.bilibili.com/video/av38877321/)","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2018/12/25/CSS.md","slug":"2018/12/25/css","body":"# 两个学习CSS布局的小游戏\n\n## Grid Layout\n\n[CSS Grid Garden](http://cssgridgarden.com)\n\n![CSS Grid Garden](http://ww1.sinaimg.cn/mw690/89d0a2e1gy1fyirzvparkj21mw0vkn3d.jpg)\n\n## Flexbox Layout\n\n[CSS Flexbox Froggy](https://flexboxfroggy.com/)\n\n![CSS Flexbox Froggy](http://ww1.sinaimg.cn/mw690/89d0a2e1gy1fyis1ajl89j21n20qcafs.jpg)","collection":"blog","data":{"type":"post","category":"fe"}}]}