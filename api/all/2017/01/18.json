{"posts":[{"id":"2017/01/18/PyQt-QML.md","slug":"2017/01/18/pyqt-qml","body":"\n> ç¿»äº†ç¿»ä»¥å‰ä¿å­˜çš„ä¹¦ç­¾ï¼Œå‘ç°äº†ä¸€ä¸ªpyQtå’ŒQMLçš„å¼€å‘æ€»ç»“ï¼Œä»£ç è·‘èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹é”™è¯¯ï¼Œä½†æ˜¯è¿˜æ˜¯æ¯”å®˜ç½‘çš„tutorialæ›´ç®€å•ç›´è§‚ä¸€ç‚¹ã€‚è¿˜èƒ½ä»é‡Œé¢æ‰¾ä¸€ç‚¹hybridå¼€å‘çš„ideaï¼ˆå› ä¸ºQMLå…¶å®ä¹Ÿæ˜¯ä¸€ç§ECMAScriptå¼•æ“å®ç°ï¼‰ã€‚\n\n# åœ¨QMLä¸Šä¸‹æ–‡æ’å…¥å˜é‡\n\nåœ¨```view.setSource```ä¹‹å‰å°†å˜é‡æ’å…¥ä¸Šä¸‹æ–‡ä¹‹ä¸­ã€‚\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\n\nrootCtx = view.rootContext()\nrootCtx.setContextProperty(\"textData\", \"hi\")\n\nview.setSource(QUrl('ctxProp.qml'))\nview.show()\n\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    id: test\n\n    width: 1000; height: 300\n\n    Text {\n        \n        anchors.fill: parent;\n        text: textData\n    }\n}\n```\n\n# PyQtä¿®æ”¹QMLä¸­å˜é‡\n\nè¿™æ ·å¯ä»¥å…ˆåŠ è½½qmlå†ä¿®æ”¹å†…éƒ¨çš„å€¼ï¼Œæ³¨æ„```property```åé¢æ˜¯æœ‰ç±»å‹çš„ã€‚\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\nview.setSource(QUrl('./ownProp.qml'))\n\nrootObj = view.rootObject()\nrootObj.setProperty(\"textData\", 'hi')\n\nview.show()\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    width: 1000\n    height: 300\n    id: test\n    \n    property string textData;\n\n    Text {\n        \n        anchors.fill: parent;\n        text: textData;\n    }\n    \n}\n```\n\n# æ¶ˆæ¯ä¼ é€’\n\nQTæœ€ä¸»è¦çš„å°±æ˜¯å®ƒçš„ä¿¡å·æ§½æœºåˆ¶ï¼Œå¯¹æˆ‘çš„å½±å“ä¹Ÿå¾ˆå¾ˆå¤§ï¼Œä»¥è‡³äºæˆ‘ç°åœ¨çš„ç»„ä»¶å¼€å‘ä¹Ÿåœ¨ç”¨è¿™ä¸€å¥—æ€ç»´ã€‚é‚£ä¹ˆQTæ€ä¹ˆå’ŒQMLå†…éƒ¨è¿›è¡Œæ¶ˆæ¯ä¼ é€’å‘¢ï¼Ÿ\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\nview.setSource(QUrl('./signal.qml'))\n\ndef on_click():\n    print(\"hi\")\n\nrootQbj = view.rootObject()\nrootQbj.mclicked.connect(on_click)\nrootQbj.setProperty('name','hello')\nview.show()\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    width: 1000\n    height: 300\n    id: test;\n    signal mclicked;\n    property string name;\n    \n\n    Text {\n        anchors.fill: parent;\n        text: name\n    }\n\n    MouseArea {        \n        anchors.fill: parent\n\n        onClicked: {\n            mclicked();\n        }\n    }\n    \n}\n\n```\n\n# è°ƒç”¨QMLå†…éƒ¨å‡½æ•°\n\n```python\nfrom PyQt4.QtDeclarative import QDeclarativeView\nfrom PyQt4.QtGui import QApplication\nfrom PyQt4.QtCore import QUrl\n\napp = QApplication([])\n\nview = QDeclarativeView()\nview.setSource(QUrl('./interface.qml'))\n\ndef on_click():\n    rootObject.set_text('Clicked')\n\nrootObject = view.rootObject()\nrootObject.mclicked.connect(on_click)\n\nview.show()\napp.exec_()\n```\n\n```qml\nimport Qt 4.7\n\nRectangle {\n    width: 1000\n    height: 300\n    color: \"transparent\"\n    id: test\n    signal mclicked\n    Text {\n        id: testText\n        \n        anchors.fill: parent\n        \n        text: \"Click Me\"\n    }\n    MouseArea {\n        anchors.fill: parent\n        onClicked: {\n            mclicked();\n        }\n    }\n    function set_text(text) {\n        testText.text = text\n    }   \n}\n```\n\nå°±é…±ï¼Œåé¢å†å†™ä¸€ç¯‡QMLè°ƒç”¨jsçš„æ–‡ç« å§ğŸ¤”ã€‚","collection":"blog","data":{"type":"post","category":"tech"}}]}