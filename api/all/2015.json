{"posts":[{"id":"2015/02/08/haha.md","slug":"2015/02/08/haha","body":"#华语情歌\n> 你不爱我，我明白的，可是我的心情，好低落～～～～\n\n#欧美流行\n> 你不爱我，你特么彪吗？你爱那个碧池，你特么瞎吗？\n\n#朋克摇滚\n> 都尼玛不爱我！都尼玛不要我！\n\n#印度音乐\n> 不爱就不爱吧～大家一起跳起来～","collection":"blog","data":{"type":"post","category":"music"}},{"id":"2015/02/08/jQuery.md","slug":"2015/02/08/jquery","body":"\n#jQuery.fn.init()\n>   接收三个参数，selector,context,rootjQuery\n\n默认的$()传的值实际上考虑了很多种情况，下面是返回值\n\n1. false,undefined,null\n    \n        return this;\n2. node节点\n        \n        this.context = this[0] = selector;\n        this.length = 1;\n        return this;\n        \n3. \"body\"\n\n        this.context = document;\n        this[0] = document.body;\n        this.selector = selector;\n        this.length = 1;\n        return this;\n        \n4. 字符串，单独标签&lt;tag&gt;&lt;/tag&gt;\n\n        document.createElement;\n        return jQuery.merge(this,selector)\n        \n5. 字符串，复杂的HTML代码&lt;span class=\"a\" &gt;\n\n        jQuery.buildFragment;\n        return jQuery.merge(this,selector)\n        \n6. 字符串，#id\n        \n        document.getElementById;\n        this.context = document;\n        this.selector = selector;\n        return this;\n        \n7. 字符串，选择器\n\n        return jQuery.find(selector);\n        \n8. 字符串，选择器，context传值为$(...)\n\n        return context.find(selector);\n        \n9. 字符串，选择器，context传值为非jquery对象\n\n        return this.constructor(context).find(selector);\n    \n    > 7、8、9可以写成\n        return (context || rootjQuery).find(selector);\n        \n10. 函数\n    \n        return rootjQuery.ready(selector);\n        \n11. jquery对象//深拷贝\n\n        this.selector = selector.selector;\n        this.context = selector.context;\n        \n12. 其它\n\n        return jQuery.makeArray(selector,this);\n\n        \n        ","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/02/17/ArchLinux-bug.md","slug":"2015/02/17/archlinux-bug","body":"\n#ArchLinux升级搜狗输入法有bug的解决方案\n\n>不久前升级了搜狗输入法，因为据说这次升级性能提高了不少，更新了之后，确实啊！但是没意识到的是，出来了一堆bug。\n\n升级AtomEditor到0.177竟然不能使用中文了T.T还以为是个bug[#5447](https://github.com/atom/atom/issues/5447#issuecomment-74660587)，因为当时觉着chrome也没问题啊（其实有问题，地址栏输入太快的时候会发生错乱>.<，比如输baidu.com会变成badiu.cmo，奇葩啊）。\n\n##出问题的特征：\n* AtomEditor不能输入中文\n* SublimeText（打了补丁之后）不能输入中文\n* Chrome/Chromium地址栏输入有时会发生错乱\n\n##解决方案：\n实际上也是自己粗心，运行下面，马上就知道问题在哪了。\n\n    $ fcitx-diagnose\n    \n升级sogou的时候，输入法环境变量被改成Xim了，不知道在别的系统上面咋样，但这些变量在Arch上得是fctix，所以修改一下~/.xprofile。\n\n    export GTK_IM_MODULE=fcitx\n    export QT_IM_MODULE=fcitx\n    \n没问题啦～\n\n##后记\n编辑器不好使的那段时候，我改用了Brackets，很棒的编辑器，做整个项目的时候很好使，而且速度比atom、sublime都快。\n\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2015/02/17/pacman.md","slug":"2015/02/17/pacman","body":"\n\n#pacman改下载器\n\npacman默认使用wget下载，没说wget不好，在家里面总是断，所以改成aria2了\n\n## 移除未安装的包\n\n    # pacman -Sc\n    \n## 使用aria2 代替 wget\n\n    # pacman -S aria2\n    \n## 修改/etc/pacman.conf\n\n    XferCommand = /usr/bin/aria2c --allow-overwrite=true -c --file-allocation=none --log-level=error -m2 --max-connection-per-server=6 --max-file-not-found=5 --min-split-size=5M --no-conf --remote-time=true --log=- --summary-interval=60 -t5 -d / -o %o %u\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2015/03/14/LearningInThreeJS-1.md","slug":"2015/03/14/learninginthreejs-1","body":"\n# LearningInThreeJS\n## （一）基本之基本\n\n> 这些是嚼the Packt book \"Learning Threejs\"出来的一些干货，捡了些觉得可学的代码放到我的myExpirements下面的learning-in-threejs分支里面了。\n\n### 1. 简单实现(basic.html)\n\nhttps://github.com/gongbaodd/myExperinments/blob/learning-threejs/01-basic.html\n\n* 必须要有的\n\n        var scene = new THREE.Scene();\n        var camera = new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);\n        var renderer = new THREE.WebGLRenderer();\n        document.getElementById(\"WebGL-output\").appendChild(renderer.domElement);\n        \n* 坐标帮助\n\n        var axes = new THREE.AxisHelper(20);\n        scenne.add(axes);\n        \n* initStates\n\n        ()=>\n            var stats = new Stats();\n\n                stats.setMode(0);\n\n                stats.domElement.style.position = 'absolute';\n                stats.domElement.style.left = '0px';\n                stats.domElement.style.top = '0px';\n\n                document.getElementById(\"Stats-output\").appendChild(stats.domElement);\n\n                return stats;\n                \n* onResize()\n\n        window.addEventListener('resize',onResize,false);\n        \n* controller\n\n            var controls = new function () {\n                this.rotationSpeed = 0.02;\n                this.bouncingSpeed = 0.03;\n            };\n\n            var gui = new dat.GUI();\n            gui.add(controls,'rotationSpeed',0,0.5);\n            gui.add(controls,'bouncingSpeed',0,0.5);\n\n### 2. 场景Scene\nhttps://github.com/gongbaodd/myExperinments/blob/learning-threejs/02-scene.html\n    \n        var scene = new THREE.Scene();\n            scene.fog = new THREE.Fog(0xffffff,0.015,100);\n            scene.overrideMaterial = new THREE.MeshLambertMaterial({color:0xffffff});\n            \n### 3. 内置几何图形 \nhttps://github.com/gongbaodd/myExperinments/blob/learning-threejs/03-geometery.html\n\n### 4. 拼装几何图形\nhttps://github.com/gongbaodd/myExperinments/blob/learning-threejs/04-basic-geometry.html\n\n### 5. 网格操作\nhttps://github.com/gongbaodd/myExperinments/blob/learning-threejs/05-mesh.html\n\n### 6. 摄像头操作\nhttps://github.com/gongbaodd/myExperinments/blob/learning-threejs/06-camera.html","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/03/15/THREE.JS.md","slug":"2015/03/15/threejs","body":"\n#THREE.JS参数记录\n## Renderer\n\n    var renderer = new THREE.WebGLRenderer({\n        canvas:document.getElementById('WebGL-output')\n    });\n    \n    //or\n    \n    document.getElementById('WebGL-output').appendChild(renderer.domElement);\n    \n### setClearColor\n\n    renderer.setClearColor(new THREE.Color(0x000000,1.0));\n    \n### Others\n\n    renderer.shadowMapEnabled = true;\n    renderer.setSize(w,h);\n    \n***\n\n## Scene\n\n    scene.add(mesh);\n        \n    scene.fog = new THREE.Fog(0xffffff,near,far);\n        \n***\n\n## Camera\n\n    THREE.OrthgraphicCamera(left,right,top,bottom,near,far);\n    \n    THREE.PerspectiveCamera(fov,//45\n                            width/height,\n                            near,\n                            far);\n                            \n***\n\n## Geometry\n\n* Cube\n\n        THREE.CubeGeometry(width, height, depth, widthSegments, heightSegments, depthSegments)\n    \n* Plane\n\n        THREE.PlaneGeometry(width, height, widthSegments, heightSegments)\n        \n* Sphere\n\n        THREE.SphereGeometry(radius, segmentsWidth, segmentsHeight, phiStart, phiLength, thetaStart, thetaLength)\n\n        ","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/03/21/Don't Starve console.md","slug":"2015/03/21/dont-starve-console","body":"\n#《饥荒》作弊,顺便学习lua\n\n1. 打开Console\n\n    在～下面找DoNotStarve/settings.ini修改。\n\n        ENABLECONSOLE = false\n        \n2. 游戏中点～键打开console。\n    \n        GetPlayer().components.builder:GiveAllRecipes() ---------- 全物品直接制造\n        GetPlayer().components.hungerause(true) ---------- 饥饿值不降低\n        GetPlayer().components.sanity:SetMax(500) ---------- 精神值不降低(慎用不可取消 )\n        GetPlayer().components.health:SetMaxHealth(300) ---------- 最大血格\n        GetPlayer().components.health:SetInvincible(true) ---------- 上帝模式\n\n        minimap = TheSim:FindFirstEntityWithTag(\"minimap\")--------------|\n        minimap.MiniMap:ShowArea(0,0,0, 10000)----------- 开全地图，要输入2个指令才行\n        \n        for var x=1,1,10 do DebugSpawn(\"pigman\") end -------------------出现十个猪人\n        \n        \n        \n        \n        \n        \n\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2015/03/28/Bohai-Rim.md","slug":"2015/03/28/bohai-rim","body":"\n# 环渤海之行\n\n棒棰岛 9:00 ～ 15:30 烟台 ===================3.30 15:30 180 元\n31 路 职工街 50min\n烟台到蓬莱的长途汽车 烟台北马路汽车站蓬莱 05:30-18:20 18 元 1:30 ==3.30 18:00 18 元\n蓬莱小石岛青年公寓 ========================= 40 元\n蓬莱阁 =====================3.31 7:00 70 元\n八仙过海，三仙山 ========================== 60 元\n蓬莱到青岛 5:20~16:00 ========================= 82 元\n青岛 798 国际青年旅社海景店 X2 ===================3.31 20:00\n八大关、栈桥 ====================4.1 7:00\n休息一晚 ======================\n青岛-泰安 可以坐高铁 200 元 =================================4.2 12:00\n泰山 k37 路 ==================================4.2 14:00\n红门国际青年旅舍  \n泰山 ====================================4.2 15:00 60 元\n泰安-曲阜 ===========================================4.3 10:11 ～ 11:34\n三孔 ============================================13:00\n曲阜-济南 可以坐高铁 29 元 =================================4.3 21：57 ～ 22:35\n济南站 101  \n7 天连锁酒店(济南趵突泉店)x2 93 元 ==================================4.3\n芙蓉街 4.3\n趵突泉、黑虎泉 4.4\n大明湖 4.5 =========================================4.5 12:00\n济南-天津 149 ======================================================= 11:45\n天津，有时间查查http://dwz.cn/F14LW\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2015/04/12/Apocalypse-of-the-Bohai-Sea.md","slug":"2015/04/12/apocalypse-of-the-bohai-sea","body":"\n# 环渤海故事之行\n\n> 恕我没有坚持写这些博客，今天是。。。额。。。5 月 3 日。。。好吧，把时间退回去，回忆一下这一周的旅行。\n\n## 第一天\n\n---\n\n**_3 月 30 日_**\n\n起的一个大早前往大连东港，目的就是赶上早上九点的棒棰岛号游轮，话说，作为一个大连人，这还是头一次坐游轮，虽然海路已经不是最方便的现代交通方式了，窃以为一生还是有一次航海的经历也是极好哒～\n\n大连东港是个好多大连人都陌生的地方，没错，这个曾经让世界以为要成为国际港口的大连港因为各种新兴交通方式已经冷落太久了，三月份的海风还是令人瑟瑟发抖，再加上这些俄式建筑更是给这个地方添加了不少冷清。\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2015/05/04/ionic.md","slug":"2015/05/04/ionic","body":"\n#ionic的安装配置的坑\n>前一阵子react-native很火，甚是嫉妒啊，目前只支持iOS。。。T_T<br>\n不必要一直追求native，（虽然我还是试验了nativescript），在安卓上面还是可以尝试写写hybrid应用。\n\n---\n1. 安装ionic，安装android-sdk-r22（可以用hx.gy:1080代理）\n\n        npm install -g cordova ionic\n        \n2. 创建一个空/标签/侧边栏工程\n\n        ionic start myApp blank/tabs/sidemenu\n        \n3. 运行\n\n        cd myApp\n        chmod 777 * -R\n        ionic platform add android\n        ionic build android\n        ionic run android\n        \n4. 用浏览器测试\n\n        ionic serve","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/05/04/nativescript.md","slug":"2015/05/04/nativescript","body":"\n#nativescript试探报告\n>上一周得流感，再加上react-native只支持iOS，头脑一热，除了研究了ionic，还看了nativescript。感觉吧，nativescript比起QML之类的语言，最大的优点就是不必再去学习一门新的语言，因为它不是js的超集，而是完全的js，并且支持双向绑定，完全迎合现在的web开发。<br>\n用完nativescript有这么几个感受：<br>\n1. 用telerik platform ide感觉还是不错的，在安卓安装app可以同步更新软件，可惜这个ide只能使用30day。\n2. 官方给的文档经过证实已经部分过期。。。我只能拿现成的project当例子。\n3. css使能够用的，但是和react-native一样，都是真正的css的子集。\n4. 安卓上的性能不比hybrid好，等更新吧～\n5. 不用像QML一样，的确是mvvm，顶多需要学学安卓里面的xml就好了。\n6. cli需要<font color=red>翻墙！！！</font>\n\n***\n1. 安装nativescript,安卓需要r17\n\n        npm install -g nativescript\n        \n2. 创建工程\n\n        tns create app\n        \n3. 添加安卓支持\n\n        tns platform add android\n        \n4. 编译及调试\n\n        tns build android\n        tns run android","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/05/09/ionic-Todo guide.md","slug":"2015/05/09/ionic-todo-guide","body":"\n#ionic官方Todo Guide\n>代码在<br>https://github.com/gongbaodd/myExperinments/tree/ionic_todo\n一直想写一个app，但是懒得设计，看到ionic官方有个guide而且没有中文版，所以写一个。\n\n---\n1. 在head中添加对应的css和js\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width\">\n        <title></title>\n        <link href=\"lib/ionic/css/ionic.css\" rel=\"stylesheet\">\n        <link href=\"css/style.css\" rel=\"stylesheet\">\n        <script src=\"lib/ionic/js/ionic.bundle.js\"></script>\n        <script src=\"cordova.js\"></script>\n        <script src=\"js/app.js\"></script>\n        \n2. body添加controller\n        <body ng-app=\"todo\" ng-controller=\"TodoCtrl\">\n        \n3. Todo的界面，分别是左边栏（负责分配todo的类型——projects）和主界面（负责分配每一个todo项——tasks）\n        <ion-side-menus>\n            <ion-side-menu-content>...</ion-side-menu-content>\n            <ion-side-menu side=\"left\">...</ion-side-menu>\n        </ion-side-menus>\n      \n4. Todo的行为\n        angular.module('todo',['ionic'])\n        .factory('Projects',function() {\n            ...\n        }）\n        .controller('TodoCtrl',function($scope,$timeout,$ionicModal,Projects,$ionicSideMenuDelegate) {\n            ...\n        })\n\n5. 左边栏结构\n        <ion-header-bar class=\"bar-dark\">\n            <h1 class=\"title\">Projects</h1>\n            <button class=\"button button-icon ion-plus\" ng-click=\"newProject()\"></button>\n        </ion-header-bar>\n        <ion-content scroll=\"false\">\n            <ion-list>\n                <ion-item ng-repeat=\"project in projects\" ng-click=\"selectProject(project,$index)\" ng-class=\"{active:activeProject == project}\">\n                    {{project.title}}\n                </ion-item>\n            </ion-list>\n        </ion-content>\n        \n6. 左边栏行为\n        .factory('Projects',function() {\n        return {\n            all:function(){\n                var projectString = window.localStorage['projects'];\n                if(projectString){\n                    return angular.fromJson(projectString);\n                }\n                return [];\n            },\n            save:function(projects){\n                window.localStorage['projects'] = angular.toJson(projects);\n            },\n            newProject:function(projectTitle){\n                return {\n                    title:projectTitle,\n                    tasks:[]\n                };\n            },\n            getLastActiveIndex:function(){\n                return parseInt(window.localStorage['lastActiveProject'])||0;\n            },\n            setLastActiveIndex:function(index){\n                window.localStorage['lastActiveProject'] = index;\n            }\n        }\n        })\n        \n7. 主界面结构\n        <ion-header-bar class=\"bar-dark\">\n            <h1 class=\"title\">Todo</h1>\n            <!--                New Task button-->\n            <button class=\"button button-icon\" ng-click=\"newTask()\">\n                <i class=\"icon ion-compose\"></i>\n            </button>\n        </ion-header-bar>\n        <ion-content scroll=\"false\">\n        <!--                our list and list items-->\n            <ion-list>\n               <ion-item ng-repeat=\"task in activeProject.tasks\">\n                   {{task.title}}\n               </ion-item>\n            </ion-list>\n        </ion-content>\n        \n8. 主界面行为\n        .controller('TodoCtrl',function($scope,$timeout,$ionicModal,Projects,$ionicSideMenuDelegate) {\n    \n        var createProject = function(projectTitle){\n            var newProject = Projects.newProject(projectTitle);\n            $scope.projects.push(newProject);\n            Projects.save($scope.projects);\n            $scope.selectProject(newProject,$scope.projects.length-1);\n        }\n    \n        $scope.projects = Projects.all();\n    \n        $scope.activeProject = $scope.projects[Projects.getLastActiveIndex()];\n    \n        $scope.newProject = function() {\n            var projectTitle = prompt(\"Project name\");\n            if(projectTitle){\n                createProject(projectTitle);\n            }\n        };\n    \n        $scope.selectProject = function(project,index){\n            $scope.activeProject = project;\n            Projects.setLastActiveIndex(index);\n            $ionicSideMenuDelegate.toggleLeft(false);\n        };\n    \n        $ionicModal.fromTemplateUrl('new-task.html',function(modal) {\n            $scope.taskModal = modal;\n        },{\n            scope:$scope,\n            animation:'slide-in-up'\n        });\n    \n        $scope.createTask = function(task) {\n\n            if(!$scope.activeProject||!task){\n                return ;\n            }\n            $scope.activeProject.tasks.push({\n                title:task.title\n            });\n            $scope.taskModal.hide();\n        \n            Projects.save($scope.projects);\n        \n            task.title = \"\";\n        };\n    \n        $scope.newTask = function() {\n            $scope.taskModal.show();\n        };\n        $scope.closeNewTask = function() {\n            $scope.taskModal.hide();\n        };\n        $scope.toggleProjects = function() {\n            $ioncSideMenuDelegate.toggleLeft();\n        };\n    \n        $timeout(function() {\n            if($scope.projects.length == 0){\n                while(true){\n                    var projectTitle = prompt('Your first project title');\n                    if(projectTitle){\n                        createProject(projectTitle);\n                        break;\n                    }\n                }\n            }\n        })\n        });\n        \n9. 新建项目的模态对话框\n        <script id=\"new-task\" class=\"html\" type=\"text/ng-template\">\n            <div class=\"modal\">\n            <!--        Modal header bar-->\n                <ion-header-bar class=\"bar-secndary\">\n                    <h1 class=\"title\">New Task</h1>\n                    <button class=\"button button-clear button-positive\" ng-click=\"closeNewTask()\">Cancel</button>\n                </ion-header-bar>\n                <!--        Modal content area-->\n                <ion-content>\n                    <form action=\"\" ng-submit=\"createTask(task)\">\n                        <div class=\"list\">\n                        <label for=\"\" class=\"item item-input\">\n                            <input type=\"text\" placeholder=\"What do you need to do?\" ng-model=\"task.title\">\n                        </label>\n                        </div>\n                        <div class=\"padding\">\n                            <button type=\"submit\" class=\"button button-block button-positive\">Create Task</button>\n                        </div>\n                    </form>\n                </ion-content>\n            </div>\n        </script>","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/05/30/Climbing-Blue-Harm-Network.md","slug":"2015/05/30/climbing-blue-harm-network","body":"\n#爬蓝调口琴网\n>论文写好了就没事干了，本来想去旅游，完蛋流量没了，所以静下心来学学口琴，网上有个蓝调口琴网挺好哒，想写个应用装手机里，先讲讲怎么爬吧。\n\n主要还是用了request模块，然而由于网站用的是GBK编码，还需要iconv-lite、bufferhelper。\n\n    function get(url,callone,calltwo){\n        var req = request(url, {timeout: 10000, pool: false});\n        req.on('error', function(err) {\n            console.log(err);\n        });\n        req.on('response', function(res) {\n            var bufferHelper = new BufferHelper();\n            res.on('data', function (chunk) {\n                bufferHelper.concat(chunk);\n            });\n            res.on('end',function(){\n                var result = iconv.decode(bufferHelper.toBuffer(),'GBK');\n                callone(result,calltwo);\n            });\n        });\n    }\n    \n爬到了网页，用jquery来读里面的东西，用node-jquery就OK了\n\n    var env = require('jsdom').env;\n    env(html,function(err,window){\n        var $ = require('jquery')(window);\n    })\n    \n这个脚本用了特愚蠢的字符串拼json的方法。。。所以趁脚本结束前还得把json封闭了。\n\n    process.on('exit',function(){\n\t   fs.appendFileSync(FILE,'/b]}');\n    })","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2015/08/18/B.md","slug":"2015/08/18/b","body":"\n# 琼 B 之行\n\n> 好久没写博客了，感觉去了去哪儿每天都很充实，但是确实很艰辛。从七月入职开始貌似就和休息断了关系。今天打开 Contributions 发现已经白了一半，汗！谈谈最近发生的事吧，最应该提的就是这次三亚 TB。\n\n## 出发\n\n在自己公司定了张自由行的票（毕竟能报销嘛），还挺实惠的两千多，四级海景房，来回机票。\n遗憾的是得在洛阳经停。\n\n## 8 月 13 日，跨天\n\n住在慈寿寺的缺点就是离机场太远，所以 13 号和小伙伴在公司里蹭睡了。\n还好，公司里有浴室，所以出行也不太狼狈，临走前，把代码匆匆理好了。\nPM 也是，明明知道我要出去，还给我留了个需求。\n\n## 8 月 14 日，大东海\n\n四点半，在休息室把红旗和波波叫醒，出发去机场，能蹭一顿\n早餐和午餐，所以这次飞行是这样：\n\n<center>上飞机->起飞->吃->降落经停->上飞机->起飞->吃->降落到达</center>\n大概下午两点我们到了天空比北京蓝上N倍的三亚（不要问我为什么带偏光镜，穷，买不起墨镜）\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcern5sufj21kw16rnkw.jpg\">\n坐当地人的接送车到了三亚玉华苑酒店，看看表已经是16点了。好在我们就在大东海边上，直接去了。\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcf18um67j21kw16r1kx.jpg\">\n雷神雷照片一张\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcf19fnq0j21kw1644hk.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjywfz7ej216o1kwdvc.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evfz20ngz0j20xm0luq7a.jpg\">\n肉照一张，搭讪求速，男女不限\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1jw1ev9dnjxy3lj20m80bewfi.jpg\">\n\n## 8 月 15 日 槟榔谷+呀诺达\n\n早上 6 点，从酒店出来晨跑，中国偏西就是好，日出都那么晚。大东海偏东南，看不到海上日出。但有一处是可以看到太阳从海对面山上出来，还算是壮观吧。早晨看到一些人在海上冲浪，嘻嘻。\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcfapzum6j21kw164wrq.jpg\">\n呀诺达班车不给力，预约电话打不通，我们提前一天预约的酒店的车\n还很划算，300 块可以随便挑地方，还免费导游合计合计还比班车便宜。\n\n### 槟榔谷\n\n早上 8 点出发，到了槟榔谷看祭火仪式\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcfiea3ezj21kw16o1kx.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcfqx8p2oj21kw164npd.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcfqtrasej21kw164hdt.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcfqrrk73j21kw164khz.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcfqqnc9xj21kw1647wh.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcfqopqepj21kw1644oe.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcfqnff26j21kw164e81.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcfqsr7n3j21kw164tuy.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcfquzh6nj21kw164e81.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcfqphqwaj21kw16rx4m.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcfqw2me9j21kw16r1kx.jpg\">\n\n### 呀诺达\n\n呀诺达海南话是 123 的意思，呀诺达风景区是一片热带雨林，有三个谷区\n我们去的时候一个谷区关闭，雨林谷风景美，梦幻谷需要另外交钱，但是有游玩项目，\n就是简单的素质拓展训练什么的，因为我去了梦幻谷，怕把手机掉了，就没拍多少照片。\n\n雨林谷因为同行梦幻谷的同事累了没去成，传几张别人的照片吧~\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcg1t9ed4j21kw16owy2.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcg5gubr2j21kw16oe2a.jpg\">\n下面是梦幻谷了\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evciasyo66j21kw16r1kx.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evciau3umtj21kw164b29.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evciaux9ipj21kw16rquv.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evciaw32guj21kw164e81.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evciax2m9yj21kw16r1kx.jpg\">\n\n## 8 月 16 日 蜈支洲岛、免税店\n\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcihwz7mtj21kw164b29.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcihxyv8yj21kw1644qp.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcihyutj2j21kw164qjk.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjp0vicbj216o1kw4mh.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcihzv7dyj21kw1641kj.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcii0onc7j21kw1641ki.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcii1so1jj21kw1641kx.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcii2opawj21kw164e5t.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcii3rkmqj21kw1644qp.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcii4rmgej21kw164e81.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcii5zyk0j21kw164nnb.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcii6wjstj21kw1644qp.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcii7wp8tj21kw1647w7.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcii8q7hpj21kw16r1gw.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcii9mvnpj21kw16r7v8.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcj4khbq2j21kw16odyz.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjp1tgs2j21kw16o7wh.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcjp3gtqvj21kw16o4qp.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcj4lci55j21kw16rnop.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcj4m8ehij21kw1641if.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4n42sij21kw164hd3.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcj4o4h30j21kw16rnks.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcj4oyx9aj21kw16rnoy.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4pzqlej21kw1641jj.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4r8fftj21kw164e81.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4s60vaj21hs1zkkjl.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcj4t3nmfj21kw1644lw.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4vkj88j21kw24thdu.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4wt0y1j21kw1641kx.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4xo4dej21kw1644mr.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcj4yg9yyj21kw1641gv.jpg\">\n\n## 8 月 17 日 南山寺+西岛\n\n早晨沿着另一个方向晨跑到了半山半岛，拍了几张照\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcjh38uadj21kw1647k3.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjh41ozcj21kw164nk0.jpg\">\n前往南山寺看 108m 南海观音\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjkhx5rdj21kw16r1kx.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjkitjocj21kw16r1kx.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjkjq6s2j21kw16r7t0.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjkkmz16j21kw164wvc.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjscrohwj216o1kwwtq.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjsdw6w5j21kw16oke4.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjklrl7uj21hs1zkhdt.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjkncdbcj21kw164e81.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcjko3ocmj21kw164tot.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjkp0mnfj21kw1644qp.jpg\">\n雷神表情\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcjv1o6cpj21kw16oayg.jpg\">\n西岛\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjys2g91j21kw164ayl.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcjyt2ctmj21kw16odxd.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcjyr7ej7j21kw16ondg.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcjyq48zoj21kw16odxw.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcjyu60stj21kw16o1kx.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcjyvjtx5j21kw16ob29.jpg\">\n吃饭的地方很文艺，在“大菠萝”里面\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evckuql1trj20qb0zkq4q.jpg\">\n\n## 8 月 18 日 鹿回头+回家\n\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evckuq2z05j20zk0qb78c.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evckupdrb5j20zk0qbjvn.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evckuow553j20zk0qbmyn.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcku41j12j20zk0qbadt.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcku3im4pj20zk0qpacm.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcku2rrm0j20zk0qbjtu.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcku20kz1j20zk0ptgq4.jpg\">\n<img src=\"http://ww3.sinaimg.cn/mw690/89d0a2e1gw1evcku1clb2j20zk0qbteu.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcku0qo9vj20zk0qbjx8.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcku04nz7j20zk0qbjuv.jpg\">\n<img src=\"http://ww1.sinaimg.cn/mw690/89d0a2e1gw1evcktzc7dgj20zk0a2tc8.jpg\">\n<img src=\"http://ww2.sinaimg.cn/mw690/89d0a2e1gw1evcktyvt3wj20zk0qbmzm.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcktx63crj20qn0hsq4r.jpg\">\n<img src=\"http://ww4.sinaimg.cn/mw690/89d0a2e1gw1evcktwkzutj20qn0hs761.jpg\">\n","collection":"blog","data":{"type":"post","category":"travel"}},{"id":"2015/08/23/PebbleJS-pebble.md","slug":"2015/08/23/pebblejs-pebble","body":"\n>这个月初，任性买了刚发布的pebble time，一直还没写个应用，这个周末抽出时间看看。\n\n# 开头\n\npebble的应用可以用C和Node开发，开发工具也可以使用[cloudpebble](https://cloudpebble.net/)（墙内用户伤不起）或者下载sdk离线开发。\n\n# 安装SDK\n\nmac安装pebble sdk太简单了\n\n```\nbrew install pebble/pebble-sdk/pebble-sdk\n```\n\n网路顺畅的话，安装就完成了。\n\n# 建立PebbleJS工程\n\n离线建C项目只要运行```pebble new-project xxx```就好，但是js项目需要把github上的项目https://github.com/pebble/pebblejs.git clone下来\n\n```\ngit clone https://github.com/pebble/pebblejs.git\n```\n# 文件目录\n\npebble应用的配置文件在appinfo.json里面，逻辑代码都写在src下的js/app.js里\n\n# UI module\n\n引入ui模块\n\n```\nvar ui = require('ui');\n```\n\n## Window\n\n```\nvar wind = new UI.Window({\n  fullscreen: true,\n});\nwind.show();\n```\n\n效果如图：\n\n<img src=\"https://developer.getpebble.com/assets/images/getting-started/watchface-tutorial/1-blank.png\">\n\n## Card\n\n创建一个卡片\n\n    // Create a Card with title and subtitle\n    var card = new UI.Card({\n        title:'Weather',\n        subtitle:'Fetching...'\n        });\n\n    // Display the Card\n    card.show();\n\n    card.on('click', 'up', function(e) {\n        /*上键事件*/\n        })\n    card.on('click', 'select', function(e) {\n        /* 中键事件*/\n        })\n    card.on('click', 'down', function(e) {\n        /*下键事件*/\n        })\n\n\n效果如图\n\n<img src=\"https://developer.getpebble.com/assets/images/getting-started/pebble-js-tutorial/1-fetching.png\">\n\n>Card还有body和icon属性\n\n## Menu\n\n    var resultsMenu = new UI.Menu({\n        sections: [{\n            title: 'Current Forecast',\n            items: [{\n                title: 'Clear',\n                subtitle: '11-05 21:00'\n                }]\n            }]\n        });\n\n        resultsMenu.on('select', function(e)    {\n            console.log('Selected item #' + e.itemIndex + ' of section #' + e.sectionIndex);\n            console.log('The item is titled \"' + e.item.title + '\"');\n        });\n\n        // Show the Menu\n        resultsMenu.show();\n\n\n<img src=\"https://developer.getpebble.com/assets/images/getting-started/pebble-js-tutorial/2-menu.png\">\n\n# 编译\n\n```\npebble build\n```\n\n#安装\n\n```\npebble install --phone 192.168.1.107//你的手机ip，记得打开pebble的调试模式\n```\n","collection":"blog","data":{"type":"post","category":"tech"}},{"id":"2015/08/25/fekit extension.md","slug":"2015/08/25/fekit-extension","body":"\n> 这几天公司里面的 QA 资源紧张，手上压了 4 个分支还没有发布，\n> 干脆腾出时间研究研究 fekit 的 extension，最好能贡献点代码。\n\n> Fekit 是去哪儿网的前端部署及开发工具，相比于 gulp、grunt 等工具\n> ，Fekit 需要用户的学习成本较低，上手比较快。\n\n> [Fekit 的 github 地址](https://github.com/rinh/fekit)<br> >[FekitExtension 的模板地址](https://github.com/rinh/fekit-extension-template)<br> >[FekitExtension 的一个示例](https://github.com/rinh/fekit-extension-hf)\n\n# 谈谈需求\n\n我想写一个工具，在运行 fekit server 之前把项目中的每个 js 加入一个 DOM 的插入供作，\n插入一个显示编译 ip 地址的 div，在 server 结束之后将这句 js 删掉。\n\n# 怎么写？\n\n单独按照 Extension 模板里面写，没办法调试啊！！！怎么办？我干脆在\n`/usr/local/lib/node_modules/fekit/lib/commands/`\n下面开刀，在里面新建一个 msg.js,它大概是这个样子的\n\n    (function(){\n        exports.usage = \"在js里面插一个插入DOM的脚本\";\n        exports.set_options = function(optimist) {\n            optimist.alias('p','pack');\n            optimist.describe('p','插入');\n            optimist.alias('u','unpack');\n            optimist.describe('u','删除');\n            return optimist;\n        }\n        exports.run = function(options) {\n\n        }\n    }).call(this);\n\n可以运行`fekit msg`试试了\n\n# 都是些什么玩意儿\n\n## optimist\n\n看了许多现成的示例，optimist 就是给命令添加参数\n\n## options\n\n    {\n         _: [ 'msg' ],\n         '$0': 'fekit',\n         p:true,\n         cwd: '~'\n     }\n\n## module\n\n> 全局对象\n\n    {\n        id: '/usr/local/lib/node_modules/fekit/lib/commands/msg.js',\n        exports:{\n            usage: '在js里面插一个插入DOM的脚本',\n            set_options: [Function],\n            run: [Function]\n            },\n            parent:{\n                id: '/usr/local/lib/node_modules/fekit/lib/cli.js',\n                exports: {\n                     help: [Function],\n                     run: [Function]\n            },\n            parent:{\n                 id: '.',\n                 exports: {},\n                 parent: null,\n                 filename: '/usr/local/lib/node_modules/fekit/bin/fekit',\n                 loaded: false,\n                 children: [Object],\n                 paths: [Object] },\n                 filename: '/usr/local/lib/node_modules/fekit/lib/cli.js',\n                 loaded: true,\n                 children: [ [Object], [Object], [Object], [Circular] ],\n                 paths:[\n                  '/usr/local/lib/node_modules/fekit/lib/node_modules',\n                  '/usr/local/lib/node_modules/fekit/node_modules',\n                  '/usr/local/lib/node_modules',\n                  '/usr/local/node_modules',\n                  '/usr/node_modules',\n                  '/node_modules'\n                  ]\n            },\n            filename: '/usr/local/lib/node_modules/fekit/lib/commands/msg.js',\n            loaded: true,\n            children: [],\n            paths:[\n             '/usr/local/lib/node_modules/fekit/lib/commands/node_modules',\n             '/usr/local/lib/node_modules/fekit/lib/node_modules',\n             '/usr/local/lib/node_modules/fekit/node_modules',\n             '/usr/local/lib/node_modules',\n             '/usr/local/node_modules',\n             '/usr/node_modules',\n             '/node_modules'\n             ]\n        }\n\n# 开始大干一场吧\n\n通过判断 options 里面是否有 p 和 u 来判断是否打包，读 option 得 cwd 判断项目根目录，这样就能读取\nfekit.config 了，将 fekit.config 里面的每个 js 插一段脚本，在 u 里面将这段脚本删除，大功告成。\n","collection":"blog","data":{"type":"post","category":"fe"}},{"id":"2015/09/28/All-the-way-to-west.md","slug":"2015/09/28/all-the-way-to-west","body":"\n# 9.29\n\n北京 -- 大同 2602 101.5元 00:18~6:36\n\n## 【山西·大同】云冈石窟\n\n### 交通\n\n        4路 大同--公交四公司\n        3路 公交四公司--云冈石窟 （大概 7:30到）\n\n        云冈石窟 120元 8:30开馆\n\n大同 -- 平遥 2462 114.5元 22:57~6:06\n\n# 9.30\n\n## 【山西·平遥】\n\n### 住宿\n\n        住宿好贵，青旅都100+\n\n平遥 -- 临汾 动车一小时 普快两小时\n\n# 10.1\n\n##  【山西·临汾】壶口瀑布\n\n### 住宿\n\n        临汾浪迹青年旅舍\n\n### 方案\n\n        一日游\n\n临汾 -- 华山 1485 35.5元 18:55~23:16\n\n# 10.2~10.3\n\n临汾 -- 华山 2671 89.5元 02:54~06:35\n\n## 【陕西】华山\n\n华山 -- 西安 7~20点都有火车，很便宜，最慢一个小时也到了\n\n# 10.4~10.5 【陕西】西安\n\n    三门峡  8-21\n\t   函谷关\n\t   三门峡大坝\n\t   豫西大峡谷\n    洛阳\n\t   龙门石窟\n\t   丽景门\n    郑州 火车\n       登封2h 嵩山\n","collection":"blog","data":{"type":"post","category":"life"}},{"id":"2015/12/25/esprima-js.md","slug":"2015/12/25/esprima-js","body":"\n# esprima 分析 js 代码\n\n```javascript\nvar fs = require(\"fs\"),\n  esprima = require(\"esprima\"),\n  estraverse = require(\"estraverse\"),\n  escodegen = require(\"escodegen\"),\n  escope = require(\"escope\");\n\nvar funcStats = {},\n  API = [\"tag\", \"tag2\", \"mount\", \"update\", \"Tag\", \"observable\", \"Router\"];\n\nfunction addStats(name) {\n  if (!funcStats[name]) {\n    funcStats[name] = { calls: [], declarations: [], func: \"\", calling: [] };\n  }\n}\n\nvar a = {};\n\nfunction analyze(code) {\n  var ast = esprima.parse(code);\n  // var scopeMan = escope.analyze(ast);\n\n  estraverse.traverse(ast, {\n    enter: function(node, parent) {\n      if (node.type === \"FunctionDeclaration\") {\n        var name = node.id.name;\n        addStats(name);\n        funcStats[name].declarations.push(node);\n        funcStats[name].func = escodegen.generate(node);\n        recurBody(node);\n\n        function recurBody(node) {\n          if (node.body) {\n            node.body.body &&\n              node.body.body.forEach(function(n) {\n                recurBody(n);\n              });\n            if (node.type === \"WhileStatement\") {\n              node.test && recurBody(node.test);\n            }\n          } else {\n            switch (node.type) {\n              case \"CallExpression\":\n                var _name = \"\",\n                  calling = funcStats[name].calling,\n                  count = 0;\n                if (node.callee.type === \"Identifier\") {\n                  _name = node.callee.name;\n                } else if (node.callee.type === \"MemberExpression\") {\n                  _name = node.callee.property.name;\n                }\n\n                calling.forEach(function(call) {\n                  if (call === _name) {\n                    count++;\n                  }\n                });\n\n                if (count === 0) {\n                  calling.push(_name);\n                }\n\n                node.arguments.forEach(function(n) {\n                  recurBody(n);\n                });\n                break;\n              case \"IfStatement\":\n                node.test && recurBody(node.test);\n                node.consequent && recurBody(node.consequent);\n                node.alternate && recurBody(node.alternate);\n                break;\n              case \"LogicalExpression\":\n                node.left && recurBody(node.left);\n                node.right && recurBody(node.right);\n                break;\n              case \"UnaryExpression\":\n                node.argument && recurBody(node.argument);\n                break;\n              case \"AssignmentExpression\":\n                node.right && recurBody(node.right);\n                break;\n              case \"VariableDeclaration\":\n                node.declarations.forEach(function(n) {\n                  recurBody(n);\n                });\n                break;\n              case \"VariableDeclarator\":\n                node.init && recurBody(node.init);\n                break;\n              case \"ExpressionStatement\":\n                node.expression && recurBody(node.expression);\n                break;\n              case \"ReturnStatement\":\n                node.argument && recurBody(node.argument);\n                break;\n            }\n          }\n        }\n      } else if (\n        node.type === \"CallExpression\" &&\n        node.callee.type === \"Identifier\"\n      ) {\n        addStats(node.callee.name);\n        funcStats[node.callee.name].calls.push(parent);\n      } else if (\n        node.type === \"CallExpression\" &&\n        node.callee.type === \"MemberExpression\"\n      ) {\n        addStats(node.callee.property.name);\n        funcStats[node.callee.property.name].calls.push(parent);\n      }\n    },\n  });\n\n  var data = {},\n    statistic = {\n      count: 0,\n      nodes: [],\n      links: [],\n    },\n    list = [];\n\n  Object.keys(funcStats).forEach(function(key) {\n    statistic.count++;\n    data[key] = {\n      calls: funcStats[key].calls.length,\n      declarations: funcStats[key].declarations.length,\n      func: funcStats[key].func,\n      calling: [],\n      weight: 0,\n      category: 0, //0=>normal 1=>API\n    };\n\n    API.forEach(function(a) {\n      if (a === key) {\n        data[key].category = 1;\n      }\n    });\n\n    funcStats[key].calling.forEach(function(c) {\n      funcStats[c] && data[key].calling.push(c);\n    });\n\n    data[key].weight = data[key].calling.length;\n\n    statistic.nodes.push({\n      category: data[key].category,\n      value: data[key].weight,\n      name: key,\n    });\n  });\n\n  statistic.nodes.forEach(function(node, source) {\n    data[node.name].calling.forEach(function(call) {\n      statistic.nodes.forEach(function(n, t) {\n        if (n.name === call) {\n          statistic.links.push({\n            source: source,\n            target: t + 1,\n            weight: 1,\n          });\n        }\n      });\n    });\n  });\n  Object.keys(funcStats).forEach(function(key) {\n    var d = data[key],\n      w = d.weight;\n    d.name = key;\n    if (list.length) {\n      var inserted = 0;\n      list.forEach(function(item, index) {\n        if (inserted) return;\n        if (item.weight < w) {\n          list = list.slice(0, index).concat([d], list.slice(index));\n          inserted++;\n        }\n      });\n    } else {\n      list.push(d);\n    }\n  });\n  fs.writeFileSync(\"ast.json\", JSON.stringify(list));\n}\n\nif (process.argv.length < 3) {\n  throw new Error(\"Usage: index.js file.js\");\n}\n\nvar filename = process.argv[2];\nconsole.log(\"[READ]\\t\" + filename);\nvar code = fs.readFileSync(filename);\nanalyze(code);\nconsole.log(\"[DONE]\");\n```\n","collection":"blog","data":{"type":"post","category":"fe"}}]}