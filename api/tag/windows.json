{"posts":[{"id":"2016/02/14/VIM.md","slug":"2016/02/14/vim","body":"\n> 请原谅我又一次跳票了~\n\n# 前言\n\n之前买了一款iwork8的win10平板，起初是为了看代码，后来信心满满地想去刷linux进行开发，然而无情的现实摆在面前，没有驱动啊（无线驱动需要编译->没有有线接口->搞到了有线接口->md也要编译。。。）但是偶不会放弃的！\n\n# Terminal\n\nwin10的CMD太烂了，尝试了minGW，哇好大，作为一个轻度使用的变成平板来说不合适啊，MSYS2在x86上用不了，git for windows不错，但是在v2ex上看到有人推荐babun，正在下载中。。。\n\n# VIM复习\n\n懒得复习了，直接看```vimtutor```吧。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["vim","linux","windows"]}},{"id":"2019/11/28/windows powertoy.md","slug":"2019/11/28/windows-powertoy","body":"\n# 安利一下 Windows Powertoy\n\n这是最近 Windows 开源的一个应用，可以拓展 Windows 的一些功能，比如下图的 Fancy zones，可以提高 Windows 的分屏功能。\n\n![fancy zones](https://ws1.sinaimg.cn/mw690/89d0a2e1gy1g9drryez7hj22gu1bo4dr.jpg)\n\n可惜目前只支持 x64 平台，但是 github 上面已经有[issue](https://github.com/microsoft/PowerToys/issues/413)跟踪了。\n\n目前还不能在 Windows 商店里面安装，可以利用 chocolatey 安装。\n\n```batch\nsudo choco install powertoys\n```\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2020/02/22/Windows-strokesPlus.md","slug":"2020/02/22/windows-strokesplus","body":"\n# 分享一个 Windows 下面的鼠标手势工具 StrokesPlus\n\n我终于还是妥协了，在使用 windows 的情况下最好还是配备一个鼠标。尤其是当你在编程的时候。并不是说触摸屏不好，在很多时候，触摸屏可以在可以帮你记录一些东西。比如让你写一些算法的时候，你可以在旁边画一画。\n\n但是不得不说，编辑器就像 VS code。他对触摸屏的交互其实是很反人类的。另外由于我现在是三台设备。所以我的键盘是同时连着三台设备。。这说明当我要操作我的笔记本的时候，身体要跨过两个键盘的距离。这个动作幅度是比较大的。\n\n所以我在网上买了这个科大讯飞的鼠标，他有一个最大的好处就是，我可以说话打字。这样我就不需要操作键盘了。但是 windows 上面还有另外一个问题，就是鼠标，还有触摸屏和触摸板，三者都没有统一的交互体验。所以我又安装了这个鼠标手势工具。\n\nStrokesPlus 安装很简单，依然使用的是 chocolatey。\n\n```shell\nsudo choco install strokesplus\n```\n\n其实我的需求很简单，就是需要鼠标手势来操作切换桌面。安装好 strokePlus，打开 action 菜单即可添加手势。\n\n- @：代表\"Win\"键\n- +：代表“Shift”键\n- ^：代表“Ctrl”键\n- %：代表“Alt”键\n\n如进入右边桌面的命令为`acSendKeys(\"^@{RIGHT}\")`。\n\n添加\n\n- `acSendKeys(\"^@{RIGHT}\")` 进入右桌面\n- `acSendKeys(\"^@{LEFT}\")` 进入左桌面\n- `acSendKeys(\"@{TAB}\")` 全部桌面\n\n配合 GestureSign，终于触摸屏，触摸板和鼠标手势统一了。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2020/02/23/Mouse-without-borders.md","slug":"2020/02/23/mouse-without-borders","body":"\n# Mouse without borders 让鼠标同时连接 4 台 PC\n\n既然已经给我的 PC 买上了鼠标，那我肯定希望，三台 PC 能够共用这一个鼠标。在网上查询了一下，发现需要这个需求的人不止我一个。所以微软有一个项目叫做[mouse without border](https://www.microsoft.com/en-us/download/details.aspx?id=35460)。\n\n只要三台设备在同一个域下，我就可以通过这一个软件，让三台设备共享鼠标。\n\n今天忙活了半天这个软件，主要是自如的 wifi 5GHz 设置了防火墙，但是 2.4GHz 没有...所以只要有一台设备连接的是 2.4G 赫兹的网络。就可以进入内网，跟其他的设备交互共享鼠标了。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2020/03/17/Windows-Cypress.md","slug":"2020/03/17/windows-cypress","body":"\n# Windows 下面搞 Cypress 真心不容易\n\n最近在忙活让网站使用 [Cypress](https://www.cypress.io/) 做测试，之前使用苹果电脑以及 Linux 下面用起来还不错，这次在 Windows 下面碰壁比较多（其实我国的网络也有一部分功劳），所以在这里记录一下。\n\n## 尝试使用 WSL（失败）\n\nWSL 可以使用 XServer，所以我打算在 WSL 下面搭建，需要安装 [VcXsrv](https://sourceforge.net/projects/vcxsrv/) ，启动之后一路下一步就可以了，最后将 WSL 显示映射上去（在 bashrc 里面添加下面代码）。\n\n```shell\n# Display\nexport DISPLAY=localhost:0\nsudo /etc/init.d/dbus start &> /dev/null\n```\n\n另外需要把用户加到 sudoers 里面，否则每次启动还要输一遍密码\n\n```shell\nsudo echo \"{user} ALL = (root) NOPASSWD: /etc/init.d/dbus\" >> /etc/sudoers.d/dbus\n```\n\n然而，失败了，启动程序会报 GPU 渲染错误，同样的操作在 WSL2 中依然不行，可是[网络中有人成功了](https://nickymeuleman.netlify.com/blog/gui-on-wsl2-cypress/)。\n\n我相信更多的原因在于编译的时候网络环境太差了。\n\n## 尝试使用 MSYS\n\n直接跑 Windows 原生应用除了运行起来会更快，还可测试如 Edge 等浏览器，[MSYS](https://www.msys2.org/) 安装起来很简单，软件仓库管理使用的是 pacman，安装源可以尝试华中科大和清华的。\n\n```ini\n# C:\\msys64\\etc\\pacman.d\\mirrorlist.mingw32\nServer = http://mirrors.ustc.edu.cn/msys2/mingw/i686/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/i686/\n```\n\n```ini\n# C:\\msys64\\etc\\pacman.d\\mirrorlist.mingw64\nServer = http://mirrors.ustc.edu.cn/msys2/mingw/x86_64/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/x86_64/\n```\n\n```ini\n# C:\\msys64\\etc\\pacman.d\\mirrorlist.msys\nServer = http://mirrors.ustc.edu.cn/msys2/msys/$arch/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/msys/$arch/\n```\n\n另外需要在「控制面板>系统安全>系统>高级系统设置>环境变量」中增加`MSYS2_PATH_TYPE`值为`inherit`，这样 MSYS 里面的 PATH 就是用的是系统的 PATH 了。\n\n如果习惯使用 WWindows Terminal，可以尝试这个[issue](https://github.com/msys2/MSYS2-packages/issues/1684)，在 Windows Terminal 里面运行 MSYS。\n\n```shell\n$ cat .ms-terminal/wt-msys2.cmd\n@echo off\nsetlocal\n\nrem To activate windows native symlinks uncomment next line\nset MSYS=winsymlinks:nativestrict\n\nrem Shell types\nif \"x%~1\" == \"x-msys2\" set MSYSTEM=MSYS\nif \"x%~1\" == \"x-mingw32\" set MSYSTEM=MINGW32\nif \"x%~1\" == \"x-mingw64\" set MSYSTEM=MINGW64\n\n\nrem Shell types\nrem set MSYSTEM=MSYS\n\nC:\\msys64\\usr\\bin\\bash.exe --login -i\n\nexit /b 0\n```\n\n```json\n{\n  \"guid\": \"{e129fe71-3c94-40b5-8d92-961a3248f175}\",\n  \"commandline\": \"C:\\\\\\\\msys64\\\\home\\\\gongb\\\\wt-msys2.cmd\",\n  \"name\": \"MSYS2\",\n  \"startingDirectory\": \"%USERPROFILE%\",\n  \"icon\": \"ms-appx:///ProfileIcons/{0caa0dad-35be-5f56-a8ff-afceeeaa6101}.png\",\n  \"useAcrylic\": true,\n  \"acrylicOpacity\": 0.75\n}\n```\n\nWindows 下面的开发环境配置比较困难的原因之一就是这些链接库，比如安装一个`libpng-dev`，可以使用 Visual Studio Toolchain，也可以使用 MSYS，还可以使用微软开源的 VCPKG，然而没有一个体验能够达到极致。这导致 Gatsby 在我国的网络下永远不能部署成功。\n\n但是，直接在官网下载下来二进制包再进行[安装](https://docs.cypress.io/guides/getting-started/installing-cypress.html#Install-binary)也是可以的。\n\n```shell\nCYPRESS_INSTALL_BINARY=/local/path/to/cypress.zip npm install cypress\n```\n\n这样就可以运行 Cypress 了。\n\n## 最佳实践\n\n由此可知，其实 Cypress 可以在 Windows 下面原生执行，那么可以单独使用一个代码仓库管理测试用例，如本博客的测试用例放在[这里](https://github.com/gongbaodd/cy-blog.gongbusang.com)，在持续集成的时候将代码下载下来测试即可。\n","collection":"blog","data":{"type":"post","category":"fe","tag":["cypress","Windows","WSL2","MSYS","VcXsrv"]}},{"id":"2020/04/28/keyLemon.md","slug":"2020/04/28/keylemon","body":"\n# keyLemon 让任何一个摄像头都支持人脸登入\n\nWindows hello 是一个用一次就回不去的功能，目前我的笔记本支持指纹登入，一台平板外接了一个指纹接收器，另一台只能 PIN 码登入。显然 PIN 码用起来就不是很爽，然而这机器还是用来看书的。\n\n然而 Windows Hello 对摄像头要求很苛刻，于是我在想，有没有类似于安卓的单镜头解锁方案，KeyLemon 就是，v3 版本已经支持 Windows 10，虽然网上有评论说这软件免费版只能用 7 天，但是软件中只看到三种授权方式，basic 仅支持一张人脸和无活体检测的人脸登录，貌似这个 basic 就是免费版。\n\n实际体验，这个软件受光照影响很大，晚上录入的脸到早上就不识别了，这时输入 PIN 码依然可以登入。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows","facial-recognition","keyLemon"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2020/05/06/spacedesk.md","slug":"2020/05/06/spacedesk","body":"\n# spacedesk 让任意一台设备成为扩展屏幕\n\n之前我有一篇[文章](/tech/2020/02/23/Mouse_without_borders让鼠标同时连接四台设备.html)，让鼠标和键盘能跨越四台 Windows，而[spacedesk](https://spacedesk.net/)则是让所有设备成为主计算机的扩展屏幕，注意，这里是所有，包括 Windows 设备和手机设备，应该是类似于 miracast 的技术，安利应用商店里的 slave 端，运行很快。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2020/05/11/WSL-Xserver.md","slug":"2020/05/11/wsl-xserver","body":"\n# WSL 下运行 Xserver 鼠标太小\n\n不太清楚是不是 HIDPI 造成的，在 VcXsrv 下面的鼠标指针及其小。解决方法只能是换一个看起来大一些的鼠标。\n\n```shell\nsudo apt-get install big-cursor\n```\n\n接下来，重命名 VcXsrv 下面的`font/misc`（比如`C:\\Program Files\\VcXsrv\\fonts\\misc)`）的`cursor.pcf.gz`为`cursor-small.pcf.gz`。\n\n然后将刚才安装在 wsl 中的`/usr/share/fonts/X11/misc/big-cursor.pcf.gz`拷贝到上面的目录下，并重命名为`cursor.pcf.gz`。\n\n重启 VcXsrv 即可。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows","wsl","vcxsrv"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2021/01/09/husky-Windows.md","slug":"2021/01/09/husky-windows","body":"\n# 解决 husky 在 Windows 上面无法安装的问题\n\n其实问题在于，在执行`yarn`安装依赖并处理 git hooks 的时候，Windows 的控制台会打印内容反馈，并被理解为安装失败使得整个安装过程失败了。其实已经过去了很久，但是小版本还没有解决，可以先执行`yarn --silent`忽略 husky 上面的问题。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["husky","Windows","npm","yarn"]}},{"id":"2021/01/13/Barrier.md","slug":"2021/01/13/barrier","body":"\n# Barrier更好的多屏交互方式\n\n之前介绍过[Mouse Without Borders](https://blog.gongbushang.com/tech/2020/02/23/Mouse_without_borders%E8%AE%A9%E9%BC%A0%E6%A0%87%E5%90%8C%E6%97%B6%E8%BF%9E%E6%8E%A5%E5%9B%9B%E5%8F%B0%E8%AE%BE%E5%A4%87.html)，可以实现多台PC共享鼠标和键盘，在过去的一年里它帮了我不少忙，也有如下bug。\n\n- 长时间使用，鼠标滚轮会时常失效。\n- 和Stroke Plus使用的时候，不小心跨屏会导致stroke plus崩溃。\n- 鼠标在不同PPi的屏幕里面速度是不一样的。\n- 因为项目已经停止更新了，所以以上问题只能默默忍受。\n\n因此我更换了barrier，作为收费项目synergy的免费分支，拥有和synergy类似的兼容Mac、PC以及Linux上限达15台的多屏协同，本来是有安卓的，可惜已经停止支持了。\n\n目前看来上面的问题都已经解决了，但还要看长期使用的效果。","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2021/03/11/Windows.md","slug":"2021/03/11/windows","body":"\n# 让 Windows 更加频繁的同步系统时间\n\n最近发现我的平板时钟不对，第一反应是主板电池没电了，可是拆开也没找到电池在哪，算了，干脆价格定时任务更新时间。\n\nWindows 下面有一个 task scheduler 可以新建定时任务，在 microsoft>Windows>Time Synchronization,需要新建两个任务`%windir%\\system32\\sc.exe start w32time task_started`和`%windir%\\system32\\w32tm.exe /resync`[参考文章](https://www.pretentiousname.com/timesync/)\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2022/03/21/Barrier-DeskDroid-Universal Control.md","slug":"2022/03/21/barrier-deskdroid-universal-control","body":"\n# Barrier 和 DeskDroid 实现苹果的 Universal Control\n\n今天被人显摆了苹果的 Universal Control 了，作为跨屏协同用了这么久的我，为啥不显摆一下我现有的桌面配置呢？\n\nDeskDroid 的最新版本是可以和 Barrier 集成的，需要在设置中选择集成到 barrier，会有提示提醒如何把现有机器配置到 barrier 的设置里。\n\n由于 DeskDroid 基于 adb，可以很简单实现 adb 的无线连接\n\n```shell\nadb devices # 展示现在有线连接的设备\nadb tcpip 5555 # 打开设备无线的5555端口，成功后可以断开有线了（如果有多台设备连接，需要用-s指定设备）\nadb connect ${DeviceIP}:5555\n```\n\n现在就可以实现全局操控了。\n","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}},{"id":"2022/05/30/WSL2.md","slug":"2022/05/30/wsl2","body":"\n# WSL2加载虚拟硬盘\n\n在最新版的Windows11中，WSL2新增了[mount参数](https://docs.microsoft.com/zh-cn/windows/wsl/wsl2-mount-disk\n)可以加载虚拟硬盘了。\n\n依过去的经验WSL经常会更新崩溃，所以开发的时候我会把代码仓库和系统放在两个分区里，然而在Linux中操作NTFS是非常慢的，最好是新建一个Ext4的虚拟硬盘，再挂载到Linux中。\n\n在Windows的磁盘管理可以新建`.vhdx`文件（默认新建好会自动挂载，以后双击文件也可加载硬盘），然后使用Diskgen将这个磁盘分区并格式化成Ext4格式。\n\n接着在Powershell执行`GET-CimInstance -query \"SELECT * from Win32_DiskDrive\"`查看挂载的硬盘DiskPath，紧接着管理员执行`sudo wsl --mount <DiskPath> --bare`将硬盘挂载到WSL中。\n\n进入Linux里面，执行`lsblk`查看新加载的分区如sda3，新建文件夹`work`，并把这个分区挂在上去`sudo mount /dev/sda3 work`，完成。\n\nExt4的磁盘格式比NTFS快得不是一星半点，只可惜这些都只能在Windows11中实现，而且目前还没有更好的自动化实现方案。","collection":"blog","data":{"type":"post","category":"tech","tag":["windows"],"series":{"slug":"windows-howto","name":"Windows舒适指南"}}}]}