{"posts":[{"id":"2020/03/05/Jekyll-Gatsby.md","slug":"2020/03/05/jekyll-gatsby","body":"\n# ä» Jekyll è¿ç§»åšå®¢åˆ° Gatsby\n\nå¾ˆä¹…ä»¥å‰å°±æƒ³è¿ç§»äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡ä¸‹æ‰‹ï¼ŒåŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯ ruby ä¸å¤ªç†Ÿæ‚‰ï¼Œè€Œä½¿ç”¨ node å·¥å…·é“¾æ¯”è¾ƒè¶æ‰‹ã€‚\n\nå½“ç„¶äº†ï¼ŒGatsby çš„ä¸»é¢˜å¯¹æ¯” Jekyll å°±å°‘å¤ªå¤šäº†ï¼Œæ²¡å…³ç³»ï¼Œå¤§ä¸äº†è‡ªå·±è®¾è®¡ï¼ˆåˆæ˜¯ä¸€ä¸ªå¤§å‘ï¼‰ã€‚\n\n[Gatsby å®˜ç½‘](https://www.gatsbyjs.org/)çš„ tutorial å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œè¿™é‡Œåªæç®€å•çš„å‡ ä¸ªæ³¨æ„ã€‚\n\n- æ‰€è°“çš„ TypeScript é¡¹ç›®ä»…ä»…æŒ‡çš„æ˜¯å‰ç«¯ï¼Œåç«¯éƒ¨åˆ†ï¼ˆå› ä¸ºæ˜¯é™æ€æœåŠ¡ï¼Œåº”è¯¥è¯´æˆç¼–è¯‘çš„é’©å­`gatsby-node.js`ï¼‰è¿˜æ˜¯ç”¨çš„æ˜¯ JavaScriptï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å¼•å…¥`ts-node`å®ç°å¼•ç”¨ TypeScript æ–‡ä»¶ã€‚\n\n- ä¸ç¡®å®šæ˜¯ä¸æ˜¯ WSL æˆ–è€… Windows çš„é”…ï¼Œæ‰§è¡Œ`gatsby develop`æˆ–è€…`gatsby build`çš„æ—¶å€™ä¼šå¶å°”å‡ºç°æƒé™æ— æ³•è®¿é—®å¹¶åœ¨æ ¹ç›®å½•åˆ›å»º`reduxcache*`æ–‡ä»¶ï¼ŒæŒºçƒ¦äººçš„å…¶å®ï¼Œå›å¤´è¿˜å¾—æ‰§è¡Œ`sudo rm -Rf reduxcahce*`åˆ é™¤ã€‚\n\n- æ— è®º`components`è¿˜æ˜¯`pages`ï¼Œå…¶å®éƒ½åšäº†ä¸€å±‚éšå¼å°è£…ï¼Œæ‰€ä»¥åªæœ‰`default`æš´éœ²çš„ç»„ä»¶å‚èƒ½ä½¿ç”¨ Gatsby é‡Œé¢è¯¸å¦‚`useStaticQuery`çš„é’©å­å‡½æ•°ã€‚\n\n- Gatsby é»˜è®¤çš„ URL æ ¼å¼å’Œ Jekyll ä¸ä¸€æ ·ï¼Œä¸ºäº†ä¿æŒæŒç»­æ€§ï¼Œæˆ‘ä¿®æ”¹äº†`server/onCreateNode`æ¥ä¿®æ”¹æ–‡ä»¶çš„ URLã€‚\n\n- ä¿®æ”¹ Travis ä¸Šä¼ åˆ°`gh-pages`åˆ†æ”¯åï¼ŒæœåŠ¡ç«Ÿç„¶æŒ‚äº†ï¼ŒæŸ¥çœ‹ setting è¯´æˆ‘åªèƒ½åœ¨`master`åˆ†æ”¯ä¸Šé¢æ”¾ç¼–è¯‘åçš„æ–‡ä»¶ï¼ˆè«éæ”¿ç­–æœ‰å˜åŒ–ï¼Ÿï¼‰ã€‚æ— æ‰€è°“äº†ï¼ŒæŠŠ`gatsby`åˆ†æ”¯æ”¹æˆé»˜è®¤åˆ†æ”¯ï¼Œè®¾ç½®`master`åˆ†æ”¯ä¸ºéƒ¨ç½²åˆ†æ”¯å³å¯ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["jekyll","gatsby"]}},{"id":"2020/03/06/Utterance-GitHub-issue.md","slug":"2020/03/06/utterance-github-issue","body":"\n# ä½¿ç”¨ Utterance ä¸ºåšå®¢æ·»åŠ åŸºäº Github-issue çš„è¯„è®ºç³»ç»Ÿ\n\næœ€è¿‘åœ¨é‡æ„æˆ‘éƒ¨ç½²åœ¨ GitHub pages çš„åšå®¢ï¼Œæœ¬æ¥ä¸æƒ³æ·»åŠ è¯„è®ºç³»ç»Ÿçš„ï¼Œä½†æ˜¯æ‰‹è´±ï¼Œéæƒ³è¦åŠ ä¸€ä¸ªã€‚\n\nå°è¯•äº† disqusï¼ˆä¸€ä¸ªåœ¨å›½å†…æ— æ³•ä½¿ç”¨çš„è¯„è®ºç³»ç»Ÿï¼‰ï¼Œè²Œä¼¼`page.url`ä¸­ä¸èƒ½ä½¿ç”¨ä¸­æ–‡å­—ç¬¦...è¿™å°±å°´å°¬äº†ï¼Œçªç„¶æƒ³èµ·æ¥ä»¥å‰çœ‹ hackernews çš„æ—¶å€™æœ‰äººæèµ·è¿‡ä½¿ç”¨ GitHub issue æ­å»ºåšå®¢çš„æƒ³æ³•ã€‚å¦‚æœä½ æ˜¯ç›´æ¥ä½¿ç”¨é™æ€é¡µé¢åšç½‘ç«™ï¼Œåªéœ€è¦å»[Utterance](https://utteranc.es/)æˆæƒ GitHub è´¦å·ï¼Œå¤åˆ¶å¯¹åº”çš„ä»£ç ç²˜è´´åˆ°ç½‘ç«™å³å¯ã€‚\n\nå› ä¸ºæˆ‘æ–°é‡æ„çš„ç½‘ç«™æ˜¯åŸºäº Gatsby çš„ï¼ŒUtterance ä¹Ÿæä¾›äº†[react é«˜é˜¶ç»„ä»¶](https://www.npmjs.com/package/with-utterances)å¯ä»¥ä½¿ç”¨ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["github"]}},{"id":"2020/03/10/docker-strapi.md","slug":"2020/03/10/docker-strapi","body":"\n# è…¾è®¯äº‘ docker å®‰è£… strapi\n\n## Docker engine\n\nå¦‚ä¸‹æ˜¯[å®˜ç½‘çš„å®‰è£…è¿‡ç¨‹](https://docs.docker.com/install/linux/docker-ce/ubuntu/)ï¼Œé¦–å…ˆç§»å‡º Ubuntu åŸæœ‰çš„ dockerï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰\n\n```shell\n sudo apt-get remove docker docker-engine docker.io containerd runc\n sudo apt-get update\n```\n\nå®‰è£…ç›¸å…³ä¾èµ–\n\n```\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    gnupg-agent \\\n    software-properties-common\n```\n\nå¢åŠ  docker çš„å®‰è£…æº\n\n```shell\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n```\n\nå¼€å§‹å®‰è£…ï¼ˆæˆ‘çš„æ¶æ„æ˜¯ x86_64ï¼‰\n\n```shell\nsudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n\nsudo apt-get update\nsudo apt-get install docker-ce docker-ce-cli containerd.io\n```\n\n## Docker compose\n\nå®‰è£…æ–°ç‰ˆæœ¬`docker-compose`ï¼Œå› ä¸ºæ–‡ä»¶å­˜å‚¨åœ¨ github ä¸Šé¢ï¼Œè¿™é‡Œç›´æ¥ä» DaoCloud ä¸‹è½½ã€‚\n\n```\nsudo curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.4/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose\nsudo chmod +x /usr/local/bin/docker-compose\n```\n\n## è§£å†³ ERROR: Couldn't connect to Docker daemon at http+docker://localhost - is it runningï¼Ÿ\n\néœ€è¦å¢åŠ è‡ªå·±ç”¨æˆ·åˆ° docker ç»„ï¼Œç„¶åé‡æ–°è¿›å…¥å³å¯\n\n```shell\nsudo gpasswd -a ${USER} docker\n```\n\n## Strapi\n\næŒ‰ç…§[strapi å®˜æ–¹æ–‡æ¡£](https://strapi.io/documentation/3.0.0-beta.x/installation/docker.html)æ‰§è¡Œå¦‚ä¸‹æ“ä½œã€‚\n\næ–°å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶å¢åŠ `docker-compose.yaml`\n\n```yaml\nversion: \"3\"\nservices:\n  strapi:\n    image: strapi/strapi\n    environment:\n      DATABASE_CLIENT: mongo\n      DATABASE_NAME: strapi\n      DATABASE_HOST: mongo\n      DATABASE_PORT: 27017\n      DATABASE_USERNAME: strapi\n      DATABASE_PASSWORD: strapi\n    links:\n      - mongo:mongo\n    volumes:\n      - ./app:/srv/app\n    ports:\n      - \"1337:1337\"\n\n  mongo:\n    image: mongo\n    environment:\n      MONGO_INITDB_ROOT_USERNAME: strapi\n      MONGO_INITDB_ROOT_PASSWORD: strapi\n    volumes:\n      - ./data/db:/data/db\n    ports:\n      - \"27017:27017\"\n```\n\nä¿®æ”¹ docker é•œåƒé€‰æ‹©[è…¾è®¯åŠ é€Ÿå™¨](https://cloud.tencent.com/document/product/457/9113)ã€‚\n\n```json\n//  /etc/docker/daemon.json\n{\n  \"registry-mirrors\": [\"https://mirror.ccs.tencentyun.com\"]\n}\n```\n\né‡å¯æœåŠ¡\n\n```shell\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\nä¸‹è½½é•œåƒã€‚\n\n```shell\ndocker-compose pull\n```\n\nå¯åŠ¨é•œåƒ\n\n```shell\ndocker-compose up -d\n```\n\nç°åœ¨ä½ çš„ 1337 ç«¯å£å·²ç»äº¤ç»™ strapi äº†ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["docker","tencent","strapi"]}},{"id":"2020/03/17/Windows-Cypress.md","slug":"2020/03/17/windows-cypress","body":"\n# Windows ä¸‹é¢æ Cypress çœŸå¿ƒä¸å®¹æ˜“\n\næœ€è¿‘åœ¨å¿™æ´»è®©ç½‘ç«™ä½¿ç”¨ [Cypress](https://www.cypress.io/) åšæµ‹è¯•ï¼Œä¹‹å‰ä½¿ç”¨è‹¹æœç”µè„‘ä»¥åŠ Linux ä¸‹é¢ç”¨èµ·æ¥è¿˜ä¸é”™ï¼Œè¿™æ¬¡åœ¨ Windows ä¸‹é¢ç¢°å£æ¯”è¾ƒå¤šï¼ˆå…¶å®æˆ‘å›½çš„ç½‘ç»œä¹Ÿæœ‰ä¸€éƒ¨åˆ†åŠŸåŠ³ï¼‰ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚\n\n## å°è¯•ä½¿ç”¨ WSLï¼ˆå¤±è´¥ï¼‰\n\nWSL å¯ä»¥ä½¿ç”¨ XServerï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—åœ¨ WSL ä¸‹é¢æ­å»ºï¼Œéœ€è¦å®‰è£… [VcXsrv](https://sourceforge.net/projects/vcxsrv/) ï¼Œå¯åŠ¨ä¹‹åä¸€è·¯ä¸‹ä¸€æ­¥å°±å¯ä»¥äº†ï¼Œæœ€åå°† WSL æ˜¾ç¤ºæ˜ å°„ä¸Šå»ï¼ˆåœ¨ bashrc é‡Œé¢æ·»åŠ ä¸‹é¢ä»£ç ï¼‰ã€‚\n\n```shell\n# Display\nexport DISPLAY=localhost:0\nsudo /etc/init.d/dbus start &> /dev/null\n```\n\nå¦å¤–éœ€è¦æŠŠç”¨æˆ·åŠ åˆ° sudoers é‡Œé¢ï¼Œå¦åˆ™æ¯æ¬¡å¯åŠ¨è¿˜è¦è¾“ä¸€éå¯†ç \n\n```shell\nsudo echo \"{user} ALL = (root) NOPASSWD: /etc/init.d/dbus\" >> /etc/sudoers.d/dbus\n```\n\nç„¶è€Œï¼Œå¤±è´¥äº†ï¼Œå¯åŠ¨ç¨‹åºä¼šæŠ¥ GPU æ¸²æŸ“é”™è¯¯ï¼ŒåŒæ ·çš„æ“ä½œåœ¨ WSL2 ä¸­ä¾ç„¶ä¸è¡Œï¼Œå¯æ˜¯[ç½‘ç»œä¸­æœ‰äººæˆåŠŸäº†](https://nickymeuleman.netlify.com/blog/gui-on-wsl2-cypress/)ã€‚\n\næˆ‘ç›¸ä¿¡æ›´å¤šçš„åŸå› åœ¨äºç¼–è¯‘çš„æ—¶å€™ç½‘ç»œç¯å¢ƒå¤ªå·®äº†ã€‚\n\n## å°è¯•ä½¿ç”¨ MSYS\n\nç›´æ¥è·‘ Windows åŸç”Ÿåº”ç”¨é™¤äº†è¿è¡Œèµ·æ¥ä¼šæ›´å¿«ï¼Œè¿˜å¯æµ‹è¯•å¦‚ Edge ç­‰æµè§ˆå™¨ï¼Œ[MSYS](https://www.msys2.org/) å®‰è£…èµ·æ¥å¾ˆç®€å•ï¼Œè½¯ä»¶ä»“åº“ç®¡ç†ä½¿ç”¨çš„æ˜¯ pacmanï¼Œå®‰è£…æºå¯ä»¥å°è¯•åä¸­ç§‘å¤§å’Œæ¸…åçš„ã€‚\n\n```ini\n# C:\\msys64\\etc\\pacman.d\\mirrorlist.mingw32\nServer = http://mirrors.ustc.edu.cn/msys2/mingw/i686/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/i686/\n```\n\n```ini\n# C:\\msys64\\etc\\pacman.d\\mirrorlist.mingw64\nServer = http://mirrors.ustc.edu.cn/msys2/mingw/x86_64/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/mingw/x86_64/\n```\n\n```ini\n# C:\\msys64\\etc\\pacman.d\\mirrorlist.msys\nServer = http://mirrors.ustc.edu.cn/msys2/msys/$arch/\nServer = https://mirrors.tuna.tsinghua.edu.cn/msys2/msys/$arch/\n```\n\nå¦å¤–éœ€è¦åœ¨ã€Œæ§åˆ¶é¢æ¿>ç³»ç»Ÿå®‰å…¨>ç³»ç»Ÿ>é«˜çº§ç³»ç»Ÿè®¾ç½®>ç¯å¢ƒå˜é‡ã€ä¸­å¢åŠ `MSYS2_PATH_TYPE`å€¼ä¸º`inherit`ï¼Œè¿™æ · MSYS é‡Œé¢çš„ PATH å°±æ˜¯ç”¨çš„æ˜¯ç³»ç»Ÿçš„ PATH äº†ã€‚\n\nå¦‚æœä¹ æƒ¯ä½¿ç”¨ WWindows Terminalï¼Œå¯ä»¥å°è¯•è¿™ä¸ª[issue](https://github.com/msys2/MSYS2-packages/issues/1684)ï¼Œåœ¨ Windows Terminal é‡Œé¢è¿è¡Œ MSYSã€‚\n\n```shell\n$ cat .ms-terminal/wt-msys2.cmd\n@echo off\nsetlocal\n\nrem To activate windows native symlinks uncomment next line\nset MSYS=winsymlinks:nativestrict\n\nrem Shell types\nif \"x%~1\" == \"x-msys2\" set MSYSTEM=MSYS\nif \"x%~1\" == \"x-mingw32\" set MSYSTEM=MINGW32\nif \"x%~1\" == \"x-mingw64\" set MSYSTEM=MINGW64\n\n\nrem Shell types\nrem set MSYSTEM=MSYS\n\nC:\\msys64\\usr\\bin\\bash.exe --login -i\n\nexit /b 0\n```\n\n```json\n{\n  \"guid\": \"{e129fe71-3c94-40b5-8d92-961a3248f175}\",\n  \"commandline\": \"C:\\\\\\\\msys64\\\\home\\\\gongb\\\\wt-msys2.cmd\",\n  \"name\": \"MSYS2\",\n  \"startingDirectory\": \"%USERPROFILE%\",\n  \"icon\": \"ms-appx:///ProfileIcons/{0caa0dad-35be-5f56-a8ff-afceeeaa6101}.png\",\n  \"useAcrylic\": true,\n  \"acrylicOpacity\": 0.75\n}\n```\n\nWindows ä¸‹é¢çš„å¼€å‘ç¯å¢ƒé…ç½®æ¯”è¾ƒå›°éš¾çš„åŸå› ä¹‹ä¸€å°±æ˜¯è¿™äº›é“¾æ¥åº“ï¼Œæ¯”å¦‚å®‰è£…ä¸€ä¸ª`libpng-dev`ï¼Œå¯ä»¥ä½¿ç”¨ Visual Studio Toolchainï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ MSYSï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¾®è½¯å¼€æºçš„ VCPKGï¼Œç„¶è€Œæ²¡æœ‰ä¸€ä¸ªä½“éªŒèƒ½å¤Ÿè¾¾åˆ°æè‡´ã€‚è¿™å¯¼è‡´ Gatsby åœ¨æˆ‘å›½çš„ç½‘ç»œä¸‹æ°¸è¿œä¸èƒ½éƒ¨ç½²æˆåŠŸã€‚\n\nä½†æ˜¯ï¼Œç›´æ¥åœ¨å®˜ç½‘ä¸‹è½½ä¸‹æ¥äºŒè¿›åˆ¶åŒ…å†è¿›è¡Œ[å®‰è£…](https://docs.cypress.io/guides/getting-started/installing-cypress.html#Install-binary)ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\n\n```shell\nCYPRESS_INSTALL_BINARY=/local/path/to/cypress.zip npm install cypress\n```\n\nè¿™æ ·å°±å¯ä»¥è¿è¡Œ Cypress äº†ã€‚\n\n## æœ€ä½³å®è·µ\n\nç”±æ­¤å¯çŸ¥ï¼Œå…¶å® Cypress å¯ä»¥åœ¨ Windows ä¸‹é¢åŸç”Ÿæ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥å•ç‹¬ä½¿ç”¨ä¸€ä¸ªä»£ç ä»“åº“ç®¡ç†æµ‹è¯•ç”¨ä¾‹ï¼Œå¦‚æœ¬åšå®¢çš„æµ‹è¯•ç”¨ä¾‹æ”¾åœ¨[è¿™é‡Œ](https://github.com/gongbaodd/cy-blog.gongbusang.com)ï¼Œåœ¨æŒç»­é›†æˆçš„æ—¶å€™å°†ä»£ç ä¸‹è½½ä¸‹æ¥æµ‹è¯•å³å¯ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["cypress","Windows","WSL2","MSYS","VcXsrv"]}},{"id":"2020/03/22/react-three-fiber-WebGL.md","slug":"2020/03/22/react-three-fiber-webgl","body":"\n# ä½¿ç”¨ react-three-fiber ä½“éªŒç¾å¥½çš„ WebGL å¼€å‘\n\nä½¿ç”¨ threejs å¼€å‘ webGL åº”ç”¨åº”è¯¥æ˜¯å‡ ä¹æ¯ä¸ªå‰ç«¯å·¥ç¨‹å¸ˆæƒ³è¦åšçš„äº‹å„¿ï¼Œç„¶è€Œè™½ç„¶å¯¹æ¯”äºåŸç”Ÿ WebGL å¼€å‘æ¥è¯´ï¼Œthreejs å·²ç»åšäº†å¾ˆå¤šï¼Œä½†æ˜¯ç›¸å¯¹äºç°ä»£çš„ä¸€äº›å‰ç«¯æ¡†æ¶ã€‚threejs è¿˜ç¨æ˜¾ä¸è¶³ã€‚é’ˆå¯¹è¿™äº›ä¸è¶³ï¼Œå¾®è½¯å¼€å‘äº†[Babylon.js](https://www.babylonjs.com/)ï¼Œç»™ threejs é‡èº«å®šåˆ¶äº†ä¸€ä¸ªèŠ‚ç‚¹ç¼–è¾‘å™¨ï¼Œå¦‚æœåšè¿‡ blender æˆ–è€… unity çš„åŒå­¦ï¼Œå¯¹äºèŠ‚ç‚¹ç¼–è¾‘å™¨è‚¯å®šä¸ä¼šé™Œç”Ÿï¼Œä½†å¯¹æˆ‘æœ¬äººæ¥è¯´è¿˜æ˜¯æ²¡æœ‰è§¦ç¢°åˆ° G ç‚¹ã€‚\n\n## æè¿°ç»„ä»¶å…³ç³»çš„é‡è¦æ€§\n\næœ¬äººè§‰å¾—ï¼Œå¯¹äºå‰ç«¯å¼€å‘æ¥è¯´ï¼Œæä¾›ä¸€ä¸ªèƒ½å¤Ÿå‡†ç¡®æè¿°ç»„ä»¶å’Œç»„ä»¶ç»“æ„å…³ç³»çš„è¯­è¨€ï¼ˆDSLï¼‰æ˜¯è‡³å…³é‡è¦çš„ï¼Œå¦‚ HTML ä¹‹äº web å¼€å‘ï¼Œxml ä¹‹äºå®‰å“å¼€å‘ã€‚è¿™äº› DSL èƒ½å¤Ÿä»¥æœ€ç›´è§‚çš„æ–¹å¼è¡¨è¾¾é¡µé¢å°†ä¼šå±•ç¤ºä»€ä¹ˆï¼Œå°±ä»å¼€å‘çš„è§’åº¦ä¸Šæ¥è¯´ï¼Œæˆ–è®¸å…¥é—¨ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ¯•ç«Ÿè¦å¤„ç†å¾ˆå¤šæ–‡ä»¶ã€‚ä½†æ˜¯ç»´æŠ¤èµ·æ¥å´å¼‚å¸¸çš„è½»æ¾ï¼Œå°±æ˜¯å‰é¢æåˆ°çš„åŸå› ï¼Œç›´è§‚ã€‚å½“ç„¶å› ä¸º JavaScript è·Ÿ HTML çš„äº¤äº’æœ‰å¾ˆå¤§çš„æ€§èƒ½ç¼ºé™·ã€‚æ‰€ä»¥ç»™å¾ˆå¤šæ¨¡æ¿è¯­è¨€æä¾›äº†æœºä¼šã€‚æ¯”å¦‚ mustache è¿˜æœ‰ react çš„ JSXã€‚åœ¨å®‰å“ä¹Ÿèƒ½çœ‹åˆ° anko åœ¨ kotlin ç¤¾åŒºå…´èµ·ï¼Œä½†æ˜¯ä»…ä»…ä¸€å¹´å°±æ²¡æœ‰æ›´å¤šäººä½¿ç”¨äº†ï¼Œä¸ªäººä½“éªŒï¼Œåœ¨ Android studio ä¸­ä½¿ç”¨ xml å’Œ anko å¼€å‘ä½“éªŒå·®è·å¹¶ä¸å¤§ï¼Œæœ‰æ—¶å€™ xml ç”šè‡³å ä¼˜ï¼Œä¹Ÿè®¸è¿™å°±æ˜¯åŸå› ä¹‹ä¸€äº†å§ã€‚\n\nå‡ å¹´å‰æˆ‘ç¿»æŸ¥äº†å¾ˆå¤šæ¡†æ¶ï¼Œè€å®è¯´å¯èƒ½æ›´å¤šäººå¹¶æ²¡æœ‰æŠŠç»“æ„æè¿°æ”¾åœ¨å¦‚æˆ‘æƒ³çš„ä½ç½®ä¸Šï¼Œå“ªæ€•è¿ä¸ª JSON çš„æ–¹æ¡ˆéƒ½æ²¡æœ‰ã€‚ä½†æ˜¯çš„ç¡®æœ‰[aframejs](https://aframe.io/)è¿™ç§ç›´æ¥ç”¨ HTML ç®¡ç† canvas ä¸­å…ƒç´ å…³ç³»çš„åº“ï¼Œå¯æƒœå®ƒæ›´å…³æ³¨äº VR å¼€å‘ï¼Œè€Œæˆ‘æ›´å¸Œæœ› WebGL èƒ½å¤Ÿæˆä¸ºè¯¸å¦‚å›¾ä¹¦æ³¨è§£ä¸€æ ·çš„å·¥å…·ï¼Œå½“ç„¶è¿™ç§ä¸“æ³¨äºä¸€ä¸ªæ–¹é¢çš„åšæ³•æˆ–è®¸æ˜¯æ­£ç¡®çš„ï¼Œæ¯•ç«Ÿèƒ½å¤Ÿæ±‡èšä¸€ä¸ªå°åœˆçš„å¼€å‘è€…ï¼Œä¹Ÿä¸ä¼šæœ‰å¾ˆå¤šæµå¤±ã€‚\n\n## ç”¨ JSX å¼€å‘ WebGL\n\nä»Šå¹´è¿æ°”å°±å¥½å¤šäº†ï¼Œreact-reconciler ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥æ¥ç®¡ç»„ä»¶çš„ render å‡½æ•°ï¼Œè€Œ react-hooks åœ¨å¼€å‘ä½“éªŒä¸Šå®Œç¾è¶…å‡ºç°æœ‰æ¡†æ¶ï¼Œ[react-babylonjs](https://github.com/brianzinn/react-babylonJS) å’Œ [react-three-fiber](https://github.com/react-spring/react-three-fiber) åº”è¿è€Œç”Ÿã€‚æˆ‘åŒæ—¶è¯•ç”¨äº†è¿™ä¸¤ä¸ªæ¡†æ¶ï¼Œç®€å•æ¥è¯´ï¼Œreact-three-fiber æ›´åŠ æˆç†Ÿäº›ï¼Œå¯¹ tTypeScript çš„æ”¯æŒæ›´å¥½ï¼Œè€Œ react-babylonjs å¼€å‘çš„æ—¶å€™å¾€å¾€ä¼šå› ä¸ºå¤„ç†ç±»å‹è€Œè´¹å¿ƒï¼Œæœ€ååˆä¸å¾—ä¸ä½¿ç”¨ JavaScript å¼€å‘ã€‚\n\n## æ€ä¹ˆä½¿ç”¨ react-three-fiber\n\nreact-three-fiber çš„[å®˜æ–¹æ–‡æ¡£é“¾æ¥](https://inspiring-wiles-b4ffe0.netlify.com/)æè¿°å¾ˆè¯¦ç»†ï¼Œå»ºè®®è¯¦è¯»ã€‚å¦å¤– threejs å®˜æ–¹æ¥é“¾æ¥çš„[threejs fundamentals](https://threejsfundamentals.org/)æœ‰æ—¶é—´ä¹Ÿå¯ä»¥æ‹¿æ¥è¯»è¯»ã€‚\n\nå¦‚æœæƒ³æŠŠåŸæ¥çš„ threejs æ¨¡å—è¿ç§»åˆ° react æ¨¡å—ï¼Œåªéœ€è¦ä½¿ç”¨ä¸€å±‚ primitive åŒ…è£…å³å¯ã€‚æ¯ä¸ªæ‹¥æœ‰ set å’Œ get çš„å‚æ•°éƒ½å¯ä»¥ä½œä¸º props çš„æˆå‘˜ï¼Œæ„é€ å™¨å‚æ•°åˆ™æ˜¯`props.args: any[]`ç±»å‹ã€‚\n\n```JavaScript\nconst grid = new GridHelper(2000, 20, 0x000000, 0x0000000);\n(grid.material as Material).opacity = 0.2;\n(grid.material as Material).transparent = true;\n\nconst Grid = () => {\n  useFrame(({ scene }) => {\n    if (!scene.fog) {\n      const fog = new Fog(0xa0a0a0, 200, 800);\n      scene.fog = fog;\n    }\n  });\n\n  return <primitive object={grid}></primitive>;\n};\n\n```\n\n## è°ƒè¯•å·¥å…·\n\nè¿™ç‚¹ babylonjs è¦å¥½å¾—å¤šï¼Œä¸€ä¸ªèŠ‚ç‚¹ç¼–è¾‘å™¨ç§’æ€ä¸€åˆ‡ï¼Œä½†æ˜¯ threejs è¿˜æœ‰ä¸€ä¸ªã€Œå¤Ÿç”¨ã€çš„[threejs inspector](https://chrome.google.com/webstore/detail/threejs-inspector/dnhjfclbfhcbcdfpjaeacomhbdfjbebi?hl=en)ã€‚\n\nä½¿ç”¨æ—¶éœ€è¦æŠŠä½ çš„ scene å’Œ THREE æ¨¡å—æš´éœ²ç»™ window ä½œç”¨åŸŸã€‚\n\n```JavaScript\nwindow.scene = scene;\nwindow.THREE = THREE;\n```\n\nç„¶ååˆ·æ–°æµè§ˆå™¨å°±å¯ä»¥åœ¨åœºæ™¯æ·»åŠ å…‰æºï¼ŒæŸ¥çœ‹èŠ‚ç‚¹ç­‰æ“ä½œäº†ã€‚\n\n## æç¤º\n\nå› ä¸º threejs åŠå…¶æ¨¡å—æœ¬èº«ä¸æ˜¯ç¼–è¯‘å¥½çš„ ES5ï¼Œåœ¨ nextjs ä¸­ä¸€å®šè®°å¾—ä½¿ç”¨`next-transpile-modules`ç¼–è¯‘ï¼Œå½“ç„¶å³ä½¿å·²ç»å®Œç¾é€‚é… ES5ï¼Œåœ¨ IE11 çš„å±•ç¤ºä¹Ÿä¸æ˜¯å¾ˆä¹è§‚ ğŸ˜…ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["threejs","webGL","react"],"series":{"slug":"threejs-howto","name":"ç»†å“threejs"}}},{"id":"2020/03/26/Tailwind-CSS.md","slug":"2020/03/26/tailwind-css","body":"\n# [Tailwind](https://tailwindcss.com/) ä¸€ä¸ªåƒå®è¯­è¨€çš„ CSS è§£å†³æ–¹æ¡ˆ\n\nå…ˆæŠŠåˆ€æ”¾ä¸‹ï¼Œæˆ‘çŸ¥é“ï¼Œç°åœ¨å·²ç»æœ‰ n ç§ CSS çš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸”åŸºæœ¬ä¸Šæ²¡æœ‰ä¸€ä¸ªç”¨ç€é¡ºå¿ƒçš„ã€‚\n\næˆ‘è®°å¾—æ›¾æœ‰ä¸€æ®µæ—¶é—´ï¼Œå¥½åƒæ˜¯ä½¿ç”¨ YUI é‚£ä¼šå„¿ï¼ŒCSS çš„ class å¾€å¾€ä¼šå‘½åæˆå¸ƒå±€è§„åˆ™ï¼Œæ¯”å¦‚å¸Œæœ›ä¸€ä¸ª div æœ‰ 10 åƒç´ çš„ç•™ç™½ï¼Œå°±ç»™ä»–æ·»åŠ ä¸€ä¸ª classï¼Œ`.margin-10px`ï¼Œç„¶åå¯¹è¿™ä¸ª class çš„æè¿°ä¸ºã€‚\n\n```CSS\n.margin-10px {\n    margin: 10px;\n}\n```\n\nå½“ç„¶ï¼Œè¿™ç§æ–¹å¼åœ¨æˆ‘å…¥èŒä¸€æ®µæ—¶é—´åé©¬ä¸Šæ¶ˆå¤±äº†ï¼Œå¤§å®¶éƒ½æ›´å€¾å‘äºä½¿ç”¨ç»„ä»¶è¯­ä¹‰åŒ–çš„ classï¼Œå¦‚æ˜¾ç¤ºå¤´åƒï¼Œåˆ™æŠŠ class å‘½åä¸º`.avatar`è€Œä¸æ˜¯`.margin-10px.padding-5px.radius-50`è¿™ç§æ€ä¹ˆçœ‹éƒ½ä¸çŸ¥é“æ˜¯å¹²ä»€ä¹ˆçš„å‘½åã€‚\n\näºæ˜¯ CSS å¼€å§‹å’Œç»„ä»¶è¶Šæ¥è¶Šè¿‘ï¼Œè‡ªä»æœ‰äº† scope CSSï¼Œ React å’Œ Vue çš„ç»„ä»¶åº“é€æ¸æˆå½¢ï¼Œæ›´å¤šçš„æ–¹æ¡ˆé€æ¸é’ç[CSS in JS](https://cssinjs.org/?v=v10.1.1)ï¼Œå•çº¯çš„ CSS è§£å†³æ–¹æ¡ˆé™¤äº† [bulma](https://bulma.io/) å‰©ä¸‹çš„å°±ä¸å¤šäº†ã€‚è®¾è®¡çš„æ—¶å€™å¾€å¾€è¦å…ˆè€ƒè™‘ä½¿ç”¨çš„è¿™ä¸ªç»„ä»¶åº“çš„è®¾è®¡è¯­è¨€èƒ½ç»™æ”¹é€ é¢„ç•™å‡ºå¤šå¤§çš„ç©ºé—´ï¼Œç„¶åå†è®¾è®¡ã€‚\n\n## å›å¤´æƒ³ä¸€æƒ³\n\nå…¶å®æŠŠå‡ ä¸ª CSS è¯­å¥åˆèµ·æ¥ä½œä¸ºä¸€ä¸ªé›†åˆä½¿ç”¨å¹¶ä¸æ˜¯é”™çš„ï¼Œç°æœ‰çš„ SASS æ¡†æ¶ä¹Ÿä¼šç”¨ utils åº“ä¸“é—¨å­˜å‚¨å°è£…å¥½çš„`@mixins`ã€‚æƒ³åˆ°ä»¥å‰ä½¿ç”¨[Yo](https://github.com/doyoe/Yo)åšå‰ç«¯æ ·å¼æ—¶å¸¸ä¼šç”¨`@yo-flex('.box'){}`è¿™æ ·çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å…¶å®å°±æ˜¯å°† flex å¸ƒå±€çš„ä»¥åŠå®ƒçš„é™çº§ box å¸ƒå±€ï¼Œç”šè‡³æ˜¯ä¼˜é›…é™çº§åˆ°ä¸æ”¯æŒ box å¸ƒå±€çš„æ ·å¼é›†åˆåˆ°ä¸€èµ·ã€‚\n\nå¦‚æœä½ è®¤åŒä¸Šé¢è¿™æ®µè¯ï¼Œé‚£ä¹ˆ tailwind ä¸€å®šæ˜¯ä¸ªé€‚åˆä½ çš„å·¥å…·ï¼Œä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„æ˜¯è¿™ä¸ªå·¥å…·ä»…ä»…åŸºäº postcssï¼Œè¿™æ„å‘³ç€ä½ ä¸éœ€è¦ä½¿ç”¨ SASSï¼ˆå¹¶ä¸æ˜¯ SASS ä¸å¥½ï¼Œåªæ˜¯å›½å†…ç”¨èµ·æ¥å¤ªæ‚²å‰§ï¼Œå³ä½¿å·²ç»æœ‰ sass dartï¼Œä½†æ˜¯å› ä¸ºæ™®éè¿˜æ²¡æ”¯æŒï¼Œæ¯æ¬¡ä½¿ç”¨çš„æ—¶å€™ç¥ç»éƒ½è¦ç´§ç»·ä¸€ä¸‹ï¼‰ï¼Œå®ƒå’Œ SASS ä¹Ÿä¸å†²çªã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ config æ–‡ä»¶æ¥è‡ªå®šä¹‰æ ·å¼ï¼ˆè¿™å¾ˆåƒå¾ˆå¤š CSS in JS çš„æ ·å¼åº“ï¼Œè¿™åº”è¯¥æ˜¯æˆ‘å–œæ¬¢é‚£äº›åº“çš„å”¯ä¸€ä¸€ç‚¹äº†ï¼‰ã€‚\n\n## æ“ç»ƒèµ·æ¥\n\n[å®˜ç½‘å®‰è£…æ–¹å¼](https://tailwindcss.com/docs/installation)å¾ˆè¯¦ç»†ï¼ŒåŸºæœ¬ä¸Šèƒ½æåˆ°çš„å·¥å…·éƒ½æè¿‡äº†ã€‚\n\nå°±æ‹¿å‰é¢çš„`.avatar`æ¥ä¸¾ä¾‹ï¼Œä½¿ç”¨ tailwind çš„ä»£ç åº”å¦‚ä¸‹ï¼ˆæ³¨æ„ tailwind å•ä½ä¸æ˜¯ px è€Œæ˜¯ remï¼Œè¿™é‡Œå‡å®š html çš„å­—ä½“å¤§å°ä¸º 10pxï¼‰ã€‚\n\n```CSS\n.avatar {\n    @apply m-4;\n    @apply p-2;\n    @apply rounded-full;\n}\n```\n\nè¿™æ ·æ—¢æ»¡è¶³äº†ï¼Œç±»åçš„è¯­ä¹‰åŒ–ï¼Œè¿˜èƒ½ä½¿ç”¨ config æ–‡ä»¶æ¥ç»Ÿä¸€è‡ªå·±çš„è®¾è®¡è¯­è¨€ï¼Œæœ€é‡è¦çš„ï¼Œå¦‚æœä½ æ‹¿ houdini å†™ä¸ªä»€ä¹ˆå¥‡è‘©çš„ polyfillï¼Œå°±ç®—é¢„ç¼–è¯‘å™¨è¯»ä¸æ‡‚ï¼Œä»–ä¹Ÿä¼šå®¹é”™ï¼Œæ¯•ç«Ÿè¿™å°±æ˜¯åŸç”Ÿ CSSã€‚\n\nè‡³äºå®˜ç½‘çš„ç¤ºä¾‹ï¼Œæˆ‘ä¸ªäººå¾ˆä¸æ”¯æŒï¼Œæ„Ÿè§‰æ˜¯ä¸€ç§å¼€å€’è½¦çš„æ–¹å¼ï¼Œä½†èåœç™½èœå„æœ‰æ‰€çˆ±ï¼Œå¦‚æœæœ‰å…¬å¸ä¼šå› ä¸ºæˆ‘å†™é‚£æ ·çš„ä»£ç è€Œç»™æˆ‘é’±çš„è¯ï¼Œæˆ‘å½“ç„¶æ— æ‰€è°“ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["css","tailwind","postcss"]}},{"id":"2020/03/27/svelte.md","slug":"2020/03/27/svelte","body":"\n# Svelte è®©äººçœ¼å‰ä¸€äº®çš„å‰ç«¯æ¡†æ¶\n\næˆ‘è§‰å¾—å¿…é¡»è¦ä»‹ç»ä¸€ä¸‹ [svelte](https://svelte.dev/) è¿™ä¸ªæ¡†æ¶ï¼Œç¡®åˆ‡çš„è¯´æ˜¯ svelte v3ï¼Œè¿™åº”è¯¥æ˜¯ç»§ [riotjs](http://riot.js.org/)ã€[typescript](https://www.typescriptlang.org/) å’Œ [rust](https://www.rust-lang.org/) ä¹‹ååˆä¸€ä¸ªèƒ½ç»™æˆ‘çœ¼å‰ä¸€äº®çš„æ„Ÿè§‰çš„äº§å“äº†ã€‚\n\n## å…³äº Svelte\n\nä¸å¾—ä¸æåˆ°ä»–çš„ä½œè€… [Rich Harris](https://github.com/Rich-Harris)ï¼Œæåˆ°ä»–çš„å¦ä¸€ä¸ªä½œå“å°±æ˜¯å¤§åé¼é¼çš„ [rollup](http://rollupjs.org/)ï¼Œè¿™å¯æ˜¯ç¬¬ä¸€ä¸ªæå‡º tree-shaking çš„å‰ç«¯æ‰“åŒ…å™¨ï¼ˆè¯´å®è¯ï¼Œè¿™å¯¼è‡´æˆ‘æœ‰æ›´å¤šçš„æ‹…å¿§ï¼Œsvelte å¯èƒ½ä¼šå˜æˆåƒ rollup ä¸€æ ·çš„å°ä¼—ç‹‚æ¬¢ï¼‰ã€‚\n\nå›åˆ° svelteï¼Œä»–ä» v1 çš„æ—¶å€™ç›®æ ‡å°±æ˜¯ç®€å•ï¼Œåªä¸è¿‡ v1 ç‰ˆæœ¬çœ‹èµ·æ¥å¤ªåƒ zepto äº†ï¼ˆé‚£æˆ‘ä¸ºä»€ä¹ˆä¸ç”¨åŸç”Ÿ JavaScriptï¼‰ã€‚ä¸è¿‡ v3 ç‰ˆæœ¬è¿™ä¸ªæ¡†æ¶æ¢äº†ä¸ªæ–¹å‘ï¼Œä»æ¡†æ¶å˜æˆäº†ç¼–è¯‘å™¨ï¼Œç±»ä¼¼äº riotjs å’Œ vuejsï¼Œç»„ä»¶çš„ htmlã€css å’Œ js å¯ä»¥å†™åœ¨ä¸€èµ·ï¼Œå…¶å®æˆ‘å¹¶ä¸æ˜¯ç‰¹åˆ«æ¨å´‡è¿™ç§åšæ³•ï¼Œå¾€å¾€æœ‰æ—¶å€™æˆ‘æ›´å€¾å‘äº angularJS çš„åšæ³•ï¼Œä½†æ˜¯ svelte çš„å¤„ç†çœŸçš„å¤ªå®Œç¾ã€‚\n\n```html\n<script>\n  const hello = \"world\";\n</script>\n\n<h1>{hello}</h1>\n\n<style>\n  h1 {\n    color: black;\n  }\n</style>\n```\n\nçœ‹åˆ°äº†å—ï¼Ÿæ²¡æœ‰å¤šå‡ºæ¥çš„ `Vue.extend()`ï¼ŒHTML å’Œ JavaScript éƒ¨åˆ†çš„äº¤äº’ç«Ÿç„¶è¿™å„¿ä¹ˆå®Œç¾ï¼è¦æ˜¯ CSS å†åŠ æŠŠåŠ›å°±æ›´å¥½äº†ï¼ˆä¸è¿‡å¦‚æœæ˜¯ CSS in JS çš„è¯...é‚£è¿˜æ˜¯ç”¨æŸä¸ª preprocessor å‹‰å¼ºä¸€ä¸‹å¥½äº†ï¼‰ã€‚HTML æ¨¡æ¿ç±»ä¼¼æ¯”è¾ƒç®€å•çš„ handlebars è¯­æ³•ï¼Œç”šè‡³æ”¯æŒå¼‚æ­¥æ¨¡æ¿ã€‚\n\nå¦å¤– svelte æ²¡æœ‰è™šæ‹Ÿ DOMï¼Œè¿™ä¸€ç‚¹æˆ‘æœ‰ä¸€äº›ç›¸è§æ¨æ™šï¼Œæˆ‘ä¹‹å‰å°±å†™è¿‡[æ–‡ç« ](/fe/2016/03/31/VUE&Riot&Reactå®åŠ›æ¯”è¾ƒ.html)è´¨ç–‘è™šæ‹Ÿ DOM æ˜¯ä¸æ˜¯çœŸçš„èƒ½å¸¦æ¥æ€§èƒ½æé«˜ï¼ˆç»“æœæ˜¯æ€§èƒ½å¾ˆå·®ï¼‰ï¼Œä½†æ˜¯æœ€ç»ˆè¢«äººå–·äº†ï¼Œå¯¼è‡´ä¸€å¹´åä¸å¾—ä¸[å¼ƒå‘ riotjs æ”¹ç”¨ preact](/fe/2017/05/15/å¼ƒå‘Riotè½¬å‘Preact.html)ã€‚ä½†æˆ‘å§‹ç»ˆè®¤ä¸ºè™šæ‹Ÿ DOM æ›´æ˜¯ä¸€ä¸ªèŒƒå¼è€Œä¸æ˜¯èƒ½å¸¦æ¥æ€§èƒ½æå‡çš„ç¥å™¨ã€‚æ‰€ä»¥ä½ ä»£ç å·®ï¼Œæ¢ä»€ä¹ˆèŒƒå¼ï¼Œæ€§èƒ½éƒ½å·®ï¼Œå–·åˆ«äººä¹‹å‰å…ˆç§°ç§°è‡ªå·±å‡ æ–¤å‡ ä¸¤å¥½ä¹ˆï¼Ÿ\n\nsvelte ç¬¦åˆå“åº”å¼æ¨¡å¼ï¼Œè¿™ä¸€ç‚¹å’Œ riotjs å¾ˆç±»ä¼¼ï¼Œå€ŸåŠ© svelte è¿™ä¸ªç¼–è¯‘å™¨ï¼Œå†™å¥½çš„ç»„ä»¶ä¼šè¢«ç¼–è¯‘æˆå“åº”å¼å‡½æ•°ã€‚ä¹Ÿè®¸æ‹¿ riotjs åšæ¯”æ–¹ä¼šæ¯”è¾ƒéš¾ï¼Œè¿™é‡Œæ‹¿ react åšæ¯”æ–¹ï¼Œåœ¨ react ä¸­å®ç°å“åº”å¼éœ€è¦ä½¿ç”¨`setState()`ã€‚\n\n```JavaScript\nconst Com = () => {\n    const [state, setState] = useState(1);\n    useEffect(() => setState(state + 1), [])\n    const stateX2 = state*2;\n\n    return (\n    <>\n        <div>{state*2}</div>\n        <div>{stateX2}</div>\n    </>\n    );\n}\n/* è¾“å‡º\n * <div>2</div>\n * <div>2</div>\n*/\n```\n\nè€Œç”±äº svelte æ˜¯ä¸ªç¼–è¯‘å™¨ï¼Œsvelte é‡Œé¢ä¸ä»…ä»£ç æ›´å°‘ï¼Œè€Œä¸”æ­£ç¡®çš„è¾“å‡ºäº†`stateX2`çš„å€¼ã€‚\n\n```HTML\n<script>\nimport { onMount } from \"svelte\";\n\nlet state = 1;\n\nonMount(() =>  state += 1);\n\n$: let stateX2 = state * 2;\n</script>\n\n<div>{state}</div>\n<div>{stateX2}</div>\n\n<!--\n    è¾“å‡º\n    <div>2</div>\n    <div>4</div>\n-->\n```\n\næ²¡é”™ï¼Œå®Œå…¨æ²¡æœ‰å¤šä½™çš„ä»£ç ï¼ˆå…¶å® svelte ç¼–è¯‘å™¨ä¼šé»˜é»˜åœ°ç»™`state`å¢åŠ ä¸€ä¸ª`observable`çš„é…ç½®ï¼Œä½†æ˜¯è¿™éƒ½æ˜¯ç¼–è¯‘å™¨è‡ªå·±åšçš„ï¼Œå¼€å‘è€…å®Œå…¨ä¸éœ€è¦è€ƒè™‘ï¼‰ã€‚è¿™é‡Œå‘ç°`stateX2`å‰é¢æœ‰ä¸€ä¸ª`$`æ ‡è¯†ï¼Œè¡¨æ˜åé¢çš„è¯­å¥æ˜¯å“åº”å¼çš„ã€‚è¿™ä¸€ç‚¹çœŸçš„å¾ˆå·§å¦™ï¼Œå› ä¸ºè¿™ä¸ªè¯­æ³•æ˜¯ JavaScript æ ‡å‡†é‡Œç™¾å¹´ä¸é‡çš„`goto`è¯­å¥ï¼Œsvelte é«˜æ˜çš„ä½¿ç”¨ JavaScript åŸæœ‰çš„è¯­æ³•å®ç°äº†æ–°çš„åŠŸèƒ½ï¼Œä¸åƒæŸæ¡†æ¶æ„£æ˜¯åŠ äº†ä¸€ä¸ª JSX è¯­æ³•ï¼ˆä¸æ˜¯é„™è§† JSXï¼ŒJSX ä¹Ÿå¾ˆç‰›é€¼çš„è¯´ï¼‰ã€‚\n\nåœ¨ n å¤šä¸ªæ¡†æ¶éƒ½åœ¨æ¨¡ä»¿ react çš„ä¸»æµä¸‹ï¼Œè¿™ä¸ªæ¡†æ¶è¿˜èƒ½åˆ«å‡ºå¿ƒè£ï¼Œä¸å¾—ä¸èµï¼Œå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œæˆ‘å¼ºçƒˆæ¨èæµè§ˆä»–ä»¬çš„[ä¾‹å­](https://svelte.dev/examples#hello-world)ã€‚store å’Œ context éƒ½éå¸¸æœ‰å¯å‘ã€‚\n\næœ€å¤§çš„ç¼ºç‚¹å°±æ˜¯ç›®å‰è¿˜æ²¡æœ‰å®˜æ–¹çš„ TypeScript æ”¯æŒï¼Œè¿™ä¸€ç‚¹å¾ˆæœ‰å°´å°¬ï¼Œå› ä¸º svelte æœ¬èº«å°±æ˜¯ TypeScript å†™çš„ã€‚ä¸è¿‡ç°åœ¨æœ‰ç¬¬ä¸‰æ–¹çš„[svelte-preprocess](https://github.com/kaisermann/svelte-preprocess)å¯¹ TypeScript æä¾›æ”¯æŒï¼Œä¸çŸ¥é“å•¥æ—¶å€™è½¬æ­£ã€‚\n\n## Sapper\n\nriotjs åŒæ ·æ²¡æœ‰è™šæ‹Ÿ DOMï¼Œè¿™ä½¿å¾—å®ƒåœ¨ SSR æ–¹é¢ä¼š[æœ‰ä¸€äº›é—®é¢˜](https://riot.js.org/documentation/#riot-dom-caveats)ï¼Œä½†æ˜¯ Svelte æä¾›äº†ä¸€å¥— SSR è§£å†³æ–¹æ¡ˆï¼Œ[sapper](https://sapper.svelte.dev/) åŒæ—¶æ”¯æŒ node æ¸²æŸ“å’Œé™æ€å‘å¸ƒã€‚\n\nSapper å— next.js å¯å‘ï¼Œä½¿ç”¨`src/route`æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶åšè·¯ç”±ã€‚\n\n```\nsrc/routes\n    _layout.svelte -- å¸ƒå±€æ–‡ä»¶\n    _error.svelte  -- 404ç›®å½•\n    index.svelte   -- /æˆ–è€…/index\n    posts.json.js  -- /post.jsonï¼Œå¯ä»¥ä½¿ç”¨ç±»ä¼¼expressè·¯ç”±çš„æ–¹å¼å†™æ¥å£\n```\n\næƒ³è¦åœ¨ index é‡Œé¢å®ç° server ç«¯çš„é¢„åŠ è½½ï¼Œå¯ä»¥ä½¿ç”¨ sapper çš„ preload APIã€‚\n\n```html\n<script context=\"module\">\n  export async function preload(page, session) {\n    const res = await this.fetch(\"posts.json\");\n    const { posts } = await res.json();\n\n    return { posts };\n  }\n</script>\n```\n\nè¿™æ ·ä¼šåœ¨`window`ä¸Šé¢æ³¨å…¥ä¸€ä¸ª`__SAPPER__`å˜é‡æŠŠ server ç«¯é¢„åŠ è½½çš„å€¼èµ‹ä¸Šå»ã€‚\n\nå› ä¸º sapper è¿˜åœ¨ beta é˜¶æ®µï¼Œæˆ‘ä¹Ÿä¸æ•¢æ‹¿æ¥å¼€å‘ä»€ä¹ˆå¤§é¡¹ç›®ï¼Œä½†çœŸå¿ƒæƒ³å†™å†™ svelteï¼Œå› ä¸ºå®ƒåœ¨å¾ˆå¤šåœ°æ–¹éå¸¸æœ‰æ–°æ„ï¼Œå†å²åŒ…è¢±ä¹Ÿä¸å¤§ï¼Œæš‚æ—¶å†™ä¸ª [CSS playground](https://css.gongbushang.com/) æ¥åš [CSS Secrets](http://shop.oreilly.com/product/0636920031123.do) çš„ç¬”è®°å¥½äº†ã€‚\n\n## å•å…ƒæµ‹è¯•\n\n[testing-library](https://testing-library.com/docs/svelte-testing-library/intro) æä¾›å•å…ƒæµ‹è¯•æ”¯æŒï¼Œé…ç½®èµ·æ¥ç»å¯¹æ¯” react å’Œ vue ç®€å•ï¼Œåªæ˜¯å› ä¸ºæ¯”è¾ƒæ–°ï¼Œæ‰€ä»¥æ²¡æœ‰ç±»ä¼¼çš„ create react app è¿™ç§å®˜æ–¹è„šæ‰‹æ¶ï¼Œå½“ç„¶å¦‚æœ sapper å‡ºæ­£å¼ç‰ˆäº†å°±ç®—æœ‰äº†ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["svelte","sapper","JavaScript","rollup"]}},{"id":"2020/03/29/Rust-crate.io.md","slug":"2020/03/29/rust-crateio","body":"\n# Rust å¼€å‘æ›´æ¢ crate.io æº\n\nä½¿ç”¨ VSCode å¼€å‘ Rust çš„æˆ‘ï¼Œæœ€éš¾è¿‡çš„ä¸€åˆ»å°±æ˜¯æ‰“å¼€ç¼–è¾‘å™¨æ—¶çš„ RLS æ£€æŸ¥ï¼Œå¯ä»¥çœ‹åšå®ƒæ˜¯ä¸€ä¸ªç”¨æ¥æ£€æŸ¥ä»£ç è¯­æ³•çš„åå°ç¨‹åºï¼Œåœ¨ RLS çš„ issue é‡Œé¢æœ‰å¾ˆå¤šäººåæ§½ä»–åˆå§‹åŒ–çš„é€Ÿåº¦å®åœ¨æ˜¯å¤ªæ…¢äº†ï¼Œç„¶è€Œå¤§ä½¬çš„å›å¤éƒ½æ˜¯è¯´ä»–ä»¬ä¸éœ€è¦ä½¿ç”¨è¿™ç§è¾…åŠ©å·¥å…·ã€‚ä½œä¸ºä½¿ç”¨ JavaScript éƒ½ä¸€å®šè¦ TypeScript ç¼–è¯‘ï¼Œæ‰“å­—éƒ½æ˜¯é€šè¿‡è¯­éŸ³è¾“å…¥æ¥æ‰“å­—çš„æˆ‘æ¥è¯´ï¼ˆæ²¡é”™ï¼Œè¿™ç¯‡åšæ–‡æ˜¯è¯­éŸ³è½¬æ¢è¿‡æ¥çš„ï¼‰ï¼Œè‡£å¦¾åšä¸åˆ°å•Šã€‚\n\nRLS æ£€æŸ¥æœ‰ä¸€ä¸ªæ­¥éª¤æ˜¯`cargo check`ï¼Œè¿™é‡Œä¼šé“¾æ¥`crate.io`æ£€æŸ¥åŒ…çš„å®Œæ•´æ€§ã€‚ç”±äº`crate.io`çš„åŒ…å¤§å¤šæ‰˜ç®¡åœ¨ GitHubï¼Œæ‰€ä»¥å¤–ç½‘çš„å®å®ä»¬åæ§½çš„æ…¢åªæ˜¯ç§’çº§åˆ«çš„ï¼Œè€Œä¸­å›½çš„å®å®æ˜¯å°æ—¶çº§çš„ ğŸ˜­ã€‚\n\nä½†æ˜¯å°šæœ‰ä¿®è¡¥çš„ä½™åœ°ï¼Œä¸­ç§‘å¤§çˆ¸çˆ¸ç»™å›½å†…å¼€å‘è€…æä¾›å›½å†…çš„é•œåƒäº†ã€‚ä¿®æ”¹`~/.cargo/config`å¢åŠ ä¸­ç§‘å¤§çš„æºã€‚\n\n```ini\n[source.crates-io]\nregistry = \"https://github.com/rust-lang/crates.io-index\"\nreplace-with = 'ustc'\n\n[source.ustc]\nregistry = \"git://mirrors.ustc.edu.cn/crates.io-index\"\n```\n\nä¸­ç§‘å¤§å°±æ˜¯æˆ‘çš„ç¥å•Šï¼å¼€å‘ Rust ç»ˆäºå¯ä»¥å’Œå›½å¤–ä¸€æ ·æ…¢äº† ğŸ˜‚ï¼\n","collection":"blog","data":{"type":"post","category":"fe","tag":["rust","crate.io","ustc","cargo"]}},{"id":"2020/03/30/CSS Secret.md","slug":"2020/03/30/css-secret","body":"\n# CSS Secret æœ‰æ„Ÿ\n\nè™½ç„¶ç»´å¤šåˆ©äºšçš„ç§˜å¯†æ²¡æœ‰äº†ï¼Œä½†æ˜¯ CSS çš„ç§˜å¯†è¿˜æ˜¯å¯ä»¥è€ƒè™‘è€ƒè™‘çš„ï¼Œè¿™æœ¬ä¹¦æ˜¯ 2015 å¹´å‡ºç‰ˆçš„ï¼Œç›¸æ¯”äºç°åœ¨ï¼Œæ˜¾ç„¶é‡Œé¢çš„å¾ˆå¤šå±æ€§å·²ç»å¯ä»¥åšåˆ°å¤šå¹³å°å…¼å®¹äº†ï¼Œå½“ç„¶é‡Œé¢è¿˜æ²¡æœ‰æ¶‰åŠ grid å¸ƒå±€ï¼Œå¼ºçƒˆæ¨è [wesbos çš„ grid è¯¾ç¨‹](https://cssgrid.io/)ï¼Œè™½ç„¶çœ‹å®Œä¹Ÿæ˜¯å¿˜ ğŸ˜…ã€‚\n\nè¦è¯´ç¼–ç¨‹ç®—æ³•éš¾å­¦ï¼Œè·Ÿ CSS æ¯”èµ·æ¥è¿˜æ˜¯ä¸ªå¼Ÿå¼Ÿï¼Œä¸ä»…ä»…è¦äº†è§£ä¸€äº›æ‹“æ‰‘çš„çŸ¥è¯†ï¼Œç¼–å‡ºæ¥çš„å›¾å½¢è¿˜å¾—å¥½çœ‹ã€‚\n\nä¹¦ä¸­çš„å®ç°éƒ½æ”¾åœ¨[è¿™é‡Œ](http://play.csssecrets.io/)ï¼ŒåŒæ—¶æˆ‘ä¹ŸæŒ‘äº†ä¸€äº›å–œæ¬¢çš„[è‡ªå·±å®ç°äº†ä¸€ä¸‹](http://css.gongbushang.com/)ã€‚\n\nä¹¦é‡Œé¢æ¶‰åŠåˆ°çš„æœ‰\n\n- outline\n- box-shadow\n- background-imageï¼ˆé‡Œé¢æåˆ°äº†ä¸€ä¸ªçº¯ CSS å®ç°åŒ—äº¬å›¾æ¡ˆçš„[ç½‘ç«™](https://leaverou.github.io/css3patterns/)ï¼Œå€¼å¾—æ‹¥æœ‰ï¼‰\n- background-origin\n- border-image\n- path-clip\n- transform\n- filter\n- font-variable\n- keyframe\n\nç›®å‰ä¸ªäººæ¯”è¾ƒæ„Ÿå…´è¶£ç„¶è€Œæœªè¢«æ¶‰åŠçš„æ˜¯\n\n- grid\n- css variables\n\nå½“ç„¶è¿™äº›é‚£ä¼šå„¿éƒ½è¿˜æ²¡æœ‰ï¼Œæ‰€ä»¥é—²ç€æ²¡äº‹å„¿å¹²çš„æ—¶å€™è¿˜è¦å¤šé€›é€›[css-tricks](https://css-tricks.com/)ã€‚\n\nè¿˜æœ‰ï¼Œåœ¨å†™[svelte](/fe/2020/03/27/svelteä¸€ä¸ªè®©äººçœ¼å‰ä¸€äº®çš„çš„å‰ç«¯æ¡†æ¶.html)æ›¾ç»æè¿‡å¦‚æœæœ‰ä¸€ä¸ªæ¯”è¾ƒå¥½çš„ CSS å’Œ JavaScript ä»¥åŠ HTML äº¤äº’çš„æ–¹æ³•å°±å¥½äº†ï¼Œç»†æƒ³ä¹‹ä¸‹ css variables æˆ–è®¸å¯ä»¥ã€‚è¯•æƒ³å¦‚ä¸‹ç»“æ„ã€‚\n\n```html\n// Back.svelte\n<div class=\"bg\">\n  <slot></slot>\n</div>\n\n<style>\n  .bg {\n    --color: red;\n  }\n</style>\n```\n\n```html\n// Menu.svelte\n<ul>\n  <li>Menu</li>\n</ul>\n\n<style>\n  ul > li {\n    color: var(--color, blue);\n  }\n</style>\n```\n\n```html\n// App.svelte\n<script>\n  import Back from \"Back.svelte\";\n  import Menu from \"Menu.svelte\";\n</script>\n\n<Back>\n  <menu></menu>\n</Back>\n```\n\næ­¤æ—¶çš„ Menu åº”è¯¥æ˜¯ Back é‡Œé¢è®¾ç½®å¥½çš„çº¢è‰²ï¼ˆæˆ‘è‡ªå·±æ²¡å°è¯•ï¼Œåªæ˜¯å†™è¿™ä¸ªåšæ–‡çš„æ—¶å€™ä¸´æ—¶èµ·æ„ï¼‰ã€‚è¿™æœ€å¤§çš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œç±»ä¼¼äº react é‡Œé¢çš„ themeï¼Œ`<Back/>`ç»„ä»¶ç»™`<Menu/>`ç»„ä»¶æä¾›äº†é…åˆçš„æ ·å¼ï¼Œè€Œä¸ä»…ä»…å±€é™äº JavaScript ä¼ å…¥çš„æ•°æ®ã€‚\n\nåªå¯æƒœ CSS variables éœ€è¦åšå‘ä¸‹å…¼å®¹ï¼Œè€Œä¸”å°±ç®—æ˜¯ postcss çš„[postcss-css-variables](https://www.npmjs.com/package/postcss-css-variables)ä¹Ÿåªèƒ½å…¼å®¹æ”¾åˆ°`:root`ä¸‹çš„å˜é‡ï¼ˆé‚£è¦ä½ æœ‰ä½•ç”¨å›§ï¼‰ï¼Œä¸è¿‡å°±[caniuse](https://caniuse.com/#feat=css-variables)çš„æ•°æ®ï¼Œä¸è€ƒè™‘ä¸­å›½ç”¨æˆ·çš„è¯ï¼Œç¡®å®å¯ä»¥å¤§èƒ†ä½¿ç”¨ CSS variablesï¼Œå°±ç®—æ˜¯é™çº§ä¼°è®¡ä¹Ÿæ²¡é‚£ä¹ˆéš¾çœ‹å§ã€‚\n","collection":"blog","data":{"type":"post","category":"fe","tag":["CSS"]}}]}