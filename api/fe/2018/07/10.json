{"posts":[{"id":"2018/07/10/Apollo-Meteor.md","slug":"2018/07/10/apollo-meteor","body":"\n# 没有手动配置过 Apollo 都不知道 Meteor 帮你做了多少事\n\n## Server 端\n\n```ts\nexport class AppModule implements NestModule {\n  graphiql(customer: MiddlewareConsumer) {\n    if (!isDev) return;\n    customer\n      .apply(graphiqlExpress({ endpointURL: graphql }))\n      .forRoutes(graphiql);\n  }\n  graphql(customer: MiddlewareConsumer) {\n    customer\n      .apply(graphqlExpress(req => ({ schema, rootValue: req })))\n      .forRoutes(graphql);\n  }\n  configure(customer: MiddlewareConsumer) {\n    this.graphiql(customer);\n    this.graphql(customer);\n  }\n}\n```\n\n## client\n\n```typescript\n@Component({\n  components: {\n    MeCard,\n    Links\n  },\n  apollo: {\n    hello: {\n      query: gql`\n        {\n          hi\n        }\n      `,\n      update(data) {\n        return data.hi;\n      }\n    }\n  }\n})\nexport default class IndexPage extends Vue {\n  data() {\n    return {\n      hello: \"\"\n    };\n  }\n}\n```\n\n同时要在 nuxt 配置中增加 apollo 的配置项\n\n```typescript\n[\n  \"@nuxtjs/apollo\",\n  {\n    clientConfigs: {\n      default: {\n        httpEndpoint:\n          process.env.HTTP_ENDPOINT || \"http://localhost:3000/graphql\"\n      }\n    }\n  }\n];\n```\n","collection":"blog","data":{"type":"post","category":"fe"}}]}